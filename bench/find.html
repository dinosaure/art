<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/d3-simple-slider"></script>
  <script src="https://unpkg.com/simple-statistics@7.0.2/dist/simple-statistics.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
  <link href="style.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <style>
    *{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body{
    width: 100%;
    height: 100%;
    font-family:Helvetica Neue,metric,sans-serif;
    text-rendering: optimizeLegibility;
}

.center{
    width: 500px;
    margin:auto
}

text{
    font-family: metric,sans-serif;
}

.ml {
    text-align: left
}

svg {
    overflow: hidden;
    margin: auto
}

.axis line, .axis path{
    stroke: #2E3532;
    stroke-width:1px;
}

.axisTitle, .axis text{
    fill: #2E3532;
    font-size:12px;
}

.background {
    fill: #FBFBFB;
    stroke: #2E3532;
}

.axisTitle, .chartTitle{
    text-anchor: middle
}


.ytitle {
    text-anchor: middle;
    transform: rotate(90deg)
}

.warningtext{
    text-anchor: center;
    fill: #F06449;
}

.regLine {
    stroke: #F06449;
    stroke-width:2px;
    opacity:0.7
}

.circle {
    fill: #4ECDC4;
    stroke: #292f36;
    stroke-width:0.3px
}

table {
    margin:auto;
    text-align:left;
    border-spacing: 15px 5px;
    border: 1px solid #2E3532
}

th {
    text-align: center;
    color:#F06449
}


tr {
    fill: #2E3532;
    font-size:10px
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: auto;
  background-color: #F06449;
  color: #FFFFFF;
  text-align: center;
  border-radius: 10px;
  padding: 0 5px 0 5px;
  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}
.bar {
    fill: #4ECDC4;
    stroke:#292f36;
}
.bar:hover {
    fill: #F06449;
    stroke:#292f36;
    stroke-width:1px;
}

.radio {
    margin: auto;
    width : 200px;
}

.wrapper {
    display: grid;
    margin: 50px 50px 50px 50px;
    gap: 10px 20px;
    grid-auto-rows: minmax(20px, auto);
    text-align: center;
    place-items: center;
}

.mainTitle, .summarizeTitle {
    height:30px;
    width: auto;
    border-radius: 2px;
    padding: 0 45px 0 45px;
    border-style: solid;
    border-width:1px;
    box-shadow: 2px 2px 1px rgba(0,0,0,0.1);
    color:  #2E3532;
    background: #FBFBFB;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.slidecontainer{
    width: 50%;
}

  </style>
</head>
<body>

  <script type="text/javascript">
    // structure of JSON
// { xLabel: string,
//   yLabel: string,
//   series: [ tests ] }
//
// tests := { name: string,
//            description: { start : int, sampling: float, stabilize: bool,
//                           quota: float, limit: int, instances: [string],
//                           samples: int, time : float}
//            dataset: [ point ],
//            kde : [ v: float ] (optional)
//            result: { estimate: float, r_square: float (optional) } }
//
// point := { x : double,
//            y : double }
//
// xLabel and yLabel are the same for any tests
window.onload = function () {

const wsvg = 600;
const hsvg = 400;
const wslider = 200;
const hslider = 50;
const margin = {left:50,right:50,top:20,bottom:50};
const dotSize = 1.5;
const innerW = wsvg-(margin.left+margin.right);
const innerH = hsvg-(margin.top+margin.bottom);

const marginbar = {left:150,right:150,top:50,bottom:50};
const wbar = 900;
const innerWbar = wbar-(marginbar.left+marginbar.right);

const SQRT_2PI = Math.sqrt(2 * Math.PI);

// Main function : place containers and call plot functions.
function render(inputs) {
    inputs.series.forEach(
	function(serie) {
	    serie.dataset.forEach(
		function(d) {
		    d.x = +d.x;
		    d.y = +d.y;
		});}
    );

    // First step : check if there is no kde/histogram data at all in
    // the benchmarks, in which case, we want to reduce our layout to
    // one column.
    let nonempty_kde = false;
    inputs.series.forEach(function (serie) {
	if ('kde' in serie) {
	    nonempty_kde = nonempty_kde || true;} });
    const nb_col = nonempty_kde ? 2 : 1;

    // ************************************************ //
    //              Layout of the page                  //
    // ************************************************ //
    // + a summarize bar graph on top
    // + one section for each benchmark which includes
    //     * 1 title
    //     * 1 linear regression graph and its title and information table
    //     * if kde data are available a histogram/kde graph with its control panel.
    //
    // If none of the benchmarks has kde data, the layout is the same
    // but with only one column (no hist/kde graphs).
    //
    //
    //              c1:        c2:
    //
    // r1:            *title*
    //           ___________________
    // r2:      |   summarize bar   |
    //          |___________________|
    //
    // r3:           *title-1*
    //
    // r4:        *title*   *radio*
    //           _______     _______
    // r5:      | lr-1  |   | kde-1 |
    //          |_______|   |_______|
    //
    // r6:      *infos-1*   *slider-1*
    // ..
    // r(4i+3):       *title-i*
    //
    // r(4i+4):  *title*     *radio*
    //           _______     _______
    // r(4i+5): | lr-i  |   | kde-i |
    //          |_______|   |_______|
    //
    // r(4i+6): *infos-i*   *slider-i*
    //
    // etc ..

      const main = d3.select("body")
	  .append("div")
	    .attr("class", "wrapper")
	    .style("grid-template-columns", (nonempty_kde ? "repeat(2,"+wsvg+"px)" : "900px"))
	    .attr("id", "main");

    // ************************************************ //
    //              Summarize bar graph                 //
    // ************************************************ //

    // Title
    main.append("div")
   	  .style("grid-row", "1")
      	.style("grid-column", "1 / "+(nb_col+1))
  	  .attr("class", "summarizeTitle")
  	.text("Benchmarks summary");

    // Bar graph
    let bar_container = main
	.append("div")
   	  .style("grid-row", "2")
      	  .style("grid-column", "1 / "+(nb_col+1))
	  .attr("id", "bar");
    plot_summarize_bar_graph(bar_container, inputs);


    // ************************************************ //
    //              Layout for lr/kde graphs            //
    // ************************************************ //

    // Benchmark titles
    const titles = main
	  .selectAll(".mainTitle")
	  .data(inputs.series)
	  .enter()
	  .append("div")
	    .attr("id", (data, i) => "title-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+3))
      	    .style("grid-column", "1 / "+(nb_col+1))
  	    .attr("class","mainTitle")
	  .append("text")
  	    .attr("x", wsvg)
  	    .attr("y", margin.top-10)
            .text((data, i) => "#"+data.name);

    // Linear regression graph titles
    const titles_lr = main
	  .selectAll("#title_lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("id",  "title_lr")
   	    .style("grid-row", (data,i) =>""+(4*i+4))
   	    .style("grid-column", "1")
	  .append("text")
  	    .attr("class","chartTitle")
  	    .text("Linear regression");

    // Containers for linear regression graphs
    const lr_graphs = main
	  .selectAll(".lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr")
	    .attr("id", (data, i) => "linearRegression-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+5))
   	  .style("grid-column", "1");

    // Containers for linear regression info tables
    const lr_info = main
	  .selectAll(".lr-info")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr-info")
	    .attr("id", (data, i) => "lr-info-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+6))
            .style("grid-column", "1");

    let radio_div, kde_graphs, kde_controler;
    if (nonempty_kde) {
	// Containers for radio buttons to choose between histogram/kde plots
	radio_div = main
	      .selectAll(".radio_div")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class",  "radio")
	      .attr("id", (d, i) => "radio_div"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+4))
   	      .style("grid-column", "2");

	// Containers for kde/hist graph
	kde_graphs = main
	      .selectAll(".kde")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde")
	      .attr("id", (data, i) => "histKde-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+5))
   	      .style("grid-column", "2");

	// Containers for kde/hist controlers
	kde_controler = main
	      .selectAll(".kde-controler")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde-controler")
	      .attr("id", (data, i) => "kde-controler-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+6))
              .style("grid-column", "2");
    }

    // ************************************************ //
    //          Linear regression graph                 //
    // ************************************************ //
    lr_graphs.each( function(serie, i) {
	//Curves for each input
	const xMin = 0;
	const xMax = d3.max(serie.dataset, d => d.x);
	const yMin = 0;
	const yMax = d3.max(serie.dataset, d => d.y);

	// Define x axis
	const xScale = d3.scaleLinear()
  	      .domain([xMin,xMax])
  	      .range([0,innerW])
  	      .nice();
	const xAxis = d3.axisBottom()
  	      .scale(xScale)
  	      .ticks(8, "s");
	// "s" = number format such as 1000 -> 1k

	// Define y axis
	const yScale = d3.scaleLinear()
  	      .domain([yMin,yMax])
  	      .range([innerH,0])
  	      .nice();
	const yAxis = d3.axisLeft()
  	      .scale(yScale)
  	      .ticks(8, "s");

	// Svg
  	const plot = d3.select(this)
	    .append("svg")
  	      .attr("width",wsvg)
  	      .attr("height",hsvg);
	// Color background
	plot.append("rect")
  	    .attr("x",margin.left)
  	    .attr("y",margin.top)
  	    .attr("width",innerW)
  	    .attr("height",innerH)
  	    .attr("class","background axis");
	// Plot axis
	plot.append("g")
  	    .attr("transform",
	 	  "translate("+margin.left+","
	 	  +(hsvg-margin.bottom)+")")
	    .attr("class", "axis")
  	    .call(xAxis);
	plot.append("g")
  	    .attr("transform",
	  	  "translate("+margin.left+","
		  +margin.top+")")
	    .attr("class", "axis")
  	    .call(yAxis);
	// Print axis titles
	plot.append("text")
	    .attr("class", "axisTitle")
	    .attr("x", wsvg/2)
	    .attr("y", hsvg-10)
	    .text(inputs.xLabel);
	plot.append("text")
	    .attr("class", "axisTitle ytitle")
	    .attr("transform-origin", 0, hsvg/2)
	    .attr("x", 0)
	    .attr("y", hsvg/2)
	    .text(inputs.yLabel);

	// Plot data
	plot.append("g")
	    .attr("transform",
		  "translate("+margin.left+","
		  +margin.top+")")
  	    .selectAll("circle")
  	    .data(serie.dataset)
  	    .enter()
  	    .append("circle")
	    .attr("class", "circle")
  	    .attr("r", dotSize)
  	    .attr("cx", d => xScale(d.x))
  	    .attr("cy", d => yScale(d.y));

	// Plot linear regression line

	const xVals = serie.dataset.map((e,j) => e.x);
	const yVals = serie.dataset.map((e,j) => e.y);
	const pairs = [];
	xVals.forEach((d,i) => pairs.push([xVals[i],yVals[i]]));
	const linReg = ss.linearRegression(pairs);
	const linRegLine = ss.linearRegressionLine(linReg);
	let line = plot
	    .append("line")
    	      .attr("transform","translate("+margin.left+","+margin.top+")")
    	      .attr("class","regLine")
    	      .attr("x1",xScale(xMin))
    	      .attr("x2",xScale(xMin))
    	      .attr("y1",yScale(linRegLine(xMin)))
    	      .attr("y2",yScale(linRegLine(xMin)));
	line.transition().duration(1000).delay(2000)
    	      .attr("x2",xScale(xMax))
    	      .attr("y2",yScale(linRegLine(xMax)));

	// Add text boxes
	//const meanX = ss.mean(xVals).toFixed(0);
	//const meanY = ss.mean(yVals).toFixed(2);
	//const varX = ss.sampleVariance(xVals).toFixed(0);
	//const varY = ss.sampleVariance(yVals).toFixed(1);
	//const corCoeff = ss.sampleCorrelation(xVals,yVals).toFixed(3);

	const lr_results = [
	    ["Linear regression line", "y = "+linReg.b.toFixed(2)+" + "+linReg.m.toFixed(3)+"x"],
	    ["Coefficient", serie.result.estimate],
	    ["RÂ²", serie.result.r_square]
	];

	const sampling_to_string = sampling =>
              (Number.isInteger(sampling) ?  "`Linear "+sampling+"" : "`Geometric "+sampling+"");

	const format = v  => d3.format("s")(v);

	const param_benchmarks = [
	    ["LR sampling (sampling)", sampling_to_string(serie.description.sampling)],
	    ["Start (start)", serie.description.start],
	    ["Benchmark runtime (time / quota)",
	     format(serie.description.time) + " / " + format(serie.description.quota)],
	    ["Number of runs (samples)", serie.description.samples + " / " + serie.description.limit],
	    ["Stabilized GC (stabilize)", serie.description.stabilize]
	];

	const table = d3.select("#lr-info-"+i)
	      .append("table");

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Linear regression results");

	table.append("tbody")
	    .selectAll("tr")
	    .data(lr_results)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("class", "tooltip")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Benchmarks parameters")
	    .append("span")
	    .attr("class","tooltiptext")
	    .text("See [Benchmarks.stats]");

	table.append("tbody")
	    .selectAll("tr")
	    .data(param_benchmarks)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

    });

    // ************************************************ //
    //         Histogram and kde graphs                 //
    // ************************************************ //
    if (nonempty_kde) {
        kde_graphs.each(function (serie, i) {

	    // Svg for histogram and kde graphs
	    let pdfgraph = d3.select(this)
		.append("svg")
		.attr("id", "pdfgraph")
		.attr("width", wsvg)
		.attr("height", hsvg)
		.append("g")
		.attr("transform", "translate("+margin.left+","+margin.top+")");

	    // If there is no kde field in the data [serie], some note
	    // is written in the svg window.
	    if (!('kde' in serie)) {
		pdfgraph.append("text")
		    .attr("x", (margin.left+margin.right+wsvg)/2)
		    .attr("y", (margin.top+margin.bottom+hsvg)/2)
		    .attr("class", "warning")
		    .text("No available data");
	    } else if (d3.max(serie.kde) == d3.min(serie.kde)) {
		pdfgraph.append("text")
		    .attr("x", wsvg/2)
		    .attr("y", hsvg/2)
		    .attr("class", "warningtext")
		    .text("All data have same value.");
	    } else {
		const data = serie.kde;
		//Some default values
		const min_slider = (d3.max(data)-d3.min(data))/data.length;
		const max_slider = (d3.max(data)-d3.min(data))/30;
		let vslider = min_slider;

		//Radio buttons
		const form = d3.select("#radio_div"+i)
		      .append("form");

		form.append("input")
		    .attr("type", "radio")
		    .attr("name", "graph")
		    .attr("value", "hist"+i)
		    .attr("name", "graph")
		    .attr("checked", "checked")
		    .on("change", () => plot_chosen_graph(d3.select(this), "hist"));
		form.append("label")
		    .attr("for", "hist"+i)
		    .text("Histogram");
		form.append("input")
		    .attr("type", "radio")
		    .attr("value", "kde"+i)
		    .attr("name", "graph")
		    .on("change", () => plot_chosen_graph(d3.select(this), "kde"));
		form.append("label")
		    .attr("for", "kde"+i)
		    .text("KDE");

		//axis
		const min = d3.min(data),
		      max = d3.max(data);
		const minX = d3.max([0, min-max_slider]),
		      maxX = max+max_slider;

		//X axis is the same for both graphs (histogram and kde)
		const xscale = d3.scaleLinear()
		      .range([0, innerW])
		      .domain([minX, maxX])
		      .nice();
		const xAxis = d3.axisBottom()
		      .scale(xscale)
		      .ticks(8, "s");

		//Y axis has a different domain value between both graphs.
		//So yscale.domain() is defined individually for each plot.
		const yscale = d3.scaleLinear()
		      .range([0, innerH])
		      .nice();
		const yAxis = d3.axisLeft()
		      .scale(yscale)
		      .ticks(8, "s");

		//x value for kde graph
		const n = 1000;
		const x = Array(n);
		const xmin = d3.min(xscale.domain()),
		      xmax = d3.max(xscale.domain());
		for (let i=0; i<n; i++) { x[i] = xmin + i*(xmax-xmin)/n; }

		//Compute kde function for min bandwidth value to determine to determine
		//the max value of Y axis. Only happens one time when loading the webpage.
		const kde = kernelDensityEstimation(data, min_slider);
		const v = new Array(n);
		for (let i=0; i<n;i++){ v[i] = kde(x[i]);}
		const maxYkde = d3.max(v),
		      maxYhist = d3.max(histogram(data, max_slider, min, max));

		//background
		pdfgraph
		    .append("rect")
  		    .attr("x", 0)
  		    .attr("y", 0)
  		    .attr("width", innerW)
  		    .attr("height", innerH)
  		    .attr("class","background axis");

		// x Axis
		const gxAxis = pdfgraph
	              .append("g")
	              .attr("transform","translate(0"+","+innerH+")")
	              .attr("class", "axis")
	              .call(xAxis);

		// y Axis
		const gyAxis = pdfgraph
	              .append("g")
	              .attr("class", "axis")
	              .call(yAxis);

		// X Axis title
		pdfgraph.append("text")
		    .attr("class", "axisTitle")
		    .attr("x", innerW/2)
		    .attr("y", innerH+40)
		    .text("Estimated "+inputs.yLabel);

		plot_chosen_graph(d3.select(this), "hist");

		function plot_chosen_graph(container, choice) {


		    container.selectAll(".bar").remove();
		    container.select(".mypath").remove();
		    container.select(".ytitle").remove();

		    // Erasing control panels if it exists and initializing it
		    const control_container = d3.select("#kde-controler-"+i);
		    const slider = control_container.select("#slider-"+i);
		    const slidertitle = control_container.select("#slidertitle-"+i);
		    if (!slider.empty())  {
			slider.remove();
		    }
		    if (!slidertitle.empty())  {
			slidertitle.remove();
		    }

		    //Hist part
		    if (choice=="hist") {
			// Defined yAxis
			yscale.domain([maxYhist, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", 10)
			    .attr("y", innerH/2)
			    .text("Count");

			const barwidth = vslider;

			const update_hist =
			      plot_histogram(pdfgraph, data, barwidth, xscale, yscale);

			//slider
			control_container
			    .insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Barwidth");

			control_container
			    .insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) => {
				      if (value > 0) {
					  vslider=value;
					  update_hist(vslider);}}));
		    } else {
			//Defined yAxis
			yscale.domain([maxYkde, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", +10)
			    .attr("y", innerH/2)
			    .text("Density");

			const bandwidth = vslider;
			const update_kde = plot_kde(pdfgraph, data, bandwidth, xscale, yscale, x);

			//slider
			control_container.insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Bandwidth");

			control_container.insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) =>
				      {if (value > 0) { vslider=value; update_kde(vslider);}}));
		    }; // end else
		}; // end function
	    }; //end else (available kde data)
	}); //end function // end each
    }; //end if



function plot_summarize_bar_graph(container, inputs) {

    const hbar = d3.min([60*inputs.series.length, hsvg]);
    const innerHbar = hbar - marginbar.top - marginbar.bottom;

    const xb = d3.scaleLinear()
	  .range([0, innerWbar])
	  .domain([0, d3.max(inputs.series, serie => serie.result.estimate)])
	  .nice();
    const yb = d3.scaleBand()
	  .range([0, innerHbar])
	  .padding(0.2)
	  .domain(inputs.series.map(serie => serie.name));
    const xbAxis = d3.axisBottom()
	  .scale(xb)
	  .ticks(8, "s");
    const ybAxis = d3.axisLeft()
	  .scale(yb);

    const bargraph =
	container.append("svg")
	.attr("width", wbar)
	.attr("height", hbar);

    // background
    bargraph.append("rect")
  	.attr("x", marginbar.left)
  	.attr("y", marginbar.top)
  	.attr("width", innerWbar)
  	.attr("height", innerHbar)
  	.attr("class", "background axis");
    // x Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+(hbar-marginbar.bottom)+")")
	.attr("class", "axis")
	.call(xbAxis);
    // x axis title
    bargraph.append("text")
	.attr("class", "axisTitle")
	.attr("x", wbar/2)
	.attr("y", hbar-10)
	.text("Estimated "+inputs.yLabel);
    // y Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.bottom+")")
	.attr("class", "axis")
	.call(ybAxis);

    // Bargraph
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.top+")")
	.selectAll(".bar")
   	.data(inputs.series)
	.enter()
	.append("rect")
	.attr("class", "bar")
	.attr("y", serie => yb(serie.name))
	.attr("height", yb.bandwidth)
	.attr("x", serie => 0)
	.attr("width", serie => xb(serie.result.estimate))
	.attr("fill", "#4ECDC4")
	.on("mouseover", function (serie) {
	    // Specify where to put label of text
	    bargraph.append("text")
		.attr("class", "axisTitle")
		.attr("id", "tt")
		.attr("x", wbar-200)
		.attr("y", marginbar.top-10)
		.text("Value: "+d3.format(".4s")(serie.result.estimate));
	})
        .on("mouseout", function (serie) {
	    // Select text by id and then remove
	    d3.selectAll("#tt").transition().duration("50").remove();
	});

};

// [histrogram (data, barwidth, min, max)] computes histogram
// values as follows:
// - a value [v] of [data] contributes to the bar between [u] and
// [u+barwidth] if u <= v < u+barwidth
// - the [i]th bar is between [min+i*barwidth] and [min+(i+1)*barwidth]
// - [max] is used only to determine the number of bars. It MUST be greater
// than [d3.max(data)]
function histogram(data, barwidth, min, max) {
    const nbar = Math.floor((max-min)/barwidth)+1;
    let hist = new Array(nbar);
    for (let i=0; i<nbar; i++) {
	hist[i]=0;
    }

    data.forEach(function(v) {
	const ind = Math.floor((v-min)/barwidth);
	hist[ind] ++;
    });

    let n = data.length;
    for (let i=0; i<nbar; i++) {
	hist[i] = hist[i];
    }

    return hist;
}

// [plot_histogram(container, data, bandwidth, xscale, yscale)]
// draws the histogram computes with
// [histogram(data, barwidth, d3.min(data), d3.max(data)]
// in the html element [container].
//
// Axis are already defined on [container], using [xscale] and [yscale].
//
// In addition, this function returns the update function
// that redraw the bar if called with a new barwidth.
function plot_histogram(container, data, barwidth, xscale, yscale) {
    const min = d3.min(data),
	  max = d3.max(data);
    const hist = histogram(data, barwidth, min, max);
    const sample_nb = data.length;

    const print_value = function (v) {
	container.append("text")
	    .attr("class", "axisTitle")
	    .attr("id", "tt2")
	    .attr("x", wsvg-170)
	    .attr("y", 20)
	    .text("Value: "+d3.format("d")(v)+" / "+d3.format("d")(sample_nb));};

    const rects = container
	  .selectAll(".bar")
   	  .data(hist)
	  .enter();

    rects.append("rect")
	.attr("class", "bar")
	.attr("x", (v, i) => xscale(i*barwidth+min))
	.attr("width", (v, i) => xscale(barwidth)-xscale(0))
	.attr("y", (v, i) => yscale(v))
	.attr("height", (v, i) => innerH-yscale(v))
	.on("mouseover", print_value)
        .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());

    function update_hist(nbarwidth) {
	//compute new histograph values
	const nhist = histogram(data, nbarwidth, min, max);

	const rects = container
	      .selectAll(".bar")
   	      .data(nhist);

	rects.exit().remove();

	rects.enter().append("rect").attr("class", "bar")
	    .merge(rects)
	    .attr("x", (v, i) => xscale(i*nbarwidth+min))
	    .attr("width", (v, i) => xscale(nbarwidth)-xscale(0))
	    .attr("y", (v, i) => yscale(v))
	    .attr("height", (v, i) => innerH-yscale(v))
	    .on("mouseover", print_value)
            .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());
    }
    return update_hist;
};

// [kernelDensityEstimation(data, bandwith] returns the function x -> kde(x)
//    for [data]. The kernel function used is a gaussian.
function kernelDensityEstimation(X, bandwidth) {
    //gaussian constante
    const a = 1/(2*bandwidth*bandwidth);
    const b = bandwidth * SQRT_2PI;
    const gaussianKernel =
	  function (x) {
	      return Math.exp(-a * x * x) / b;
	  };

    return function (x) {
        let i = 0;
        let sum = 0;
        for (i = 0; i < X.length; i++) {
	    sum += gaussianKernel(x - X[i])/X.length;
        }
	return sum ;
    };
}

// [plot_kde(container, data, bandwidth, xscale, yscale, x)] draws
// the kde function computes with [kde(data, bandwidth)]
// for the abscisse values defined by [x], in the html element
// [container].
//
// Axis are already defined on [container], using [xscale] and
// [yscale].
//
// In addition, this function returns the update function that
// redraw the curve if called with a new bandwidth.
function plot_kde(container, data, bandwidth, xscale, yscale, x) {
    const n = x.length;
    const kde = kernelDensityEstimation(data, bandwidth);
    const density = new Array(n);

    for (let i=0; i<n;i++){
	let tmp = x[i] ;
	density[i] = [tmp, kde(tmp)];
    }

    const graph = container
	  .append('g')
	  .append("path")
	  .attr("class", "mypath")
	  .datum(density)
	  .attr("fill", "#4ECDC4")
	  .attr("opacity", ".8")
	  .attr("stroke", "#292F36")
	  .attr("stroke-width", 1)
	  .attr("stroke-linejoin", "round")
	  .attr("d",
		d3.line()
		.curve(d3.curveBasis)
		.x(d => xscale(d[0]))
		.y(d => yscale(d[1])));

    function update_kde(nbandwidth) {
	let kde = kernelDensityEstimation(data, nbandwidth);

	for (let i=0; i<n;i++){
	    density[i][1] = kde(density[i][0]);
	}

	graph.datum(density)
	    .transition()
	    .duration(50)
	    .attr("d",
		  d3.line()
		  .curve(d3.curveBasis)
		  .x(d => xscale(d[0]))
		  .y(d => yscale(d[1])));
    };

    return update_kde;
};

};


var contents = null;
contents = {"xLabel":"run","yLabel":"monotonic-clock","series":[{"name":"find/art","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":340,"time":2031916792},"dataset":[{"x":1,"y":41879},{"x":2,"y":60223},{"x":3,"y":77216},{"x":4,"y":104778},{"x":5,"y":124104},{"x":6,"y":148961},{"x":7,"y":175862},{"x":8,"y":197793},{"x":9,"y":221217},{"x":10,"y":253578},{"x":11,"y":273426},{"x":12,"y":296168},{"x":13,"y":325744},{"x":14,"y":349379},{"x":15,"y":372924},{"x":16,"y":397780},{"x":17,"y":420944},{"x":18,"y":448506},{"x":19,"y":469966},{"x":20,"y":496116},{"x":21,"y":520833},{"x":22,"y":542434},{"x":23,"y":563934},{"x":24,"y":587718},{"x":25,"y":610973},{"x":26,"y":639396},{"x":27,"y":665856},{"x":28,"y":687066},{"x":29,"y":707815},{"x":30,"y":737381},{"x":31,"y":763320},{"x":32,"y":780001},{"x":33,"y":814016},{"x":34,"y":832370},{"x":35,"y":859452},{"x":36,"y":880541},{"x":37,"y":904295},{"x":38,"y":928481},{"x":39,"y":953278},{"x":40,"y":978215},{"x":41,"y":1001329},{"x":42,"y":1031074},{"x":43,"y":1049670},{"x":44,"y":1075068},{"x":45,"y":1097460},{"x":46,"y":1124631},{"x":47,"y":1149618},{"x":48,"y":1180406},{"x":49,"y":1207708},{"x":50,"y":1230150},{"x":51,"y":1244628},{"x":52,"y":1272500},{"x":53,"y":1299781},{"x":54,"y":1319799},{"x":55,"y":1346330},{"x":56,"y":1365836},{"x":57,"y":1396204},{"x":58,"y":1424798},{"x":59,"y":1440928},{"x":60,"y":1467458},{"x":61,"y":1495411},{"x":62,"y":1517773},{"x":63,"y":1547318},{"x":64,"y":1563920},{"x":65,"y":1607061},{"x":66,"y":1612361},{"x":67,"y":1633121},{"x":68,"y":1659250},{"x":69,"y":1696439},{"x":70,"y":1717970},{"x":71,"y":1737036},{"x":72,"y":1768676},{"x":73,"y":1778895},{"x":74,"y":1808721},{"x":75,"y":1839981},{"x":76,"y":1857553},{"x":77,"y":1884684},{"x":78,"y":1918038},{"x":79,"y":1942103},{"x":80,"y":1966439},{"x":81,"y":1989653},{"x":82,"y":2012295},{"x":83,"y":2038476},{"x":84,"y":2051469},{"x":85,"y":2083519},{"x":86,"y":2105211},{"x":87,"y":2135678},{"x":88,"y":2162538},{"x":89,"y":2183299},{"x":90,"y":2205210},{"x":91,"y":2219105},{"x":92,"y":2260043},{"x":93,"y":2272897},{"x":94,"y":2307502},{"x":95,"y":2340044},{"x":96,"y":2357677},{"x":97,"y":2377554},{"x":98,"y":2393554},{"x":99,"y":2421708},{"x":100,"y":2459860},{"x":101,"y":2481530},{"x":102,"y":2505024},{"x":103,"y":2525293},{"x":104,"y":2552535},{"x":105,"y":2563505},{"x":106,"y":2593692},{"x":107,"y":2612858},{"x":108,"y":2637825},{"x":109,"y":2679003},{"x":110,"y":2690605},{"x":111,"y":2714209},{"x":112,"y":2731892},{"x":113,"y":2760818},{"x":114,"y":2787538},{"x":115,"y":2819639},{"x":116,"y":2842090},{"x":117,"y":2887256},{"x":118,"y":2899478},{"x":119,"y":2935376},{"x":120,"y":2942109},{"x":121,"y":2970002},{"x":122,"y":2986654},{"x":123,"y":3033552},{"x":124,"y":3043831},{"x":125,"y":3050363},{"x":126,"y":3090990},{"x":127,"y":3117550},{"x":128,"y":3174648},{"x":129,"y":3177563},{"x":130,"y":3172143},{"x":131,"y":3224512},{"x":132,"y":3240402},{"x":133,"y":3264758},{"x":134,"y":3290787},{"x":135,"y":3451230},{"x":136,"y":3329060},{"x":137,"y":3359958},{"x":138,"y":3385084},{"x":139,"y":3404000},{"x":140,"y":3441210},{"x":141,"y":3461499},{"x":142,"y":3490243},{"x":143,"y":3497036},{"x":144,"y":3531541},{"x":145,"y":3545207},{"x":146,"y":3567118},{"x":147,"y":3601252},{"x":148,"y":3632822},{"x":149,"y":3642110},{"x":150,"y":3674430},{"x":151,"y":3699157},{"x":152,"y":3719376},{"x":153,"y":3753500},{"x":154,"y":3778587},{"x":155,"y":3791271},{"x":156,"y":3820807},{"x":157,"y":3841605},{"x":158,"y":3871593},{"x":159,"y":3897281},{"x":160,"y":3918822},{"x":161,"y":3942346},{"x":162,"y":3953437},{"x":163,"y":4002830},{"x":164,"y":4027917},{"x":165,"y":4039679},{"x":166,"y":4050049},{"x":167,"y":4091798},{"x":168,"y":4112016},{"x":169,"y":4136051},{"x":170,"y":4167721},{"x":171,"y":4178863},{"x":172,"y":4226342},{"x":173,"y":4243855},{"x":174,"y":4255276},{"x":175,"y":4284170},{"x":176,"y":4316592},{"x":177,"y":4352600},{"x":178,"y":4359643},{"x":179,"y":4389981},{"x":180,"y":4406061},{"x":181,"y":4434564},{"x":182,"y":4443190},{"x":183,"y":4619353},{"x":184,"y":4531797},{"x":185,"y":4556695},{"x":186,"y":4563377},{"x":187,"y":4601810},{"x":188,"y":4610265},{"x":189,"y":4629833},{"x":190,"y":4681671},{"x":191,"y":4682743},{"x":192,"y":4702690},{"x":193,"y":4725573},{"x":194,"y":4752614},{"x":195,"y":5111702},{"x":196,"y":4944245},{"x":197,"y":4781809},{"x":198,"y":4831213},{"x":199,"y":4832255},{"x":200,"y":4990363},{"x":202,"y":4935490},{"x":204,"y":5003407},{"x":206,"y":5033324},{"x":208,"y":5067909},{"x":210,"y":5133833},{"x":212,"y":5175923},{"x":214,"y":5205439},{"x":216,"y":5265692},{"x":218,"y":5323080},{"x":220,"y":5350592},{"x":222,"y":5410585},{"x":224,"y":5476499},{"x":226,"y":5501927},{"x":228,"y":5555208},{"x":230,"y":5586146},{"x":232,"y":5652682},{"x":234,"y":5719328},{"x":236,"y":5768831},{"x":238,"y":5780774},{"x":240,"y":5869060},{"x":242,"y":5898946},{"x":244,"y":5935896},{"x":246,"y":5982534},{"x":248,"y":6029252},{"x":250,"y":6186769},{"x":252,"y":6208570},{"x":254,"y":6217817},{"x":256,"y":6249287},{"x":258,"y":6283431},{"x":260,"y":6323628},{"x":262,"y":6665061},{"x":264,"y":6419268},{"x":266,"y":6490612},{"x":268,"y":6529295},{"x":270,"y":6582014},{"x":272,"y":6626539},{"x":274,"y":6668007},{"x":276,"y":6715517},{"x":278,"y":6760401},{"x":280,"y":6810686},{"x":282,"y":6846083},{"x":284,"y":6911706},{"x":286,"y":6952975},{"x":288,"y":7019911},{"x":290,"y":7086416},{"x":292,"y":7112174},{"x":294,"y":7156358},{"x":296,"y":7200090},{"x":298,"y":7246578},{"x":300,"y":7293677},{"x":303,"y":7393064},{"x":306,"y":7461413},{"x":309,"y":7526356},{"x":312,"y":7595957},{"x":315,"y":7658615},{"x":318,"y":7755337},{"x":321,"y":7800233},{"x":324,"y":7885073},{"x":327,"y":7940287},{"x":330,"y":8346694},{"x":333,"y":8027772},{"x":336,"y":8086503},{"x":339,"y":8164389},{"x":342,"y":8244370},{"x":345,"y":8388472},{"x":348,"y":8421805},{"x":351,"y":8469705},{"x":354,"y":8552952},{"x":357,"y":9276076},{"x":360,"y":8767207},{"x":363,"y":8775522},{"x":366,"y":8832790},{"x":369,"y":8899486},{"x":372,"y":9027918},{"x":375,"y":9056642},{"x":378,"y":9107118},{"x":381,"y":9181528},{"x":384,"y":9287437},{"x":387,"y":9353662},{"x":390,"y":9437460},{"x":393,"y":9507613},{"x":396,"y":9568308},{"x":399,"y":9686661},{"x":402,"y":9718000},{"x":406,"y":9807248},{"x":410,"y":9969734},{"x":414,"y":10069944},{"x":418,"y":10106693},{"x":422,"y":10203816},{"x":426,"y":10349671},{"x":430,"y":10431916},{"x":434,"y":10514272},{"x":438,"y":10615964},{"x":442,"y":10713538},{"x":446,"y":10810009},{"x":450,"y":10888878},{"x":454,"y":11022380},{"x":458,"y":11085279},{"x":462,"y":11212258},{"x":466,"y":11277111},{"x":470,"y":11364776},{"x":474,"y":11476306},{"x":478,"y":11578999},{"x":482,"y":11661416},{"x":486,"y":11754902},{"x":490,"y":11857074},{"x":494,"y":11987110},{"x":498,"y":12052123},{"x":502,"y":12158463},{"x":507,"y":12267789},{"x":512,"y":12397935},{"x":517,"y":12500118},{"x":522,"y":12615135},{"x":527,"y":12752554},{"x":532,"y":12853884},{"x":537,"y":12981115},{"x":542,"y":13098226},{"x":547,"y":13265521},{"x":552,"y":13364277},{"x":557,"y":13468915},{"x":562,"y":13599641},{"x":567,"y":13728714},{"x":572,"y":13876804},{"x":577,"y":13980399},{"x":582,"y":14063857},{"x":587,"y":14181379},{"x":592,"y":14324499},{"x":597,"y":14440196},{"x":602,"y":14551817},{"x":608,"y":14701730},{"x":614,"y":14808932},{"x":620,"y":14969385},{"x":626,"y":15129126},{"x":632,"y":15280482},{"x":638,"y":15412531},{"x":644,"y":15590747},{"x":650,"y":15706124},{"x":656,"y":15901363},{"x":662,"y":15984319},{"x":668,"y":16104416}],"kde":[25649,25498,25408,25408,25468,25748,25468,25518,25398,25428,25438,25378,25377,25468,25368,25468,25418,25428,29606,25508,25478,25508,25408,25418,25468,25388,25468,25458,25428,25618,25528,25438,25367,25358,25408,25398,25338,25347,25368,25328,25308,25328,25318,25368,25397,25398,25428,25318,25438,25328,25418,25378,25468,25458,25338,29185,25448,25438,25468,25308,25458,25498,25519,25408,25358,25347,25428,25378,25368,25328,25428,25398,25318,25328,25348,25377,25328,25408,25348,25308,25348,25488,25238,25228,25318,25368,25428,25418,25498,25308,25478,25408,26270,28534,25518,25438,25508,25468,25458,25509,25538,25398,25528,25418,25489,25368,25428,25448,25388,25358,25388,25438,25428,25408,25378,25438,25418,25528,25528,25498,25528,25538,25478,25548,25598,25428,25458,25588,25478,25408,31370,25528,25408,25528,25558,25568,25529,25558,25488,25408,25508,25518,25438,25498,28153,25879,25338,25358,25368,25358,30517,27351,31058,25418,25388,25408,25307,25327,25358,25358,25358,25378,25358,25368,25368,25418,29686,25698,25558,25559,25629,25458,25518,25468,25428,25468,25539,25548,25428,25568,25478,25478,25498,25478,25398,25508,25508,25518,25418,25538,25549,25448,25528,25478,25498,25558,25488,25448,25458,25549,25488,25508,25548,26250,28544,25488,25518,25508,25558,25558,25498,25568,25558,25498,25508,25578,25518,25488,25518,25468,25468,25478,25518,25498,25558,25488,25478,25558,25488,25408,25488,25488,25578,25588,25539,25488,25619,25598,25558,25528,25498,28584,25327,25378,25619,25458,25318,25308,25308,25288,25378,25338,25337,25428,25438,25398,25327,25348,25418,25328,25348,25298,25377,25287,25388,25318,25328,25318,25308,25308,25238,25258,25348,25257,25227,25308,25367,25478,29125,25418,25318,25308,25398,25448,25338,25438,25377,25328,25468,25468,25418,25288,25408,25318,25318,25458,25418,25348,25298,25378,25297,25307,25468,25428,25358,25287,25327,25348,25298,25288,25268,25368,25328,25398,25367,26069,28404,25348,25438,25398,25398,25528,25488,25398,25539,25418,25398,25518,25368,25488,25438,25448,25418,25438,25398,25318,25478,25558,25488,25428,25318,25378,25338,25337,25398,25328,25448,25509,25378,25388,25278,25378,25377,29335,25498,25458,25468,25478,25468,25518,25498,25468,25448,25468,25549,25528,25428,25468,25408,25438,25408,25438,25307,25408,25438,25448,25337,25307,25378,25298,25398,25398,25257,25347,25418,25348,25388,25288,25287,25327,28073,25378,25368,25418,25368,25408,25418,25438,25378,25408,25428,25397,25458,25478,25287,25357,25378,25338,25378,25348,25357,25338,25408,25398,25418,25388,25438,25378,25347,25347,25368,25558,25488,25518,25558,25539,25518,26179,27592,25608,25478,25489,25458,25468,25328,25318,25368,25297,25338,25408,25428,25288,25398,25418,25418,25378,25438,25368,25338,25338,25298,25388,25448,25448,25468,25528,25488,25458,25418,25398,25388,25468,25468,25428,25368,27923,25388,25408,25357,25297,25398,25368,25388,25347,25368,25428,25418,25378,25358,25418,25398,25378,25418,25428,25348,25388,25307,25307,25418,25408,25318,25248,25248,25348,25348,25347,25307,25308,25298,25368,25318,25348,26260,28254,25368,25398,25488,25448,25408,25377,25368,25408,25368,25318,25397,25368,25338,25328,25398,25397,25338,25378,25398,25408,25317,25398,25398,25378,25398,25448,25448,25368,25468,25458,25448,25418,25488,25479,25398,25438,29186,25598,25528,25578,25588,25468,25448,25539,25478,25498,25538,25588,25589,25558,25558,25448,25377,25368,25508,25448,25428,25438,25368,25478,25428,25488,25438,25418,25458,25448,25468,25388,25347,25388,25418,25348,25387,29145,25358,25378,25468,25839,25448,25368,25478,25368,25438,25388,25408,25358,25308,25318,25358,25428,25438,25348,25428,25398,25357,25257,25398,25418,25288,25358,25218,25298,25428,25378,25328,25358,25368,25358,25417,25308,26259,31269,25378,25428,25518,25468,25488,25398,25267,25328,25358,25378,25448,25368,25388,25428,25368,25398,25438,25378,25418,25358,25458,25338,25328,25357,25378,25358,25388,25358,25367,25318,25237,25358,25338,25348,25328,25308,28704,25438,25468,25408,25458,25428,25428,25398,25428,25488,25378,25398,25428,25388,25408,25408,25398,25298,25388,25438,25428,25468,25388,25397,25277,25368,25348,25318,25438,25327,25327,25267,25368,25338,25368,25278,25358,29385,25348,25388,25378,25318,25318,25308,25388,25308,25318,25297,25327,25328,25358,25308,25388,25398,25387,25358,25268,25338,25368,25338,25328,25337,25368,25358,25348,25298,25408,25377,25418,25298,25368,25428,25398,25408,26230,28534,25438,25428,25468,25397,25428,25488,25328,25488,25488,25408,25388,25288,25468,25468,25358,25347,25428,25388,25378,25378,25558,25538,25308,25649,25508,25448,25408,25388,25448,25288,25358,25398,25418,25458,25377,25408,29275,25528,25348,25488,25438,25408,25448,25377,25378,25388,25408,25398,25277,25287,25378,25328,25378,25388,25378,25418,25338,25358,25358,25258,25338,25378,25358,25367,25267,25328,25318,25288,25278,25338,25358,25357,25308,29105,25478,25317,25498,25478,25388,25478,25388,25428,25679,25348,25428,25377,25277,25348,25338,25348,25358,25418,25458,25368,25408,25398,25348,25368,25368,25378,25408,25338,25358,25318,25388,25297,25448,25488,25448,25458,26360,28444,25468,25468,25368,25368,25478,25378,25468,25478,25518,25479,25538,25478,25508,25528,25488,25488,25588,25598,25508,25538,25668,25588,25528,25488,25578,25418,25428,25518,25448,25538,25528,25458,25458,25438,25418,26130,28554,25498,25478,25508,25468,25518,25539,25528,25468,25508,25488,25538,25488,25528,25378,25468,25468,25428,25508,25488,25428,25498,25488,25448,25398,25488,25418,25538,25418,25458,25518,25468,25518,25418,25418,25448,25548,29445,25468,25458,25509,25438,25528,25428,25548,25528,25508,25488,25538,25347,25488,25448,25388,25347,25498,25508,25468,25468,25489,25488,25498,25388,25468,25508,25548,25488,25508,25498,25518,25458,25458,25388,25468,25318,29205,25478,25519,25519,25829,25478,25568,25608,25518,25558,25549,25498,25338,25458,25458,25438,25398,25408,25458,25528,25468,25458,25488,25438,25599,25518,25438,25418,25428,25408,25468,25468,25498,25538,25448,25358,25418,26230,28424,25468,25458,25468,25498,25458,25378,25348,25287,25377,25368,25378],"result":{"estimate":24274.6037961621,"r_square":0.9997867529426688}},{"name":"find/hashtbl","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":344,"time":2038766658},"dataset":[{"x":1,"y":51097},{"x":2,"y":58029},{"x":3,"y":72286},{"x":4,"y":92605},{"x":5,"y":114646},{"x":6,"y":137539},{"x":7,"y":160082},{"x":8,"y":182575},{"x":9,"y":205278},{"x":10,"y":228070},{"x":11,"y":253548},{"x":12,"y":273636},{"x":13,"y":295447},{"x":14,"y":318290},{"x":15,"y":340081},{"x":16,"y":364107},{"x":17,"y":387110},{"x":18,"y":412769},{"x":19,"y":479605},{"x":20,"y":441834},{"x":21,"y":453085},{"x":22,"y":477290},{"x":23,"y":497389},{"x":24,"y":515522},{"x":25,"y":539327},{"x":26,"y":561499},{"x":27,"y":585625},{"x":28,"y":600562},{"x":29,"y":628185},{"x":30,"y":646019},{"x":31,"y":672137},{"x":32,"y":691294},{"x":33,"y":714658},{"x":34,"y":734445},{"x":35,"y":761416},{"x":36,"y":773870},{"x":37,"y":798006},{"x":38,"y":818163},{"x":39,"y":837099},{"x":40,"y":864501},{"x":41,"y":884719},{"x":42,"y":909455},{"x":43,"y":929804},{"x":44,"y":943730},{"x":45,"y":971221},{"x":46,"y":992963},{"x":47,"y":1014634},{"x":48,"y":1037618},{"x":49,"y":1057725},{"x":50,"y":1072683},{"x":51,"y":1099163},{"x":52,"y":1120974},{"x":53,"y":1143126},{"x":54,"y":1285996},{"x":55,"y":1565913},{"x":56,"y":1301435},{"x":57,"y":1304571},{"x":58,"y":1328786},{"x":59,"y":1346209},{"x":60,"y":1369574},{"x":61,"y":1389361},{"x":62,"y":1415950},{"x":63,"y":1430047},{"x":64,"y":1460756},{"x":65,"y":1482335},{"x":66,"y":1507473},{"x":67,"y":1527792},{"x":68,"y":1554432},{"x":69,"y":1578377},{"x":70,"y":1628521},{"x":71,"y":1628933},{"x":72,"y":1649632},{"x":73,"y":1667495},{"x":74,"y":1694105},{"x":75,"y":1716408},{"x":76,"y":1740562},{"x":77,"y":1756994},{"x":78,"y":1785348},{"x":79,"y":1805496},{"x":80,"y":1830673},{"x":81,"y":1854057},{"x":82,"y":1877701},{"x":83,"y":1897900},{"x":84,"y":1923979},{"x":85,"y":1948324},{"x":86,"y":1967261},{"x":87,"y":1991236},{"x":88,"y":2015191},{"x":89,"y":2037023},{"x":90,"y":2061990},{"x":91,"y":2081185},{"x":92,"y":2097536},{"x":93,"y":2122714},{"x":94,"y":2144224},{"x":95,"y":2194820},{"x":96,"y":2195191},{"x":97,"y":2214046},{"x":98,"y":2248441},{"x":99,"y":2291633},{"x":100,"y":2319014},{"x":101,"y":2321077},{"x":102,"y":2349431},{"x":103,"y":2365813},{"x":104,"y":2388545},{"x":105,"y":2410086},{"x":106,"y":2439983},{"x":107,"y":2458978},{"x":108,"y":2475870},{"x":109,"y":2497621},{"x":110,"y":2526415},{"x":111,"y":2532807},{"x":112,"y":2555450},{"x":113,"y":2642525},{"x":114,"y":2611065},{"x":115,"y":2669345},{"x":116,"y":2660268},{"x":117,"y":2654437},{"x":118,"y":2671890},{"x":119,"y":2725721},{"x":120,"y":2723707},{"x":121,"y":2747402},{"x":122,"y":2766147},{"x":123,"y":2786025},{"x":124,"y":2842461},{"x":125,"y":2906963},{"x":126,"y":2890412},{"x":127,"y":2908506},{"x":128,"y":2920589},{"x":129,"y":2942039},{"x":130,"y":2973338},{"x":131,"y":2985211},{"x":132,"y":3036447},{"x":133,"y":3042679},{"x":134,"y":3056615},{"x":135,"y":3078888},{"x":136,"y":3137487},{"x":137,"y":3128982},{"x":138,"y":3159730},{"x":139,"y":3168126},{"x":140,"y":3297269},{"x":141,"y":3226486},{"x":142,"y":3245071},{"x":143,"y":3262914},{"x":144,"y":3280267},{"x":145,"y":3308430},{"x":146,"y":3327096},{"x":147,"y":3362903},{"x":148,"y":3431433},{"x":149,"y":3438706},{"x":150,"y":3447132},{"x":151,"y":3447172},{"x":152,"y":3464504},{"x":153,"y":3485875},{"x":154,"y":3506113},{"x":155,"y":3528916},{"x":156,"y":3555697},{"x":157,"y":3615910},{"x":158,"y":3600742},{"x":159,"y":3702233},{"x":160,"y":3652870},{"x":161,"y":3669872},{"x":162,"y":3688077},{"x":163,"y":3714075},{"x":164,"y":3734514},{"x":165,"y":3758549},{"x":166,"y":3828611},{"x":167,"y":3814455},{"x":168,"y":3857957},{"x":169,"y":3853779},{"x":170,"y":3872985},{"x":171,"y":3894155},{"x":172,"y":3917219},{"x":173,"y":3942116},{"x":174,"y":3964228},{"x":175,"y":4025393},{"x":176,"y":4022187},{"x":177,"y":4059567},{"x":178,"y":4067773},{"x":179,"y":4078613},{"x":180,"y":4104151},{"x":181,"y":4123027},{"x":182,"y":4144757},{"x":183,"y":4183129},{"x":184,"y":4235629},{"x":185,"y":4230580},{"x":186,"y":4250928},{"x":187,"y":4263461},{"x":188,"y":4286976},{"x":189,"y":4305140},{"x":190,"y":4331550},{"x":191,"y":4358241},{"x":192,"y":4380072},{"x":193,"y":4428132},{"x":194,"y":4422000},{"x":195,"y":4446838},{"x":196,"y":4461956},{"x":197,"y":4484318},{"x":198,"y":4512402},{"x":199,"y":4542498},{"x":200,"y":4588575},{"x":202,"y":4614905},{"x":204,"y":4645763},{"x":206,"y":4693332},{"x":208,"y":4734611},{"x":210,"y":4784484},{"x":212,"y":4835240},{"x":214,"y":4887118},{"x":216,"y":4987196},{"x":218,"y":4993629},{"x":220,"y":5021712},{"x":222,"y":5056607},{"x":224,"y":5106191},{"x":226,"y":5153832},{"x":228,"y":5218523},{"x":230,"y":5260102},{"x":232,"y":5288655},{"x":234,"y":5335032},{"x":236,"y":5373596},{"x":238,"y":5424992},{"x":240,"y":5477963},{"x":242,"y":5540911},{"x":244,"y":5606646},{"x":246,"y":5611795},{"x":248,"y":5649306},{"x":250,"y":5693129},{"x":252,"y":5747581},{"x":254,"y":5807915},{"x":256,"y":5839053},{"x":258,"y":5920166},{"x":260,"y":5925667},{"x":262,"y":5968658},{"x":264,"y":6022490},{"x":266,"y":6075369},{"x":268,"y":6130763},{"x":270,"y":6194043},{"x":272,"y":6199915},{"x":274,"y":6242835},{"x":276,"y":6290124},{"x":278,"y":6512473},{"x":280,"y":6416253},{"x":282,"y":6489620},{"x":284,"y":6498698},{"x":286,"y":6538172},{"x":288,"y":6619275},{"x":290,"y":6637529},{"x":292,"y":6680281},{"x":294,"y":6755673},{"x":296,"y":6779448},{"x":298,"y":6811126},{"x":300,"y":6865319},{"x":303,"y":6930112},{"x":306,"y":7075075},{"x":309,"y":7046311},{"x":312,"y":7133536},{"x":315,"y":7237291},{"x":318,"y":7283758},{"x":321,"y":7338151},{"x":324,"y":7444261},{"x":327,"y":7473606},{"x":330,"y":7579225},{"x":333,"y":7617719},{"x":336,"y":7680898},{"x":339,"y":7798970},{"x":342,"y":7857611},{"x":345,"y":7899049},{"x":348,"y":7959974},{"x":351,"y":8443226},{"x":354,"y":8115578},{"x":357,"y":8179418},{"x":360,"y":8207010},{"x":363,"y":8267043},{"x":366,"y":8372753},{"x":369,"y":8436663},{"x":372,"y":8477870},{"x":375,"y":8545608},{"x":378,"y":8609308},{"x":381,"y":8740536},{"x":384,"y":8748361},{"x":387,"y":8815949},{"x":390,"y":8882364},{"x":393,"y":8985107},{"x":396,"y":9050461},{"x":399,"y":9095516},{"x":402,"y":9220983},{"x":406,"y":9266068},{"x":410,"y":9415029},{"x":414,"y":9440166},{"x":418,"y":9541848},{"x":422,"y":9626387},{"x":426,"y":9758226},{"x":430,"y":9807750},{"x":434,"y":9912056},{"x":438,"y":10126100},{"x":442,"y":10141038},{"x":446,"y":10184941},{"x":450,"y":10252288},{"x":454,"y":10345454},{"x":458,"y":10461041},{"x":462,"y":10553306},{"x":466,"y":10626303},{"x":470,"y":10744005},{"x":474,"y":10808587},{"x":478,"y":10935446},{"x":482,"y":11019585},{"x":486,"y":11135825},{"x":490,"y":11196209},{"x":494,"y":11283973},{"x":498,"y":11365658},{"x":502,"y":11468361},{"x":507,"y":11574261},{"x":512,"y":11691983},{"x":517,"y":11831848},{"x":522,"y":11919712},{"x":527,"y":12033497},{"x":532,"y":12153063},{"x":537,"y":12233374},{"x":542,"y":12345496},{"x":547,"y":12452227},{"x":552,"y":12580309},{"x":557,"y":12692440},{"x":562,"y":12799512},{"x":567,"y":12926943},{"x":572,"y":13036008},{"x":577,"y":13145625},{"x":582,"y":13266263},{"x":587,"y":13370349},{"x":592,"y":12849778},{"x":597,"y":12616988},{"x":602,"y":12751131},{"x":608,"y":12959524},{"x":614,"y":13048512},{"x":620,"y":13146176},{"x":626,"y":13247568},{"x":632,"y":13389876},{"x":638,"y":13588350},{"x":644,"y":13727182},{"x":650,"y":13863369},{"x":656,"y":14754390},{"x":662,"y":14101157},{"x":668,"y":14361168},{"x":674,"y":14363242},{"x":680,"y":14449114},{"x":686,"y":15319155},{"x":692,"y":15470401}],"kde":[40858,30127,24807,23645,23495,23474,23434,23465,23434,23454,23424,23404,23444,23454,23405,23514,23404,23444,23484,23435,23424,23465,23484,23454,23435,23444,23515,23434,23424,23445,23444,23445,23454,23424,23424,23454,25839,24025,27331,23344,23324,23514,23434,23294,23434,23424,23434,23314,23344,23324,23324,23384,23304,23294,23304,23324,23344,23384,23294,23324,23314,23294,23334,23384,23364,23364,23304,23314,23314,23314,23314,23394,23344,23354,23364,23394,23384,23374,24006,29406,23334,23334,23314,23344,23344,23344,23354,23294,23283,23344,23344,23314,23354,23304,23314,23354,23354,23344,23364,23334,23334,23354,23374,23344,23314,23304,23324,23344,23374,23334,23344,23344,23314,23354,23364,23354,23334,23294,23304,27061,23384,23394,23484,23395,23495,23505,23525,23505,23444,23384,23424,23354,23494,23474,23384,23464,23454,23424,23455,23354,23434,23334,23334,23354,23354,23375,23374,23374,23364,23394,23374,23394,23354,23354,23354,23354,23374,23544,23375,26891,23364,23465,23455,23324,23444,23494,23404,23384,23394,23394,23364,23344,23334,23384,23374,23364,23385,23404,23395,23354,23344,23374,23404,23344,23364,23374,23354,23374,23394,23334,23364,23344,23314,23334,23364,23355,23354,23374,23324,23374,26540,23354,23394,23465,23314,23344,23344,23334,23344,23364,23324,23324,23384,23304,23344,23364,23354,23374,23314,23304,23404,23344,23334,23364,23364,23324,23314,23274,23324,23324,23344,23324,23334,23364,23344,23314,23354,23314,23364,23385,26360,23324,23334,23374,23474,23394,23364,23354,23354,23334,23344,23354,23374,23324,23284,23344,23344,23324,23304,23344,23344,23365,23304,23344,23314,23314,23354,23324,23324,23344,23344,23304,23293,23324,23324,23364,23304,23344,23364,23354,23283,26260,23364,23354,23524,23705,23425,23394,23444,23404,23364,23344,23524,23514,23394,23514,23424,23405,23344,23364,23374,23395,23304,23334,23384,23354,23344,23364,23354,23324,23364,23364,23384,23364,23364,23324,23384,23354,23364,23354,23314,27021,23354,23303,23424,23364,23294,23354,23324,23324,23374,23314,23304,23324,23274,23354,23324,23344,23374,23294,23324,23334,23334,23294,23344,23314,23374,23314,23334,23364,23324,24366,34004,32371,34645,33764,36278,26751,23505,31490,23374,23444,23454,23364,23404,23735,33423,33443,32752,31980,31229,32060,32781,26240,23354,23334,23364,23394,23314,23414,23384,23344,23324,23334,23374,23384,23304,23354,23364,23344,23354,23344,23354,23374,23374,23314,27672,23364,23414,23324,23294,23354,23364,30508,28634,34715,27652,23354,26830,33262,31790,31199,23344,23354,23394,23344,23324,23364,23314,23324,23364,23364,23314,23334,23334,23314,23344,23314,23324,23344,23314,23324,23364,23374,24256,28113,23344,23395,23374,23354,23364,23384,23364,23354,23435,23384,23375,23414,23405,23364,23405,23374,23425,23364,23364,23414,23364,23384,23384,23414,23374,23414,23344,23414,23525,23395,23444,23395,23324,23445,23324,23354,23404,23555,23434,27572,23324,23324,23344,23324,23314,23364,23364,23354,23334,23324,23324,23424,23414,23334,23404,23354,23354,23335,23344,23344,23354,23354,23384,23314,23344,23364,23384,23304,23384,23345,23334,23334,23354,23364,23314,23374,23334,23324,23304,24046,23435,23294,23575,23395,23494,23374,23434,23324,23324,23364,23344,23374,23334,23344,23334,23384,23284,23334,23304,23384,23354,23304,23324,23354,23364,23284,23364,23334,23384,23334,23334,23304,23364,23314,23354,23294,23364,23324,23274,23314,28584,23354,23364,23284,23354,23364,23314,23284,23294,23344,23374,23354,23334,23374,23334,23364,23334,23334,23384,23354,23384,23314,23374,23354,23294,23364,23354,23365,23364,23314,23334,23344,23334,23284,23344,23304,23334,23344,23475,23404,30668,23384,23364,23304,23344,23324,23374,23344,23354,23344,23394,23344,23354,23344,23354,23334,23334,23354,23374,23324,23354,23274,23354,23384,23374,23354,23354,23314,23344,23324,23364,23324,23324,23334,23394,23344,23334,23395,23354,23314,24125,26330,23334,23334,23385,23334,23384,23374,23394,23344,23344,23344,23334,23324,23364,23354,23364,23364,23344,23324,23324,23284,23354,23384,23314,23324,23424,23304,23334,23324,23334,23384,23324,23364,23314,23314,23354,23344,23354,23545,23374,26981,23324,23344,23464,23424,23304,23314,23304,23344,23354,23294,23344,23334,23314,23314,23334,23354,23344,23334,23294,23324,23314,23364,23304,23334,23354,23334,23314,23334,23294,23354,23253,23324,23344,23335,23384,23274,23334,23364,23354,24135,29956,23404,23324,23434,23544,23484,23504,23434,23354,23465,23395,23525,23384,23314,23414,23404,23314,23444,23655,23384,23354,23304,23284,23324,23334,23314,23294,23324,23314,23394,23324,23304,23324,23344,23334,23375,23364,23334,23334,23534,26761,23374,23314,23484,23585,23425,23284,23304,23324,23354,23354,23364,23394,23314,23374,23334,23354,23355,23314,23324,23334,23314,23334,23334,23374,23334,23324,23324,23354,23324,23314,23324,23364,23344,23314,23344,23314,23354,23294,23354,30177,23344,23314,23374,23334,23374,23334,23294,23304,23344,23334,23324,23354,23354,23354,23354,23304,23304,23324,23324,23334,23334,23344,23344,23324,23344,23344,23334,23314,23304,23334,23324,23314,23374,23314,23354,23364,23374,23324,23364,24075,26250,23344,23334,23294,23364,23374,23284,23314,23354,23354,23314,23324,23344,23344,23314,23344,23324,23354,23355,23314,23354,23364,23354,23344,23374,23334,23364,23334,23324,23384,23334,23313,23314,23364,23344,23344,23334,23334,23344,23314,26961,23344,23374,23304,23365,23465,23515,23334,23344,23334,23274,23404,23384,23354,23324,23335,23334,23314,23304,23394,23324,23304,23334,23334,23294,23364,23334,23374,23334,23324,23334,23324,23314,23344,23334,23334,23364,23354,23324,23364,24095,26159,23324,23424,23374,23455,23485,23404,23364,23444,23384,23384,23324,23364,23304,23324,23324,23314,23314,23334,23304,23364,23324,23304,23324,23304,23374,23354,23304,23324,23364,23354,23284,23334,23304,23324,23324,23344,23314,23354,23314,26891,23414,23564,23484,23394,23644,23394,23385,23374,23444,23404,23374,23374,23294,23354,23374,23304,23304,23354,23334,23334,23354,23324,23334,23284,23354,23354,23324,23324,23314,23314,23334,23324,23345,23334,23284,23344,23374,23314,23304],"result":{"estimate":22493.26105710396,"r_square":0.9977405940473186}}]}


if (contents == null)
    d3.json("outputs.json", render);
else
    render(contents);
}

  </script>

</body>
</html>
