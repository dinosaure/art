<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/d3-simple-slider"></script>
  <script src="https://unpkg.com/simple-statistics@7.0.2/dist/simple-statistics.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
  <link href="style.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <style>
    *{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body{
    width: 100%;
    height: 100%;
    font-family:Helvetica Neue,metric,sans-serif;
    text-rendering: optimizeLegibility;
}

.center{
    width: 500px;
    margin:auto
}

text{
    font-family: metric,sans-serif;
}

.ml {
    text-align: left
}

svg {
    overflow: hidden;
    margin: auto
}

.axis line, .axis path{
    stroke: #2E3532;
    stroke-width:1px;
}

.axisTitle, .axis text{
    fill: #2E3532;
    font-size:12px;
}

.background {
    fill: #FBFBFB;
    stroke: #2E3532;
}

.axisTitle, .chartTitle{
    text-anchor: middle
}


.ytitle {
    text-anchor: middle;
    transform: rotate(90deg)
}

.warningtext{
    text-anchor: center;
    fill: #F06449;
}

.regLine {
    stroke: #F06449;
    stroke-width:2px;
    opacity:0.7
}

.circle {
    fill: #4ECDC4;
    stroke: #292f36;
    stroke-width:0.3px
}

table {
    margin:auto;
    text-align:left;
    border-spacing: 15px 5px;
    border: 1px solid #2E3532
}

th {
    text-align: center;
    color:#F06449
}


tr {
    fill: #2E3532;
    font-size:10px
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: auto;
  background-color: #F06449;
  color: #FFFFFF;
  text-align: center;
  border-radius: 10px;
  padding: 0 5px 0 5px;
  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}
.bar {
    fill: #4ECDC4;
    stroke:#292f36;
}
.bar:hover {
    fill: #F06449;
    stroke:#292f36;
    stroke-width:1px;
}

.radio {
    margin: auto;
    width : 200px;
}

.wrapper {
    display: grid;
    margin: 50px 50px 50px 50px;
    gap: 10px 20px;
    grid-auto-rows: minmax(20px, auto);
    text-align: center;
    place-items: center;
}

.mainTitle, .summarizeTitle {
    height:30px;
    width: auto;
    border-radius: 2px;
    padding: 0 45px 0 45px;
    border-style: solid;
    border-width:1px;
    box-shadow: 2px 2px 1px rgba(0,0,0,0.1);
    color:  #2E3532;
    background: #FBFBFB;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.slidecontainer{
    width: 50%;
}

  </style>
</head>
<body>

  <script type="text/javascript">
    // structure of JSON
// { xLabel: string,
//   yLabel: string,
//   series: [ tests ] }
//
// tests := { name: string,
//            description: { start : int, sampling: float, stabilize: bool,
//                           quota: float, limit: int, instances: [string],
//                           samples: int, time : float}
//            dataset: [ point ],
//            kde : [ v: float ] (optional)
//            result: { estimate: float, r_square: float (optional) } }
//
// point := { x : double,
//            y : double }
//
// xLabel and yLabel are the same for any tests
window.onload = function () {

const wsvg = 600;
const hsvg = 400;
const wslider = 200;
const hslider = 50;
const margin = {left:50,right:50,top:20,bottom:50};
const dotSize = 1.5;
const innerW = wsvg-(margin.left+margin.right);
const innerH = hsvg-(margin.top+margin.bottom);

const marginbar = {left:150,right:150,top:50,bottom:50};
const wbar = 900;
const innerWbar = wbar-(marginbar.left+marginbar.right);

const SQRT_2PI = Math.sqrt(2 * Math.PI);

// Main function : place containers and call plot functions.
function render(inputs) {
    inputs.series.forEach(
	function(serie) {
	    serie.dataset.forEach(
		function(d) {
		    d.x = +d.x;
		    d.y = +d.y;
		});}
    );

    // First step : check if there is no kde/histogram data at all in
    // the benchmarks, in which case, we want to reduce our layout to
    // one column.
    let nonempty_kde = false;
    inputs.series.forEach(function (serie) {
	if ('kde' in serie) {
	    nonempty_kde = nonempty_kde || true;} });
    const nb_col = nonempty_kde ? 2 : 1;

    // ************************************************ //
    //              Layout of the page                  //
    // ************************************************ //
    // + a summarize bar graph on top
    // + one section for each benchmark which includes
    //     * 1 title
    //     * 1 linear regression graph and its title and information table
    //     * if kde data are available a histogram/kde graph with its control panel.
    //
    // If none of the benchmarks has kde data, the layout is the same
    // but with only one column (no hist/kde graphs).
    //
    //
    //              c1:        c2:
    //
    // r1:            *title*
    //           ___________________
    // r2:      |   summarize bar   |
    //          |___________________|
    //
    // r3:           *title-1*
    //
    // r4:        *title*   *radio*
    //           _______     _______
    // r5:      | lr-1  |   | kde-1 |
    //          |_______|   |_______|
    //
    // r6:      *infos-1*   *slider-1*
    // ..
    // r(4i+3):       *title-i*
    //
    // r(4i+4):  *title*     *radio*
    //           _______     _______
    // r(4i+5): | lr-i  |   | kde-i |
    //          |_______|   |_______|
    //
    // r(4i+6): *infos-i*   *slider-i*
    //
    // etc ..

      const main = d3.select("body")
	  .append("div")
	    .attr("class", "wrapper")
	    .style("grid-template-columns", (nonempty_kde ? "repeat(2,"+wsvg+"px)" : "900px"))
	    .attr("id", "main");

    // ************************************************ //
    //              Summarize bar graph                 //
    // ************************************************ //

    // Title
    main.append("div")
   	  .style("grid-row", "1")
      	.style("grid-column", "1 / "+(nb_col+1))
  	  .attr("class", "summarizeTitle")
  	.text("Benchmarks summary");

    // Bar graph
    let bar_container = main
	.append("div")
   	  .style("grid-row", "2")
      	  .style("grid-column", "1 / "+(nb_col+1))
	  .attr("id", "bar");
    plot_summarize_bar_graph(bar_container, inputs);


    // ************************************************ //
    //              Layout for lr/kde graphs            //
    // ************************************************ //

    // Benchmark titles
    const titles = main
	  .selectAll(".mainTitle")
	  .data(inputs.series)
	  .enter()
	  .append("div")
	    .attr("id", (data, i) => "title-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+3))
      	    .style("grid-column", "1 / "+(nb_col+1))
  	    .attr("class","mainTitle")
	  .append("text")
  	    .attr("x", wsvg)
  	    .attr("y", margin.top-10)
            .text((data, i) => "#"+data.name);

    // Linear regression graph titles
    const titles_lr = main
	  .selectAll("#title_lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("id",  "title_lr")
   	    .style("grid-row", (data,i) =>""+(4*i+4))
   	    .style("grid-column", "1")
	  .append("text")
  	    .attr("class","chartTitle")
  	    .text("Linear regression");

    // Containers for linear regression graphs
    const lr_graphs = main
	  .selectAll(".lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr")
	    .attr("id", (data, i) => "linearRegression-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+5))
   	  .style("grid-column", "1");

    // Containers for linear regression info tables
    const lr_info = main
	  .selectAll(".lr-info")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr-info")
	    .attr("id", (data, i) => "lr-info-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+6))
            .style("grid-column", "1");

    let radio_div, kde_graphs, kde_controler;
    if (nonempty_kde) {
	// Containers for radio buttons to choose between histogram/kde plots
	radio_div = main
	      .selectAll(".radio_div")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class",  "radio")
	      .attr("id", (d, i) => "radio_div"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+4))
   	      .style("grid-column", "2");

	// Containers for kde/hist graph
	kde_graphs = main
	      .selectAll(".kde")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde")
	      .attr("id", (data, i) => "histKde-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+5))
   	      .style("grid-column", "2");

	// Containers for kde/hist controlers
	kde_controler = main
	      .selectAll(".kde-controler")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde-controler")
	      .attr("id", (data, i) => "kde-controler-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+6))
              .style("grid-column", "2");
    }

    // ************************************************ //
    //          Linear regression graph                 //
    // ************************************************ //
    lr_graphs.each( function(serie, i) {
	//Curves for each input
	const xMin = 0;
	const xMax = d3.max(serie.dataset, d => d.x);
	const yMin = 0;
	const yMax = d3.max(serie.dataset, d => d.y);

	// Define x axis
	const xScale = d3.scaleLinear()
  	      .domain([xMin,xMax])
  	      .range([0,innerW])
  	      .nice();
	const xAxis = d3.axisBottom()
  	      .scale(xScale)
  	      .ticks(8, "s");
	// "s" = number format such as 1000 -> 1k

	// Define y axis
	const yScale = d3.scaleLinear()
  	      .domain([yMin,yMax])
  	      .range([innerH,0])
  	      .nice();
	const yAxis = d3.axisLeft()
  	      .scale(yScale)
  	      .ticks(8, "s");

	// Svg
  	const plot = d3.select(this)
	    .append("svg")
  	      .attr("width",wsvg)
  	      .attr("height",hsvg);
	// Color background
	plot.append("rect")
  	    .attr("x",margin.left)
  	    .attr("y",margin.top)
  	    .attr("width",innerW)
  	    .attr("height",innerH)
  	    .attr("class","background axis");
	// Plot axis
	plot.append("g")
  	    .attr("transform",
	 	  "translate("+margin.left+","
	 	  +(hsvg-margin.bottom)+")")
	    .attr("class", "axis")
  	    .call(xAxis);
	plot.append("g")
  	    .attr("transform",
	  	  "translate("+margin.left+","
		  +margin.top+")")
	    .attr("class", "axis")
  	    .call(yAxis);
	// Print axis titles
	plot.append("text")
	    .attr("class", "axisTitle")
	    .attr("x", wsvg/2)
	    .attr("y", hsvg-10)
	    .text(inputs.xLabel);
	plot.append("text")
	    .attr("class", "axisTitle ytitle")
	    .attr("transform-origin", 0, hsvg/2)
	    .attr("x", 0)
	    .attr("y", hsvg/2)
	    .text(inputs.yLabel);

	// Plot data
	plot.append("g")
	    .attr("transform",
		  "translate("+margin.left+","
		  +margin.top+")")
  	    .selectAll("circle")
  	    .data(serie.dataset)
  	    .enter()
  	    .append("circle")
	    .attr("class", "circle")
  	    .attr("r", dotSize)
  	    .attr("cx", d => xScale(d.x))
  	    .attr("cy", d => yScale(d.y));

	// Plot linear regression line

	const xVals = serie.dataset.map((e,j) => e.x);
	const yVals = serie.dataset.map((e,j) => e.y);
	const pairs = [];
	xVals.forEach((d,i) => pairs.push([xVals[i],yVals[i]]));
	const linReg = ss.linearRegression(pairs);
	const linRegLine = ss.linearRegressionLine(linReg);
	let line = plot
	    .append("line")
    	      .attr("transform","translate("+margin.left+","+margin.top+")")
    	      .attr("class","regLine")
    	      .attr("x1",xScale(xMin))
    	      .attr("x2",xScale(xMin))
    	      .attr("y1",yScale(linRegLine(xMin)))
    	      .attr("y2",yScale(linRegLine(xMin)));
	line.transition().duration(1000).delay(2000)
    	      .attr("x2",xScale(xMax))
    	      .attr("y2",yScale(linRegLine(xMax)));

	// Add text boxes
	//const meanX = ss.mean(xVals).toFixed(0);
	//const meanY = ss.mean(yVals).toFixed(2);
	//const varX = ss.sampleVariance(xVals).toFixed(0);
	//const varY = ss.sampleVariance(yVals).toFixed(1);
	//const corCoeff = ss.sampleCorrelation(xVals,yVals).toFixed(3);

	const lr_results = [
	    ["Linear regression line", "y = "+linReg.b.toFixed(2)+" + "+linReg.m.toFixed(3)+"x"],
	    ["Coefficient", serie.result.estimate],
	    ["R²", serie.result.r_square]
	];

	const sampling_to_string = sampling =>
              (Number.isInteger(sampling) ?  "`Linear "+sampling+"" : "`Geometric "+sampling+"");

	const format = v  => d3.format("s")(v);

	const param_benchmarks = [
	    ["LR sampling (sampling)", sampling_to_string(serie.description.sampling)],
	    ["Start (start)", serie.description.start],
	    ["Benchmark runtime (time / quota)",
	     format(serie.description.time) + " / " + format(serie.description.quota)],
	    ["Number of runs (samples)", serie.description.samples + " / " + serie.description.limit],
	    ["Stabilized GC (stabilize)", serie.description.stabilize]
	];

	const table = d3.select("#lr-info-"+i)
	      .append("table");

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Linear regression results");

	table.append("tbody")
	    .selectAll("tr")
	    .data(lr_results)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("class", "tooltip")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Benchmarks parameters")
	    .append("span")
	    .attr("class","tooltiptext")
	    .text("See [Benchmarks.stats]");

	table.append("tbody")
	    .selectAll("tr")
	    .data(param_benchmarks)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

    });

    // ************************************************ //
    //         Histogram and kde graphs                 //
    // ************************************************ //
    if (nonempty_kde) {
        kde_graphs.each(function (serie, i) {

	    // Svg for histogram and kde graphs
	    let pdfgraph = d3.select(this)
		.append("svg")
		.attr("id", "pdfgraph")
		.attr("width", wsvg)
		.attr("height", hsvg)
		.append("g")
		.attr("transform", "translate("+margin.left+","+margin.top+")");

	    // If there is no kde field in the data [serie], some note
	    // is written in the svg window.
	    if (!('kde' in serie)) {
		pdfgraph.append("text")
		    .attr("x", (margin.left+margin.right+wsvg)/2)
		    .attr("y", (margin.top+margin.bottom+hsvg)/2)
		    .attr("class", "warning")
		    .text("No available data");
	    } else if (d3.max(serie.kde) == d3.min(serie.kde)) {
		pdfgraph.append("text")
		    .attr("x", wsvg/2)
		    .attr("y", hsvg/2)
		    .attr("class", "warningtext")
		    .text("All data have same value.");
	    } else {
		const data = serie.kde;
		//Some default values
		const min_slider = (d3.max(data)-d3.min(data))/data.length;
		const max_slider = (d3.max(data)-d3.min(data))/30;
		let vslider = min_slider;

		//Radio buttons
		const form = d3.select("#radio_div"+i)
		      .append("form");

		form.append("input")
		    .attr("type", "radio")
		    .attr("name", "graph")
		    .attr("value", "hist"+i)
		    .attr("name", "graph")
		    .attr("checked", "checked")
		    .on("change", () => plot_chosen_graph(d3.select(this), "hist"));
		form.append("label")
		    .attr("for", "hist"+i)
		    .text("Histogram");
		form.append("input")
		    .attr("type", "radio")
		    .attr("value", "kde"+i)
		    .attr("name", "graph")
		    .on("change", () => plot_chosen_graph(d3.select(this), "kde"));
		form.append("label")
		    .attr("for", "kde"+i)
		    .text("KDE");

		//axis
		const min = d3.min(data),
		      max = d3.max(data);
		const minX = d3.max([0, min-max_slider]),
		      maxX = max+max_slider;

		//X axis is the same for both graphs (histogram and kde)
		const xscale = d3.scaleLinear()
		      .range([0, innerW])
		      .domain([minX, maxX])
		      .nice();
		const xAxis = d3.axisBottom()
		      .scale(xscale)
		      .ticks(8, "s");

		//Y axis has a different domain value between both graphs.
		//So yscale.domain() is defined individually for each plot.
		const yscale = d3.scaleLinear()
		      .range([0, innerH])
		      .nice();
		const yAxis = d3.axisLeft()
		      .scale(yscale)
		      .ticks(8, "s");

		//x value for kde graph
		const n = 1000;
		const x = Array(n);
		const xmin = d3.min(xscale.domain()),
		      xmax = d3.max(xscale.domain());
		for (let i=0; i<n; i++) { x[i] = xmin + i*(xmax-xmin)/n; }

		//Compute kde function for min bandwidth value to determine to determine
		//the max value of Y axis. Only happens one time when loading the webpage.
		const kde = kernelDensityEstimation(data, min_slider);
		const v = new Array(n);
		for (let i=0; i<n;i++){ v[i] = kde(x[i]);}
		const maxYkde = d3.max(v),
		      maxYhist = d3.max(histogram(data, max_slider, min, max));

		//background
		pdfgraph
		    .append("rect")
  		    .attr("x", 0)
  		    .attr("y", 0)
  		    .attr("width", innerW)
  		    .attr("height", innerH)
  		    .attr("class","background axis");

		// x Axis
		const gxAxis = pdfgraph
	              .append("g")
	              .attr("transform","translate(0"+","+innerH+")")
	              .attr("class", "axis")
	              .call(xAxis);

		// y Axis
		const gyAxis = pdfgraph
	              .append("g")
	              .attr("class", "axis")
	              .call(yAxis);

		// X Axis title
		pdfgraph.append("text")
		    .attr("class", "axisTitle")
		    .attr("x", innerW/2)
		    .attr("y", innerH+40)
		    .text("Estimated "+inputs.yLabel);

		plot_chosen_graph(d3.select(this), "hist");

		function plot_chosen_graph(container, choice) {


		    container.selectAll(".bar").remove();
		    container.select(".mypath").remove();
		    container.select(".ytitle").remove();

		    // Erasing control panels if it exists and initializing it
		    const control_container = d3.select("#kde-controler-"+i);
		    const slider = control_container.select("#slider-"+i);
		    const slidertitle = control_container.select("#slidertitle-"+i);
		    if (!slider.empty())  {
			slider.remove();
		    }
		    if (!slidertitle.empty())  {
			slidertitle.remove();
		    }

		    //Hist part
		    if (choice=="hist") {
			// Defined yAxis
			yscale.domain([maxYhist, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", 10)
			    .attr("y", innerH/2)
			    .text("Count");

			const barwidth = vslider;

			const update_hist =
			      plot_histogram(pdfgraph, data, barwidth, xscale, yscale);

			//slider
			control_container
			    .insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Barwidth");

			control_container
			    .insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) => {
				      if (value > 0) {
					  vslider=value;
					  update_hist(vslider);}}));
		    } else {
			//Defined yAxis
			yscale.domain([maxYkde, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", +10)
			    .attr("y", innerH/2)
			    .text("Density");

			const bandwidth = vslider;
			const update_kde = plot_kde(pdfgraph, data, bandwidth, xscale, yscale, x);

			//slider
			control_container.insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Bandwidth");

			control_container.insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) =>
				      {if (value > 0) { vslider=value; update_kde(vslider);}}));
		    }; // end else
		}; // end function
	    }; //end else (available kde data)
	}); //end function // end each
    }; //end if



function plot_summarize_bar_graph(container, inputs) {

    const hbar = d3.min([60*inputs.series.length, hsvg]);
    const innerHbar = hbar - marginbar.top - marginbar.bottom;

    const xb = d3.scaleLinear()
	  .range([0, innerWbar])
	  .domain([0, d3.max(inputs.series, serie => serie.result.estimate)])
	  .nice();
    const yb = d3.scaleBand()
	  .range([0, innerHbar])
	  .padding(0.2)
	  .domain(inputs.series.map(serie => serie.name));
    const xbAxis = d3.axisBottom()
	  .scale(xb)
	  .ticks(8, "s");
    const ybAxis = d3.axisLeft()
	  .scale(yb);

    const bargraph =
	container.append("svg")
	.attr("width", wbar)
	.attr("height", hbar);

    // background
    bargraph.append("rect")
  	.attr("x", marginbar.left)
  	.attr("y", marginbar.top)
  	.attr("width", innerWbar)
  	.attr("height", innerHbar)
  	.attr("class", "background axis");
    // x Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+(hbar-marginbar.bottom)+")")
	.attr("class", "axis")
	.call(xbAxis);
    // x axis title
    bargraph.append("text")
	.attr("class", "axisTitle")
	.attr("x", wbar/2)
	.attr("y", hbar-10)
	.text("Estimated "+inputs.yLabel);
    // y Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.bottom+")")
	.attr("class", "axis")
	.call(ybAxis);

    // Bargraph
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.top+")")
	.selectAll(".bar")
   	.data(inputs.series)
	.enter()
	.append("rect")
	.attr("class", "bar")
	.attr("y", serie => yb(serie.name))
	.attr("height", yb.bandwidth)
	.attr("x", serie => 0)
	.attr("width", serie => xb(serie.result.estimate))
	.attr("fill", "#4ECDC4")
	.on("mouseover", function (serie) {
	    // Specify where to put label of text
	    bargraph.append("text")
		.attr("class", "axisTitle")
		.attr("id", "tt")
		.attr("x", wbar-200)
		.attr("y", marginbar.top-10)
		.text("Value: "+d3.format(".4s")(serie.result.estimate));
	})
        .on("mouseout", function (serie) {
	    // Select text by id and then remove
	    d3.selectAll("#tt").transition().duration("50").remove();
	});

};

// [histrogram (data, barwidth, min, max)] computes histogram
// values as follows:
// - a value [v] of [data] contributes to the bar between [u] and
// [u+barwidth] if u <= v < u+barwidth
// - the [i]th bar is between [min+i*barwidth] and [min+(i+1)*barwidth]
// - [max] is used only to determine the number of bars. It MUST be greater
// than [d3.max(data)]
function histogram(data, barwidth, min, max) {
    const nbar = Math.floor((max-min)/barwidth)+1;
    let hist = new Array(nbar);
    for (let i=0; i<nbar; i++) {
	hist[i]=0;
    }

    data.forEach(function(v) {
	const ind = Math.floor((v-min)/barwidth);
	hist[ind] ++;
    });

    let n = data.length;
    for (let i=0; i<nbar; i++) {
	hist[i] = hist[i];
    }

    return hist;
}

// [plot_histogram(container, data, bandwidth, xscale, yscale)]
// draws the histogram computes with
// [histogram(data, barwidth, d3.min(data), d3.max(data)]
// in the html element [container].
//
// Axis are already defined on [container], using [xscale] and [yscale].
//
// In addition, this function returns the update function
// that redraw the bar if called with a new barwidth.
function plot_histogram(container, data, barwidth, xscale, yscale) {
    const min = d3.min(data),
	  max = d3.max(data);
    const hist = histogram(data, barwidth, min, max);
    const sample_nb = data.length;

    const print_value = function (v) {
	container.append("text")
	    .attr("class", "axisTitle")
	    .attr("id", "tt2")
	    .attr("x", wsvg-170)
	    .attr("y", 20)
	    .text("Value: "+d3.format("d")(v)+" / "+d3.format("d")(sample_nb));};

    const rects = container
	  .selectAll(".bar")
   	  .data(hist)
	  .enter();

    rects.append("rect")
	.attr("class", "bar")
	.attr("x", (v, i) => xscale(i*barwidth+min))
	.attr("width", (v, i) => xscale(barwidth)-xscale(0))
	.attr("y", (v, i) => yscale(v))
	.attr("height", (v, i) => innerH-yscale(v))
	.on("mouseover", print_value)
        .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());

    function update_hist(nbarwidth) {
	//compute new histograph values
	const nhist = histogram(data, nbarwidth, min, max);

	const rects = container
	      .selectAll(".bar")
   	      .data(nhist);

	rects.exit().remove();

	rects.enter().append("rect").attr("class", "bar")
	    .merge(rects)
	    .attr("x", (v, i) => xscale(i*nbarwidth+min))
	    .attr("width", (v, i) => xscale(nbarwidth)-xscale(0))
	    .attr("y", (v, i) => yscale(v))
	    .attr("height", (v, i) => innerH-yscale(v))
	    .on("mouseover", print_value)
            .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());
    }
    return update_hist;
};

// [kernelDensityEstimation(data, bandwith] returns the function x -> kde(x)
//    for [data]. The kernel function used is a gaussian.
function kernelDensityEstimation(X, bandwidth) {
    //gaussian constante
    const a = 1/(2*bandwidth*bandwidth);
    const b = bandwidth * SQRT_2PI;
    const gaussianKernel =
	  function (x) {
	      return Math.exp(-a * x * x) / b;
	  };

    return function (x) {
        let i = 0;
        let sum = 0;
        for (i = 0; i < X.length; i++) {
	    sum += gaussianKernel(x - X[i])/X.length;
        }
	return sum ;
    };
}

// [plot_kde(container, data, bandwidth, xscale, yscale, x)] draws
// the kde function computes with [kde(data, bandwidth)]
// for the abscisse values defined by [x], in the html element
// [container].
//
// Axis are already defined on [container], using [xscale] and
// [yscale].
//
// In addition, this function returns the update function that
// redraw the curve if called with a new bandwidth.
function plot_kde(container, data, bandwidth, xscale, yscale, x) {
    const n = x.length;
    const kde = kernelDensityEstimation(data, bandwidth);
    const density = new Array(n);

    for (let i=0; i<n;i++){
	let tmp = x[i] ;
	density[i] = [tmp, kde(tmp)];
    }

    const graph = container
	  .append('g')
	  .append("path")
	  .attr("class", "mypath")
	  .datum(density)
	  .attr("fill", "#4ECDC4")
	  .attr("opacity", ".8")
	  .attr("stroke", "#292F36")
	  .attr("stroke-width", 1)
	  .attr("stroke-linejoin", "round")
	  .attr("d",
		d3.line()
		.curve(d3.curveBasis)
		.x(d => xscale(d[0]))
		.y(d => yscale(d[1])));

    function update_kde(nbandwidth) {
	let kde = kernelDensityEstimation(data, nbandwidth);

	for (let i=0; i<n;i++){
	    density[i][1] = kde(density[i][0]);
	}

	graph.datum(density)
	    .transition()
	    .duration(50)
	    .attr("d",
		  d3.line()
		  .curve(d3.curveBasis)
		  .x(d => xscale(d[0]))
		  .y(d => yscale(d[1])));
    };

    return update_kde;
};

};


var contents = null;
contents = {"xLabel":"run","yLabel":"monotonic-clock","series":[{"name":"insert/art","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":206,"time":2110977688},"dataset":[{"x":1,"y":98916},{"x":2,"y":185012},{"x":3,"y":274512},{"x":4,"y":370800},{"x":5,"y":538776},{"x":6,"y":694668},{"x":7,"y":817792},{"x":8,"y":901004},{"x":9,"y":983248},{"x":10,"y":969636},{"x":11,"y":1194248},{"x":12,"y":1156540},{"x":13,"y":1268416},{"x":14,"y":1286624},{"x":15,"y":1441540},{"x":16,"y":1982716},{"x":17,"y":1697184},{"x":18,"y":1649204},{"x":19,"y":1834240},{"x":20,"y":1816624},{"x":21,"y":2055508},{"x":22,"y":2609040},{"x":23,"y":2307792},{"x":24,"y":2275380},{"x":25,"y":2367912},{"x":26,"y":3063904},{"x":27,"y":2519736},{"x":28,"y":2652728},{"x":29,"y":2713012},{"x":30,"y":3296116},{"x":31,"y":3027140},{"x":32,"y":3128040},{"x":33,"y":3068544},{"x":34,"y":3713208},{"x":35,"y":3350080},{"x":36,"y":3338712},{"x":37,"y":3996904},{"x":38,"y":3623840},{"x":39,"y":3762864},{"x":40,"y":4300964},{"x":41,"y":4147896},{"x":42,"y":4542280},{"x":43,"y":4101912},{"x":44,"y":3969616},{"x":45,"y":4453376},{"x":46,"y":4242684},{"x":47,"y":4748240},{"x":48,"y":4487920},{"x":49,"y":4962160},{"x":50,"y":4695608},{"x":51,"y":4731248},{"x":52,"y":5214348},{"x":53,"y":4838156},{"x":54,"y":5418672},{"x":55,"y":5259684},{"x":56,"y":5942100},{"x":57,"y":5414520},{"x":58,"y":5907640},{"x":59,"y":5787392},{"x":60,"y":5576596},{"x":61,"y":6129432},{"x":62,"y":5709676},{"x":63,"y":6006992},{"x":64,"y":6092956},{"x":65,"y":6501964},{"x":66,"y":6485188},{"x":67,"y":6485084},{"x":68,"y":6806696},{"x":69,"y":6562156},{"x":70,"y":6989716},{"x":71,"y":7053124},{"x":72,"y":6598004},{"x":73,"y":7060364},{"x":74,"y":7310100},{"x":75,"y":6893888},{"x":76,"y":7605660},{"x":77,"y":7662044},{"x":78,"y":7861176},{"x":79,"y":7507732},{"x":80,"y":8056564},{"x":81,"y":8131960},{"x":82,"y":7426228},{"x":83,"y":8325940},{"x":84,"y":9053396},{"x":85,"y":8205332},{"x":86,"y":8617284},{"x":87,"y":8213376},{"x":88,"y":8619176},{"x":89,"y":8634936},{"x":90,"y":8681176},{"x":91,"y":8752616},{"x":92,"y":8536804},{"x":93,"y":9055632},{"x":94,"y":9174976},{"x":95,"y":9453588},{"x":96,"y":9591008},{"x":97,"y":9377584},{"x":98,"y":9495560},{"x":99,"y":9369552},{"x":100,"y":9779184},{"x":101,"y":9506564},{"x":102,"y":9830776},{"x":103,"y":10177664},{"x":104,"y":9849532},{"x":105,"y":10045536},{"x":106,"y":10364732},{"x":107,"y":10274152},{"x":108,"y":10694760},{"x":109,"y":10488420},{"x":110,"y":10911788},{"x":111,"y":10947188},{"x":112,"y":10794760},{"x":113,"y":11027784},{"x":114,"y":10843368},{"x":115,"y":11194792},{"x":116,"y":11560204},{"x":117,"y":11618088},{"x":118,"y":11677644},{"x":119,"y":11361632},{"x":120,"y":11476500},{"x":121,"y":11781736},{"x":122,"y":11985112},{"x":123,"y":11873692},{"x":124,"y":12084088},{"x":125,"y":11833680},{"x":126,"y":12372224},{"x":127,"y":12340020},{"x":128,"y":12575912},{"x":129,"y":12565344},{"x":130,"y":12504912},{"x":131,"y":12826896},{"x":132,"y":12928692},{"x":133,"y":13027208},{"x":134,"y":12842852},{"x":135,"y":12754972},{"x":136,"y":12275048},{"x":137,"y":12411680},{"x":138,"y":13287512},{"x":139,"y":12958144},{"x":140,"y":12984920},{"x":141,"y":12597848},{"x":142,"y":12812748},{"x":143,"y":13242208},{"x":144,"y":13143616},{"x":145,"y":13473776},{"x":146,"y":13615232},{"x":147,"y":13853664},{"x":148,"y":13260492},{"x":149,"y":13868300},{"x":150,"y":14354608},{"x":151,"y":14402044},{"x":152,"y":14382004},{"x":153,"y":14501096},{"x":154,"y":14662228},{"x":155,"y":14499212},{"x":156,"y":14649640},{"x":157,"y":14628432},{"x":158,"y":14599120},{"x":159,"y":15017420},{"x":160,"y":15053488},{"x":161,"y":14720192},{"x":162,"y":14862996},{"x":163,"y":15154836},{"x":164,"y":14938412},{"x":165,"y":15435956},{"x":166,"y":15629188},{"x":167,"y":15271648},{"x":168,"y":15472728},{"x":169,"y":15602472},{"x":170,"y":15587484},{"x":171,"y":15580164},{"x":172,"y":16076116},{"x":173,"y":15739828},{"x":174,"y":16078836},{"x":175,"y":16039960},{"x":176,"y":16082456},{"x":177,"y":16921716},{"x":178,"y":16714476},{"x":179,"y":16750172},{"x":180,"y":16356008},{"x":181,"y":16658484},{"x":182,"y":16500980},{"x":183,"y":16860080},{"x":184,"y":16925764},{"x":185,"y":17201900},{"x":186,"y":16616004},{"x":187,"y":16849364},{"x":188,"y":17556856},{"x":189,"y":17132116},{"x":190,"y":17842240},{"x":191,"y":17197484},{"x":192,"y":17607520},{"x":193,"y":17867924},{"x":194,"y":18006104},{"x":195,"y":17571604},{"x":196,"y":18198476},{"x":197,"y":18147796},{"x":198,"y":18688752},{"x":199,"y":17868668},{"x":200,"y":18604792},{"x":202,"y":18369396},{"x":204,"y":19133064},{"x":206,"y":18710116},{"x":208,"y":18993944},{"x":210,"y":18864084},{"x":212,"y":19269688}],"kde":[88828,87364,87448,87532,114628,90912,90876,104236,87220,87396,87448,87752,87152,87108,87260,100564,88444,87192,103040,87204,87432,87096,87136,87712,87776,87340,99168,90008,87060,87244,87304,87884,87916,87496,86908,87304,86944,87512,87692,122040,86896,86992,107024,90512,90084,104532,86968,113708,91220,101568,104364,92764,105180,107772,90428,90852,103412,107052,90632,90408,90560,92292,90060,100768,98552,93708,105068,87516,87104,87660,86984,87216,86944,87248,87624,88280,87312,87036,86972,86876,87000,87260,87528,86716,86740,87240,87272,106276,91088,90300,99308,91020,105816,106612,90848,90664,90584,90748,105364,86788,86940,87124,87188,87628,88488,86708,86720,87056,87448,87060,87028,87096,86908,87672,87416,87104,95944,87872,89652,87376,96592,94612,98992,87852,96780,88016,89608,87468,87096,87152,87784,87208,86992,87404,116560,91316,90276,90392,90612,90600,90656,91556,103796,92688,87392,87224,88396,87524,86672,87396,86948,87308,87228,87476,87116,86960,86896,87208,86904,86708,87324,87408,86796,86656,86784,86664,87272,86960,87200,86776,86952,87116,86912,86832,87080,86600,86688,95900,87764,93024,88084,87648,87812,95744,87924,89400,87248,87536,87400,88188,89680,90576,87200,87112,87680,87544,87320,86892,87096,87392,87588,86852,87184,87488,88000,87228,87428,87652,87100,87804,87260,87744,87184,87348,108004,90524,90960,106448,86776,104176,90428,90508,90860,90404,114392,94028,108980,103572,86932,87616,87120,87148,88804,87808,87200,87092,89200,87520,89956,87600,87220,87216,115276,99572,91224,115576,87556,87844,87496,87484,121268,90628,90988,104812,87540,87020,87444,87380,86908,87580,87048,91680,87576,87308,87028,91372,91864,122744,92708,91136,104156,87472,87308,87696,87208,88400,87924,86692,87104,87244,86916,87408,87164,86928,87480,87524,86952,91840,95112,87232,89240,87152,86860,87064,86940,87492,87740,88232,86812,87868,87208,87320,87032,86632,86880,87472,87252,87692,87232,87516,87676,87072,112184,90536,90600,104616,87504,87212,96900,97288,90400,87592,87592,87736,92104,87848,87832,87364,87368,87100,87352,87404,87792,88016,87352,87372,87648,87952,87868,87408,87728,86840,86888,135708,94356,123656,90720,104812,87008,87176,87340,87408,87424,87360,87076,122440,106556,90784,90644,104148,87744,88676,87696,87280,87620,87712,87676,87496,86792,87412,97344,94684,112880,90972,90576,106320,88196,87328,114788,99504,94052,91492,93932,96356,91208,91032,104904,105208,90452,90508,90032,90380,95596,111544,87636,89916,87392,113932,91356,90504,90504,104408,87436,87128,88712,95600,87252,93836,87504,87672,105852,90148,90464,90584,90608,103844,87028,87488,86904,87248,86944,86732,87092,87252,87380,87476,87464,86816,87460,87480,87700,87744,86768,87184,86768,87032,105664,90504,99024,95320,111928,115028,93544,90976,105004,87796,115316,98796,87432,86844,113720,92252,106124,108216,87432,87440,87256,115088,91308,90704,90640,90908,105096,87104,87296,87108,87384,87720,87336,87948,86852,87052,87148,87616,87192,87108,87108,87388,87420,86816,87336,87560,87192,87240,114348,109068,93864,107976,91008,90560,107536,87216,96008,110932,93932,91392,104472,87384,87428,87520,87392,87076,87040,104900,109224,91448,90536,90408,104004,87196,87236,106516,90224,89940,105252,96584,87976,89236,87540,106376,90392,90472,106036,87252,95768,87724,122832,91172,91008,104956,87404,87444,87000,89140,87172,108904,101632,90920,90964,90364,90236,103024,87084,107396,90620,90864,104272,87080,87700,87068,87016,86952,87284,87544,106972,90460,90304,104628,87212,87640,87572,87372,87112,86984,86952,86864,87540,87288,87284,114748,91028,90932,105392,87448,87928,87712,89144,87356,86704,86808,87024,88820,95760,87296,89240,87364,87632,87044,87072,87148,87160,86836,87036,87496,87492,87560,87552,88088,105084,90600,90484,106360,124136,133296,127904,131476,131544,127672,127024,127360,155648,131756,144688,164464,136612,145440,128096,128376,105384,89228,87028,86704,87144,87060,87512,86880,87296,87568,87360,87136,86940,86888,87568,87172,87520,87244,86872,87344,87632,88072,87520,87244,87112,87196,87024,87160,87120,86588,93188,96992,123944,100336,90688,105848,87268,86972,87088,86636,86700,87828,87520,87412,108284,90376,105508,104648,87360,87416,88040,122524,91980,90604,90696,90856,90528,106304,87484,87376,87236,87244,105468,90776,90548,106868,86804,86488,86876,86908,86820,87072,104496,96600,96872,116336,107928,106512,86960,86812,87324,87476,87244,87324,87456,87504,87544,89144,87176,87312,87424,87280,87320,87080,87140,87304,87400,87596,87424,98680,88096,96976,87560,89632,87628,87108,86896,87532,109964,90452,92792,103500,87568,87852,87468,87056,87468,87084,121480,98048,93676,124668,92620,90620,109676,87376,87160,87856,87176,87204,88948,107600,90436,90852,104396,105876,90668,90056,105960,87572,87440,87124,87348,86912,87552,87244,104744,93924,90668,90980,103992,87872,86796,87196,87056,87080,87352,87476,86728,86952,87192,112376,91108,90524,106776,86860,86988,87592,87244,87536,87320,87096,87312,88584,87092,87332,87044,87240,87500,87340,87672,87276,87488,87608,86904,87528,86880,87360,86992,86968,87540,87392,86944,87940,87784,87312,86784,87120,86856,87404,87328,86496,87476,87364,97816,87916,119448,91712,93300,105760,88144,86672,87256,87232,86772,87156,88064,87188,87688,87952,87992,87536,87308,86988,112472,108624,94248,106460,105808,87256,88036,107544,104464,91100,90612,103172,87008,87936,87672,87196,87120,106816,90728,90688,103596,87044,87096,87432,87232,110880,90872,90860,105132,87368,87048,86832,86940,133940,89220,87628,87192,87544,86820,87292,87408,94708,87184,86976,87460,87480,95452,87388,87328,87900,103088,87352,87128,86808,87544,87232,87688,87200,87032,87184,87444,87860,87452,87092,87256,87412,87384,87660,86944,114248,90992,91136,106000,87164,87052,87524,86996,88996,87092,86928,87360,86976,87424,94464,92984,89028,98736,88372,100336,87040,88928,87756,95840,87620,99148,87596,89624,88024,87304,87956,87204,87096,87476,87040,87060,87144,86932,105776,90420,90268,103876,86912,87408,111780,91196,90556,105868,86896,87344,86912,88432,87056,106516,87664,91224,87464,87684,87792,87436,87344,111788,90144,106844,87340,86800,87700,87224,87328,87168,87208,87284,87548,87644,86564,87228,87000,87000,87320,86688,87196,86888,87464,89204,89368,87672,87444,87456,112880],"result":{"estimate":93684.60817755171,"r_square":0.9955440694848765}},{"name":"insert/hashtbl","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":205,"time":2100370727},"dataset":[{"x":1,"y":105656},{"x":2,"y":191728},{"x":3,"y":283504},{"x":4,"y":377728},{"x":5,"y":471096},{"x":6,"y":564152},{"x":7,"y":658528},{"x":8,"y":773732},{"x":9,"y":841944},{"x":10,"y":937416},{"x":11,"y":1029580},{"x":12,"y":1173696},{"x":13,"y":1298684},{"x":14,"y":1322868},{"x":15,"y":1408456},{"x":16,"y":1567520},{"x":17,"y":1589512},{"x":18,"y":1785980},{"x":19,"y":1913324},{"x":20,"y":1878328},{"x":21,"y":1966120},{"x":22,"y":2197480},{"x":23,"y":2226568},{"x":24,"y":2342908},{"x":25,"y":2354992},{"x":26,"y":2493052},{"x":27,"y":2583300},{"x":28,"y":2628756},{"x":29,"y":2781932},{"x":30,"y":2906100},{"x":31,"y":2928884},{"x":32,"y":3091576},{"x":33,"y":3115392},{"x":34,"y":3329364},{"x":35,"y":3396108},{"x":36,"y":3404052},{"x":37,"y":3479416},{"x":38,"y":3628328},{"x":39,"y":3746784},{"x":40,"y":3777848},{"x":41,"y":3907584},{"x":42,"y":4113892},{"x":43,"y":4212540},{"x":44,"y":4229104},{"x":45,"y":4277108},{"x":46,"y":4357424},{"x":47,"y":4396568},{"x":48,"y":4595892},{"x":49,"y":4624688},{"x":50,"y":4950196},{"x":51,"y":5057844},{"x":52,"y":5120124},{"x":53,"y":5071564},{"x":54,"y":5112304},{"x":55,"y":5297304},{"x":56,"y":5284932},{"x":57,"y":5532360},{"x":58,"y":5779364},{"x":59,"y":5596108},{"x":60,"y":5685632},{"x":61,"y":5798800},{"x":62,"y":5953120},{"x":63,"y":5952572},{"x":64,"y":6310316},{"x":65,"y":6176060},{"x":66,"y":6289508},{"x":67,"y":6554800},{"x":68,"y":6579276},{"x":69,"y":6750712},{"x":70,"y":6814080},{"x":71,"y":6821760},{"x":72,"y":6864380},{"x":73,"y":6947832},{"x":74,"y":7094000},{"x":75,"y":7277260},{"x":76,"y":7453000},{"x":77,"y":7176252},{"x":78,"y":7242876},{"x":79,"y":7485864},{"x":80,"y":7732044},{"x":81,"y":7595304},{"x":82,"y":7570308},{"x":83,"y":7756872},{"x":84,"y":7667260},{"x":85,"y":7903228},{"x":86,"y":8144296},{"x":87,"y":8242960},{"x":88,"y":8340960},{"x":89,"y":8618324},{"x":90,"y":8495032},{"x":91,"y":8467000},{"x":92,"y":8720556},{"x":93,"y":8937556},{"x":94,"y":9167000},{"x":95,"y":9042956},{"x":96,"y":9059224},{"x":97,"y":9685800},{"x":98,"y":9197548},{"x":99,"y":9342752},{"x":100,"y":9489940},{"x":101,"y":9442840},{"x":102,"y":9692876},{"x":103,"y":9769760},{"x":104,"y":9964936},{"x":105,"y":10982964},{"x":106,"y":9914612},{"x":107,"y":9867836},{"x":108,"y":10142388},{"x":109,"y":10317216},{"x":110,"y":10374884},{"x":111,"y":10547636},{"x":112,"y":10493832},{"x":113,"y":10609180},{"x":114,"y":10657188},{"x":115,"y":10824360},{"x":116,"y":10580856},{"x":117,"y":10998248},{"x":118,"y":11515576},{"x":119,"y":11144564},{"x":120,"y":11352012},{"x":121,"y":11193284},{"x":122,"y":11712700},{"x":123,"y":11621908},{"x":124,"y":11914816},{"x":125,"y":11825048},{"x":126,"y":11799180},{"x":127,"y":11899856},{"x":128,"y":12066652},{"x":129,"y":12077956},{"x":130,"y":12424192},{"x":131,"y":12282400},{"x":132,"y":12323696},{"x":133,"y":12201928},{"x":134,"y":12867852},{"x":135,"y":12684828},{"x":136,"y":12853992},{"x":137,"y":12666164},{"x":138,"y":12883320},{"x":139,"y":13233404},{"x":140,"y":13466208},{"x":141,"y":13546916},{"x":142,"y":13426936},{"x":143,"y":13400892},{"x":144,"y":13546228},{"x":145,"y":13452412},{"x":146,"y":14014412},{"x":147,"y":14070260},{"x":148,"y":13791408},{"x":149,"y":13922028},{"x":150,"y":14163704},{"x":151,"y":14598768},{"x":152,"y":15272316},{"x":153,"y":14363020},{"x":154,"y":14638920},{"x":155,"y":14389584},{"x":156,"y":14717768},{"x":157,"y":14684252},{"x":158,"y":14667964},{"x":159,"y":14675664},{"x":160,"y":15158868},{"x":161,"y":15467880},{"x":162,"y":15288524},{"x":163,"y":15831064},{"x":164,"y":15711756},{"x":165,"y":15783388},{"x":166,"y":15931316},{"x":167,"y":16005472},{"x":168,"y":16117100},{"x":169,"y":16328916},{"x":170,"y":16328956},{"x":171,"y":16337240},{"x":172,"y":16629508},{"x":173,"y":16393404},{"x":174,"y":16470044},{"x":175,"y":16623228},{"x":176,"y":16397840},{"x":177,"y":16484600},{"x":178,"y":16931276},{"x":179,"y":17371140},{"x":180,"y":17235624},{"x":181,"y":17059744},{"x":182,"y":17038856},{"x":183,"y":17338360},{"x":184,"y":17523792},{"x":185,"y":17290004},{"x":186,"y":17616824},{"x":187,"y":17876636},{"x":188,"y":18638148},{"x":189,"y":17773688},{"x":190,"y":17822252},{"x":191,"y":18185852},{"x":192,"y":18061808},{"x":193,"y":18072668},{"x":194,"y":18355172},{"x":195,"y":18589372},{"x":196,"y":18985068},{"x":197,"y":18501232},{"x":198,"y":18691072},{"x":199,"y":19065612},{"x":200,"y":18688832},{"x":202,"y":18946856},{"x":204,"y":18862824},{"x":206,"y":19363924},{"x":208,"y":19550476},{"x":210,"y":19742076}],"kde":[93812,107500,94364,100756,90296,91596,89840,89852,89964,89936,89900,90104,96208,111264,93644,93544,107680,93460,93100,93336,109324,90212,90164,89872,90032,90220,89740,89912,89672,90156,89660,89828,90392,89676,89912,89688,89368,89780,89196,89552,97324,89492,94808,89932,96688,90012,91068,89952,90144,89672,89420,89828,89696,109732,93692,93296,106536,89584,90224,117696,93792,93192,108256,89708,90108,89436,90196,97172,93532,91496,90224,90056,90260,89608,108736,99692,122056,98156,111992,107744,90296,90072,89784,89636,89608,89592,89928,89740,90084,89752,89636,90248,89872,89936,89676,89728,89872,89908,89488,90208,89900,89472,116048,93420,93464,116200,114520,95612,93696,100560,94020,94612,93464,94160,92612,93216,93060,93768,93400,93672,93616,93592,93748,94604,93616,108908,90232,143856,93660,93260,105676,89944,89868,89516,90196,89648,89956,90448,90108,90340,90308,89760,101012,115772,94388,93376,118116,92348,93952,90536,90056,90004,158824,96884,93996,94068,93764,107976,90052,89824,90152,90704,90180,89904,89832,89708,89876,89528,90036,89808,89616,90004,89664,89712,90052,89988,89944,90000,89676,89772,89660,89420,89680,89440,89624,89692,116652,93652,105688,129740,93740,109492,89920,89896,89548,89636,90240,90260,89480,91520,89660,91536,89596,89628,89620,89736,89736,90280,89356,89540,89828,89540,89648,89532,89884,89608,89760,109392,93444,93080,107252,89796,107576,93236,93168,108532,101992,95688,125188,93732,95116,106672,89412,90208,89748,90056,89384,90060,89872,89792,89828,89576,89940,89460,90000,89592,89584,89888,139424,105044,97508,109252,89816,89776,89592,89592,89440,90180,90012,89512,89624,89608,89884,89764,89820,89964,89792,90180,90080,89260,89700,121984,93160,109532,89896,89488,89988,105800,91608,93848,89736,89648,89844,89724,90116,90076,89884,90320,90480,90160,89800,89768,89752,89832,89724,90132,90188,89788,110112,92744,93200,93484,93668,107268,90184,90228,90204,89868,90104,123172,93048,93272,107180,115880,93544,93568,107580,89584,89804,89988,89708,90128,90356,89528,90048,90548,89772,89360,90016,89712,89848,89756,90028,89748,89756,90124,89848,89812,89868,89588,98116,92300,100304,92184,89716,89984,90100,89964,89548,90156,89936,89820,89460,89840,89816,89956,124204,93784,95392,108596,90212,90312,89496,90380,89940,89728,89732,89940,90476,89964,89948,89572,89364,89612,89636,89836,89876,89944,89808,90396,90236,89456,89660,89876,89428,89808,89524,90196,89948,89880,89696,89700,90036,89956,90196,89880,89584,89624,89872,90116,114380,93432,93336,107940,89796,89684,89624,89608,89348,89640,89664,89900,90160,91232,89596,91620,90016,89396,90000,89756,89920,116444,93608,92888,108528,90028,89860,89864,102308,90248,91944,90056,89764,89928,90324,89808,89888,89848,89760,89968,89832,89720,89908,114080,93252,93756,109728,89704,99140,89960,96636,89780,96256,89984,97756,89556,96980,110788,92828,93356,93464,107632,89856,89756,89696,89572,89492,90004,89296,89680,89900,90188,89804,89624,89500,89248,89368,89332,89700,89136,89536,96224,92928,90764,148416,136236,107016,96852,110672,92820,93132,93172,93080,114540,93800,96776,90056,91616,89692,89708,120540,93580,93412,93408,113400,90164,89284,89536,133508,112492,93132,93280,108544,89832,89464,89560,90376,89972,89360,89664,89808,89520,89696,89464,107256,121256,101920,93256,113356,106860,89160,130552,108880,94036,93276,93212,109084,89860,89884,89732,121756,94364,93132,107076,89588,89728,140092,94980,93208,92900,105160,97156,93100,93672,93556,100868,107980,89536,89880,90208,89692,89656,89724,89556,89724,89552,89956,117508,93040,93668,106356,89436,89504,89624,89632,89652,89808,89428,88984,89504,89216,89160,108360,92408,113524,110544,116276,114560,102248,93024,109220,89376,89092,89300,89240,89408,89100,89128,89264,89032,89660,89748,89764,89764,89992,89680,89676,89680,90136,115780,93112,93292,107976,89816,89348,89876,89712,89500,97356,93504,91392,89632,117064,93608,95600,92836,105608,89412,89252,89944,89732,90108,89484,89900,107396,148176,97808,110468,93068,108304,89792,89212,89752,89872,90080,89512,89836,89896,89740,89928,90012,131148,94048,109488,89880,89952,90196,89800,90020,89368,89828,89648,89664,89868,89924,89688,89824,89656,90044,89992,92116,100140,98428,89888,89860,90060,89756,89760,89800,90072,89396,90212,90260,89988,90032,89356,89480,89904,89436,89856,89412,89628,89580,90000,115664,93176,93012,108404,89336,89732,90252,89616,89464,89412,89828,90068,89720,89360,89564,89564,89348,89836,89492,89440,89496,89852,89196,89532,89504,96696,95780,117552,93448,95352,108948,89792,89632,108020,93056,93068,93100,92608,127100,93296,92624,107880,113996,93812,93184,108488,89488,89276,89724,89592,89804,89832,90028,123696,94272,94960,106680,89712,89776,89088,89780,89536,89464,89536,96964,92024,95804,91752,89844,89784,89652,89508,89836,89600,89712,89760,89600,89944,89912,89716,89856,89820,90136,89852,89632,115512,93548,93636,108744,89692,90000,108096,141440,95148,106904,89920,89828,89804,89932,89852,90208,90056,89724,89744,89836,90008,90172,89884,89680,89844,89892,89764,89988,89624,89628,89760,130240,93528,93644,93392,93396,112288,94196,95764,93624,93096,93012,133800,93356,93484,107480,89840,89708,89632,89980,89720,89076,89664,89508,89620,90132,108040,96104,93292,110280,98556,90476,96464,91668,89724,90096,89660,90152,89916,90184,90012,90232,90140,89940,94072,90540,97448,90084,91184,89788,89888,89536,89892,89608,89904,113556,93472,93536,106660,90204,89588,89604,90220,89212,89792,90156,89628,89728,90008,90108,89488,89880,90020,89604,89568,91036,96024,92248,89672,89808,89596,93540,90112,89784,89824,89864,97588,90004,95732,90224,153612,98864,109396,90084,93468,93872,93600,100308,93388,93020,108268,90068,89784,90232,90264,89880,90004,90144,89952,108196,96744,93132,108368,89508,118536,92980,96632,93796,108296,89788,89780,89416,89564,89620,89448,89908,133060,96028,94100,106972,90356,90244,90220,89960,89896,90260,90080,89900,90124,122168,93828,103504,111452,90120,97772,90540,91632,90492,90032,89820,90380,90356,89976,90080,90028,89996,90144,89760,90216,89892,90560,90092,89856,89828,89552,122208,106008,98992,100940,109332,90224,90288,90024,90024,107716,112728,96728,93852,93472,124168,123580,93792,93796,108388,90268,90364,89984,90276,90532,90040,89980],"result":{"estimate":94800.26278890068,"r_square":0.9988143035059809}}]}


if (contents == null)
    d3.json("outputs.json", render);
else
    render(contents);
}

  </script>

</body>
</html>
