<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/d3-simple-slider"></script>
  <script src="https://unpkg.com/simple-statistics@7.0.2/dist/simple-statistics.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
  <link href="style.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <style>
    *{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body{
    width: 100%;
    height: 100%;
    font-family:Helvetica Neue,metric,sans-serif;
    text-rendering: optimizeLegibility;
}

.center{
    width: 500px;
    margin:auto
}

text{
    font-family: metric,sans-serif;
}

.ml {
    text-align: left
}

svg {
    overflow: hidden;
    margin: auto
}

.axis line, .axis path{
    stroke: #2E3532;
    stroke-width:1px;
}

.axisTitle, .axis text{
    fill: #2E3532;
    font-size:12px;
}

.background {
    fill: #FBFBFB;
    stroke: #2E3532;
}

.axisTitle, .chartTitle{
    text-anchor: middle
}


.ytitle {
    text-anchor: middle;
    transform: rotate(90deg)
}

.warningtext{
    text-anchor: center;
    fill: #F06449;
}

.regLine {
    stroke: #F06449;
    stroke-width:2px;
    opacity:0.7
}

.circle {
    fill: #4ECDC4;
    stroke: #292f36;
    stroke-width:0.3px
}

table {
    margin:auto;
    text-align:left;
    border-spacing: 15px 5px;
    border: 1px solid #2E3532
}

th {
    text-align: center;
    color:#F06449
}


tr {
    fill: #2E3532;
    font-size:10px
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: auto;
  background-color: #F06449;
  color: #FFFFFF;
  text-align: center;
  border-radius: 10px;
  padding: 0 5px 0 5px;
  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}
.bar {
    fill: #4ECDC4;
    stroke:#292f36;
}
.bar:hover {
    fill: #F06449;
    stroke:#292f36;
    stroke-width:1px;
}

.radio {
    margin: auto;
    width : 200px;
}

.wrapper {
    display: grid;
    margin: 50px 50px 50px 50px;
    gap: 10px 20px;
    grid-auto-rows: minmax(20px, auto);
    text-align: center;
    place-items: center;
}

.mainTitle, .summarizeTitle {
    height:30px;
    width: auto;
    border-radius: 2px;
    padding: 0 45px 0 45px;
    border-style: solid;
    border-width:1px;
    box-shadow: 2px 2px 1px rgba(0,0,0,0.1);
    color:  #2E3532;
    background: #FBFBFB;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.slidecontainer{
    width: 50%;
}

  </style>
</head>
<body>

  <script type="text/javascript">
    // structure of JSON
// { xLabel: string,
//   yLabel: string,
//   series: [ tests ] }
//
// tests := { name: string,
//            description: { start : int, sampling: float, stabilize: bool,
//                           quota: float, limit: int, instances: [string],
//                           samples: int, time : float}
//            dataset: [ point ],
//            kde : [ v: float ] (optional)
//            result: { estimate: float, r_square: float (optional) } }
//
// point := { x : double,
//            y : double }
//
// xLabel and yLabel are the same for any tests
window.onload = function () {

const wsvg = 600;
const hsvg = 400;
const wslider = 200;
const hslider = 50;
const margin = {left:50,right:50,top:20,bottom:50};
const dotSize = 1.5;
const innerW = wsvg-(margin.left+margin.right);
const innerH = hsvg-(margin.top+margin.bottom);

const marginbar = {left:150,right:150,top:50,bottom:50};
const wbar = 900;
const innerWbar = wbar-(marginbar.left+marginbar.right);

const SQRT_2PI = Math.sqrt(2 * Math.PI);

// Main function : place containers and call plot functions.
function render(inputs) {
    inputs.series.forEach(
	function(serie) {
	    serie.dataset.forEach(
		function(d) {
		    d.x = +d.x;
		    d.y = +d.y;
		});}
    );

    // First step : check if there is no kde/histogram data at all in
    // the benchmarks, in which case, we want to reduce our layout to
    // one column.
    let nonempty_kde = false;
    inputs.series.forEach(function (serie) {
	if ('kde' in serie) {
	    nonempty_kde = nonempty_kde || true;} });
    const nb_col = nonempty_kde ? 2 : 1;

    // ************************************************ //
    //              Layout of the page                  //
    // ************************************************ //
    // + a summarize bar graph on top
    // + one section for each benchmark which includes
    //     * 1 title
    //     * 1 linear regression graph and its title and information table
    //     * if kde data are available a histogram/kde graph with its control panel.
    //
    // If none of the benchmarks has kde data, the layout is the same
    // but with only one column (no hist/kde graphs).
    //
    //
    //              c1:        c2:
    //
    // r1:            *title*
    //           ___________________
    // r2:      |   summarize bar   |
    //          |___________________|
    //
    // r3:           *title-1*
    //
    // r4:        *title*   *radio*
    //           _______     _______
    // r5:      | lr-1  |   | kde-1 |
    //          |_______|   |_______|
    //
    // r6:      *infos-1*   *slider-1*
    // ..
    // r(4i+3):       *title-i*
    //
    // r(4i+4):  *title*     *radio*
    //           _______     _______
    // r(4i+5): | lr-i  |   | kde-i |
    //          |_______|   |_______|
    //
    // r(4i+6): *infos-i*   *slider-i*
    //
    // etc ..

      const main = d3.select("body")
	  .append("div")
	    .attr("class", "wrapper")
	    .style("grid-template-columns", (nonempty_kde ? "repeat(2,"+wsvg+"px)" : "900px"))
	    .attr("id", "main");

    // ************************************************ //
    //              Summarize bar graph                 //
    // ************************************************ //

    // Title
    main.append("div")
   	  .style("grid-row", "1")
      	.style("grid-column", "1 / "+(nb_col+1))
  	  .attr("class", "summarizeTitle")
  	.text("Benchmarks summary");

    // Bar graph
    let bar_container = main
	.append("div")
   	  .style("grid-row", "2")
      	  .style("grid-column", "1 / "+(nb_col+1))
	  .attr("id", "bar");
    plot_summarize_bar_graph(bar_container, inputs);


    // ************************************************ //
    //              Layout for lr/kde graphs            //
    // ************************************************ //

    // Benchmark titles
    const titles = main
	  .selectAll(".mainTitle")
	  .data(inputs.series)
	  .enter()
	  .append("div")
	    .attr("id", (data, i) => "title-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+3))
      	    .style("grid-column", "1 / "+(nb_col+1))
  	    .attr("class","mainTitle")
	  .append("text")
  	    .attr("x", wsvg)
  	    .attr("y", margin.top-10)
            .text((data, i) => "#"+data.name);

    // Linear regression graph titles
    const titles_lr = main
	  .selectAll("#title_lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("id",  "title_lr")
   	    .style("grid-row", (data,i) =>""+(4*i+4))
   	    .style("grid-column", "1")
	  .append("text")
  	    .attr("class","chartTitle")
  	    .text("Linear regression");

    // Containers for linear regression graphs
    const lr_graphs = main
	  .selectAll(".lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr")
	    .attr("id", (data, i) => "linearRegression-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+5))
   	  .style("grid-column", "1");

    // Containers for linear regression info tables
    const lr_info = main
	  .selectAll(".lr-info")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr-info")
	    .attr("id", (data, i) => "lr-info-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+6))
            .style("grid-column", "1");

    let radio_div, kde_graphs, kde_controler;
    if (nonempty_kde) {
	// Containers for radio buttons to choose between histogram/kde plots
	radio_div = main
	      .selectAll(".radio_div")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class",  "radio")
	      .attr("id", (d, i) => "radio_div"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+4))
   	      .style("grid-column", "2");

	// Containers for kde/hist graph
	kde_graphs = main
	      .selectAll(".kde")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde")
	      .attr("id", (data, i) => "histKde-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+5))
   	      .style("grid-column", "2");

	// Containers for kde/hist controlers
	kde_controler = main
	      .selectAll(".kde-controler")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde-controler")
	      .attr("id", (data, i) => "kde-controler-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+6))
              .style("grid-column", "2");
    }

    // ************************************************ //
    //          Linear regression graph                 //
    // ************************************************ //
    lr_graphs.each( function(serie, i) {
	//Curves for each input
	const xMin = 0;
	const xMax = d3.max(serie.dataset, d => d.x);
	const yMin = 0;
	const yMax = d3.max(serie.dataset, d => d.y);

	// Define x axis
	const xScale = d3.scaleLinear()
  	      .domain([xMin,xMax])
  	      .range([0,innerW])
  	      .nice();
	const xAxis = d3.axisBottom()
  	      .scale(xScale)
  	      .ticks(8, "s");
	// "s" = number format such as 1000 -> 1k

	// Define y axis
	const yScale = d3.scaleLinear()
  	      .domain([yMin,yMax])
  	      .range([innerH,0])
  	      .nice();
	const yAxis = d3.axisLeft()
  	      .scale(yScale)
  	      .ticks(8, "s");

	// Svg
  	const plot = d3.select(this)
	    .append("svg")
  	      .attr("width",wsvg)
  	      .attr("height",hsvg);
	// Color background
	plot.append("rect")
  	    .attr("x",margin.left)
  	    .attr("y",margin.top)
  	    .attr("width",innerW)
  	    .attr("height",innerH)
  	    .attr("class","background axis");
	// Plot axis
	plot.append("g")
  	    .attr("transform",
	 	  "translate("+margin.left+","
	 	  +(hsvg-margin.bottom)+")")
	    .attr("class", "axis")
  	    .call(xAxis);
	plot.append("g")
  	    .attr("transform",
	  	  "translate("+margin.left+","
		  +margin.top+")")
	    .attr("class", "axis")
  	    .call(yAxis);
	// Print axis titles
	plot.append("text")
	    .attr("class", "axisTitle")
	    .attr("x", wsvg/2)
	    .attr("y", hsvg-10)
	    .text(inputs.xLabel);
	plot.append("text")
	    .attr("class", "axisTitle ytitle")
	    .attr("transform-origin", 0, hsvg/2)
	    .attr("x", 0)
	    .attr("y", hsvg/2)
	    .text(inputs.yLabel);

	// Plot data
	plot.append("g")
	    .attr("transform",
		  "translate("+margin.left+","
		  +margin.top+")")
  	    .selectAll("circle")
  	    .data(serie.dataset)
  	    .enter()
  	    .append("circle")
	    .attr("class", "circle")
  	    .attr("r", dotSize)
  	    .attr("cx", d => xScale(d.x))
  	    .attr("cy", d => yScale(d.y));

	// Plot linear regression line

	const xVals = serie.dataset.map((e,j) => e.x);
	const yVals = serie.dataset.map((e,j) => e.y);
	const pairs = [];
	xVals.forEach((d,i) => pairs.push([xVals[i],yVals[i]]));
	const linReg = ss.linearRegression(pairs);
	const linRegLine = ss.linearRegressionLine(linReg);
	let line = plot
	    .append("line")
    	      .attr("transform","translate("+margin.left+","+margin.top+")")
    	      .attr("class","regLine")
    	      .attr("x1",xScale(xMin))
    	      .attr("x2",xScale(xMin))
    	      .attr("y1",yScale(linRegLine(xMin)))
    	      .attr("y2",yScale(linRegLine(xMin)));
	line.transition().duration(1000).delay(2000)
    	      .attr("x2",xScale(xMax))
    	      .attr("y2",yScale(linRegLine(xMax)));

	// Add text boxes
	//const meanX = ss.mean(xVals).toFixed(0);
	//const meanY = ss.mean(yVals).toFixed(2);
	//const varX = ss.sampleVariance(xVals).toFixed(0);
	//const varY = ss.sampleVariance(yVals).toFixed(1);
	//const corCoeff = ss.sampleCorrelation(xVals,yVals).toFixed(3);

	const lr_results = [
	    ["Linear regression line", "y = "+linReg.b.toFixed(2)+" + "+linReg.m.toFixed(3)+"x"],
	    ["Coefficient", serie.result.estimate],
	    ["R²", serie.result.r_square]
	];

	const sampling_to_string = sampling =>
              (Number.isInteger(sampling) ?  "`Linear "+sampling+"" : "`Geometric "+sampling+"");

	const format = v  => d3.format("s")(v);

	const param_benchmarks = [
	    ["LR sampling (sampling)", sampling_to_string(serie.description.sampling)],
	    ["Start (start)", serie.description.start],
	    ["Benchmark runtime (time / quota)",
	     format(serie.description.time) + " / " + format(serie.description.quota)],
	    ["Number of runs (samples)", serie.description.samples + " / " + serie.description.limit],
	    ["Stabilized GC (stabilize)", serie.description.stabilize]
	];

	const table = d3.select("#lr-info-"+i)
	      .append("table");

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Linear regression results");

	table.append("tbody")
	    .selectAll("tr")
	    .data(lr_results)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("class", "tooltip")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Benchmarks parameters")
	    .append("span")
	    .attr("class","tooltiptext")
	    .text("See [Benchmarks.stats]");

	table.append("tbody")
	    .selectAll("tr")
	    .data(param_benchmarks)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

    });

    // ************************************************ //
    //         Histogram and kde graphs                 //
    // ************************************************ //
    if (nonempty_kde) {
        kde_graphs.each(function (serie, i) {

	    // Svg for histogram and kde graphs
	    let pdfgraph = d3.select(this)
		.append("svg")
		.attr("id", "pdfgraph")
		.attr("width", wsvg)
		.attr("height", hsvg)
		.append("g")
		.attr("transform", "translate("+margin.left+","+margin.top+")");

	    // If there is no kde field in the data [serie], some note
	    // is written in the svg window.
	    if (!('kde' in serie)) {
		pdfgraph.append("text")
		    .attr("x", (margin.left+margin.right+wsvg)/2)
		    .attr("y", (margin.top+margin.bottom+hsvg)/2)
		    .attr("class", "warning")
		    .text("No available data");
	    } else if (d3.max(serie.kde) == d3.min(serie.kde)) {
		pdfgraph.append("text")
		    .attr("x", wsvg/2)
		    .attr("y", hsvg/2)
		    .attr("class", "warningtext")
		    .text("All data have same value.");
	    } else {
		const data = serie.kde;
		//Some default values
		const min_slider = (d3.max(data)-d3.min(data))/data.length;
		const max_slider = (d3.max(data)-d3.min(data))/30;
		let vslider = min_slider;

		//Radio buttons
		const form = d3.select("#radio_div"+i)
		      .append("form");

		form.append("input")
		    .attr("type", "radio")
		    .attr("name", "graph")
		    .attr("value", "hist"+i)
		    .attr("name", "graph")
		    .attr("checked", "checked")
		    .on("change", () => plot_chosen_graph(d3.select(this), "hist"));
		form.append("label")
		    .attr("for", "hist"+i)
		    .text("Histogram");
		form.append("input")
		    .attr("type", "radio")
		    .attr("value", "kde"+i)
		    .attr("name", "graph")
		    .on("change", () => plot_chosen_graph(d3.select(this), "kde"));
		form.append("label")
		    .attr("for", "kde"+i)
		    .text("KDE");

		//axis
		const min = d3.min(data),
		      max = d3.max(data);
		const minX = d3.max([0, min-max_slider]),
		      maxX = max+max_slider;

		//X axis is the same for both graphs (histogram and kde)
		const xscale = d3.scaleLinear()
		      .range([0, innerW])
		      .domain([minX, maxX])
		      .nice();
		const xAxis = d3.axisBottom()
		      .scale(xscale)
		      .ticks(8, "s");

		//Y axis has a different domain value between both graphs.
		//So yscale.domain() is defined individually for each plot.
		const yscale = d3.scaleLinear()
		      .range([0, innerH])
		      .nice();
		const yAxis = d3.axisLeft()
		      .scale(yscale)
		      .ticks(8, "s");

		//x value for kde graph
		const n = 1000;
		const x = Array(n);
		const xmin = d3.min(xscale.domain()),
		      xmax = d3.max(xscale.domain());
		for (let i=0; i<n; i++) { x[i] = xmin + i*(xmax-xmin)/n; }

		//Compute kde function for min bandwidth value to determine to determine
		//the max value of Y axis. Only happens one time when loading the webpage.
		const kde = kernelDensityEstimation(data, min_slider);
		const v = new Array(n);
		for (let i=0; i<n;i++){ v[i] = kde(x[i]);}
		const maxYkde = d3.max(v),
		      maxYhist = d3.max(histogram(data, max_slider, min, max));

		//background
		pdfgraph
		    .append("rect")
  		    .attr("x", 0)
  		    .attr("y", 0)
  		    .attr("width", innerW)
  		    .attr("height", innerH)
  		    .attr("class","background axis");

		// x Axis
		const gxAxis = pdfgraph
	              .append("g")
	              .attr("transform","translate(0"+","+innerH+")")
	              .attr("class", "axis")
	              .call(xAxis);

		// y Axis
		const gyAxis = pdfgraph
	              .append("g")
	              .attr("class", "axis")
	              .call(yAxis);

		// X Axis title
		pdfgraph.append("text")
		    .attr("class", "axisTitle")
		    .attr("x", innerW/2)
		    .attr("y", innerH+40)
		    .text("Estimated "+inputs.yLabel);

		plot_chosen_graph(d3.select(this), "hist");

		function plot_chosen_graph(container, choice) {


		    container.selectAll(".bar").remove();
		    container.select(".mypath").remove();
		    container.select(".ytitle").remove();

		    // Erasing control panels if it exists and initializing it
		    const control_container = d3.select("#kde-controler-"+i);
		    const slider = control_container.select("#slider-"+i);
		    const slidertitle = control_container.select("#slidertitle-"+i);
		    if (!slider.empty())  {
			slider.remove();
		    }
		    if (!slidertitle.empty())  {
			slidertitle.remove();
		    }

		    //Hist part
		    if (choice=="hist") {
			// Defined yAxis
			yscale.domain([maxYhist, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", 10)
			    .attr("y", innerH/2)
			    .text("Count");

			const barwidth = vslider;

			const update_hist =
			      plot_histogram(pdfgraph, data, barwidth, xscale, yscale);

			//slider
			control_container
			    .insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Barwidth");

			control_container
			    .insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) => {
				      if (value > 0) {
					  vslider=value;
					  update_hist(vslider);}}));
		    } else {
			//Defined yAxis
			yscale.domain([maxYkde, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", +10)
			    .attr("y", innerH/2)
			    .text("Density");

			const bandwidth = vslider;
			const update_kde = plot_kde(pdfgraph, data, bandwidth, xscale, yscale, x);

			//slider
			control_container.insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Bandwidth");

			control_container.insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) =>
				      {if (value > 0) { vslider=value; update_kde(vslider);}}));
		    }; // end else
		}; // end function
	    }; //end else (available kde data)
	}); //end function // end each
    }; //end if



function plot_summarize_bar_graph(container, inputs) {

    const hbar = d3.min([60*inputs.series.length, hsvg]);
    const innerHbar = hbar - marginbar.top - marginbar.bottom;

    const xb = d3.scaleLinear()
	  .range([0, innerWbar])
	  .domain([0, d3.max(inputs.series, serie => serie.result.estimate)])
	  .nice();
    const yb = d3.scaleBand()
	  .range([0, innerHbar])
	  .padding(0.2)
	  .domain(inputs.series.map(serie => serie.name));
    const xbAxis = d3.axisBottom()
	  .scale(xb)
	  .ticks(8, "s");
    const ybAxis = d3.axisLeft()
	  .scale(yb);

    const bargraph =
	container.append("svg")
	.attr("width", wbar)
	.attr("height", hbar);

    // background
    bargraph.append("rect")
  	.attr("x", marginbar.left)
  	.attr("y", marginbar.top)
  	.attr("width", innerWbar)
  	.attr("height", innerHbar)
  	.attr("class", "background axis");
    // x Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+(hbar-marginbar.bottom)+")")
	.attr("class", "axis")
	.call(xbAxis);
    // x axis title
    bargraph.append("text")
	.attr("class", "axisTitle")
	.attr("x", wbar/2)
	.attr("y", hbar-10)
	.text("Estimated "+inputs.yLabel);
    // y Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.bottom+")")
	.attr("class", "axis")
	.call(ybAxis);

    // Bargraph
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.top+")")
	.selectAll(".bar")
   	.data(inputs.series)
	.enter()
	.append("rect")
	.attr("class", "bar")
	.attr("y", serie => yb(serie.name))
	.attr("height", yb.bandwidth)
	.attr("x", serie => 0)
	.attr("width", serie => xb(serie.result.estimate))
	.attr("fill", "#4ECDC4")
	.on("mouseover", function (serie) {
	    // Specify where to put label of text
	    bargraph.append("text")
		.attr("class", "axisTitle")
		.attr("id", "tt")
		.attr("x", wbar-200)
		.attr("y", marginbar.top-10)
		.text("Value: "+d3.format(".4s")(serie.result.estimate));
	})
        .on("mouseout", function (serie) {
	    // Select text by id and then remove
	    d3.selectAll("#tt").transition().duration("50").remove();
	});

};

// [histrogram (data, barwidth, min, max)] computes histogram
// values as follows:
// - a value [v] of [data] contributes to the bar between [u] and
// [u+barwidth] if u <= v < u+barwidth
// - the [i]th bar is between [min+i*barwidth] and [min+(i+1)*barwidth]
// - [max] is used only to determine the number of bars. It MUST be greater
// than [d3.max(data)]
function histogram(data, barwidth, min, max) {
    const nbar = Math.floor((max-min)/barwidth)+1;
    let hist = new Array(nbar);
    for (let i=0; i<nbar; i++) {
	hist[i]=0;
    }

    data.forEach(function(v) {
	const ind = Math.floor((v-min)/barwidth);
	hist[ind] ++;
    });

    let n = data.length;
    for (let i=0; i<nbar; i++) {
	hist[i] = hist[i];
    }

    return hist;
}

// [plot_histogram(container, data, bandwidth, xscale, yscale)]
// draws the histogram computes with
// [histogram(data, barwidth, d3.min(data), d3.max(data)]
// in the html element [container].
//
// Axis are already defined on [container], using [xscale] and [yscale].
//
// In addition, this function returns the update function
// that redraw the bar if called with a new barwidth.
function plot_histogram(container, data, barwidth, xscale, yscale) {
    const min = d3.min(data),
	  max = d3.max(data);
    const hist = histogram(data, barwidth, min, max);
    const sample_nb = data.length;

    const print_value = function (v) {
	container.append("text")
	    .attr("class", "axisTitle")
	    .attr("id", "tt2")
	    .attr("x", wsvg-170)
	    .attr("y", 20)
	    .text("Value: "+d3.format("d")(v)+" / "+d3.format("d")(sample_nb));};

    const rects = container
	  .selectAll(".bar")
   	  .data(hist)
	  .enter();

    rects.append("rect")
	.attr("class", "bar")
	.attr("x", (v, i) => xscale(i*barwidth+min))
	.attr("width", (v, i) => xscale(barwidth)-xscale(0))
	.attr("y", (v, i) => yscale(v))
	.attr("height", (v, i) => innerH-yscale(v))
	.on("mouseover", print_value)
        .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());

    function update_hist(nbarwidth) {
	//compute new histograph values
	const nhist = histogram(data, nbarwidth, min, max);

	const rects = container
	      .selectAll(".bar")
   	      .data(nhist);

	rects.exit().remove();

	rects.enter().append("rect").attr("class", "bar")
	    .merge(rects)
	    .attr("x", (v, i) => xscale(i*nbarwidth+min))
	    .attr("width", (v, i) => xscale(nbarwidth)-xscale(0))
	    .attr("y", (v, i) => yscale(v))
	    .attr("height", (v, i) => innerH-yscale(v))
	    .on("mouseover", print_value)
            .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());
    }
    return update_hist;
};

// [kernelDensityEstimation(data, bandwith] returns the function x -> kde(x)
//    for [data]. The kernel function used is a gaussian.
function kernelDensityEstimation(X, bandwidth) {
    //gaussian constante
    const a = 1/(2*bandwidth*bandwidth);
    const b = bandwidth * SQRT_2PI;
    const gaussianKernel =
	  function (x) {
	      return Math.exp(-a * x * x) / b;
	  };

    return function (x) {
        let i = 0;
        let sum = 0;
        for (i = 0; i < X.length; i++) {
	    sum += gaussianKernel(x - X[i])/X.length;
        }
	return sum ;
    };
}

// [plot_kde(container, data, bandwidth, xscale, yscale, x)] draws
// the kde function computes with [kde(data, bandwidth)]
// for the abscisse values defined by [x], in the html element
// [container].
//
// Axis are already defined on [container], using [xscale] and
// [yscale].
//
// In addition, this function returns the update function that
// redraw the curve if called with a new bandwidth.
function plot_kde(container, data, bandwidth, xscale, yscale, x) {
    const n = x.length;
    const kde = kernelDensityEstimation(data, bandwidth);
    const density = new Array(n);

    for (let i=0; i<n;i++){
	let tmp = x[i] ;
	density[i] = [tmp, kde(tmp)];
    }

    const graph = container
	  .append('g')
	  .append("path")
	  .attr("class", "mypath")
	  .datum(density)
	  .attr("fill", "#4ECDC4")
	  .attr("opacity", ".8")
	  .attr("stroke", "#292F36")
	  .attr("stroke-width", 1)
	  .attr("stroke-linejoin", "round")
	  .attr("d",
		d3.line()
		.curve(d3.curveBasis)
		.x(d => xscale(d[0]))
		.y(d => yscale(d[1])));

    function update_kde(nbandwidth) {
	let kde = kernelDensityEstimation(data, nbandwidth);

	for (let i=0; i<n;i++){
	    density[i][1] = kde(density[i][0]);
	}

	graph.datum(density)
	    .transition()
	    .duration(50)
	    .attr("d",
		  d3.line()
		  .curve(d3.curveBasis)
		  .x(d => xscale(d[0]))
		  .y(d => yscale(d[1])));
    };

    return update_kde;
};

};


var contents = null;
contents = {"xLabel":"run","yLabel":"monotonic-clock","series":[{"name":"find/art","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":206,"time":2112034556},"dataset":[{"x":1,"y":119820},{"x":2,"y":188280},{"x":3,"y":291828},{"x":4,"y":357692},{"x":5,"y":446052},{"x":6,"y":577948},{"x":7,"y":691228},{"x":8,"y":751988},{"x":9,"y":901284},{"x":10,"y":923360},{"x":11,"y":1046012},{"x":12,"y":1069568},{"x":13,"y":1220476},{"x":14,"y":1303264},{"x":15,"y":1364344},{"x":16,"y":1572460},{"x":17,"y":1513472},{"x":18,"y":1663372},{"x":19,"y":1743128},{"x":20,"y":1875436},{"x":21,"y":2122504},{"x":22,"y":2074960},{"x":23,"y":2331544},{"x":24,"y":2183668},{"x":25,"y":2226736},{"x":26,"y":2413192},{"x":27,"y":2505880},{"x":28,"y":2605940},{"x":29,"y":2633264},{"x":30,"y":2672728},{"x":31,"y":2913004},{"x":32,"y":2953580},{"x":33,"y":3034000},{"x":34,"y":3126896},{"x":35,"y":3246528},{"x":36,"y":3483216},{"x":37,"y":3436384},{"x":38,"y":3560776},{"x":39,"y":3742684},{"x":40,"y":3877692},{"x":41,"y":3695688},{"x":42,"y":3884784},{"x":43,"y":3974112},{"x":44,"y":4163112},{"x":45,"y":4172084},{"x":46,"y":4256108},{"x":47,"y":4365440},{"x":48,"y":4369384},{"x":49,"y":4565236},{"x":50,"y":4560868},{"x":51,"y":4883564},{"x":52,"y":4849144},{"x":53,"y":4977380},{"x":54,"y":4923824},{"x":55,"y":5049752},{"x":56,"y":5268616},{"x":57,"y":5321432},{"x":58,"y":5330640},{"x":59,"y":5360400},{"x":60,"y":5387536},{"x":61,"y":5628960},{"x":62,"y":5888444},{"x":63,"y":6032912},{"x":64,"y":6215116},{"x":65,"y":6231908},{"x":66,"y":6266192},{"x":67,"y":6584100},{"x":68,"y":6471288},{"x":69,"y":6610776},{"x":70,"y":6635980},{"x":71,"y":6683540},{"x":72,"y":7035380},{"x":73,"y":6935640},{"x":74,"y":7191624},{"x":75,"y":7074664},{"x":76,"y":7251440},{"x":77,"y":7354260},{"x":78,"y":7434596},{"x":79,"y":7682760},{"x":80,"y":7771944},{"x":81,"y":7974964},{"x":82,"y":7951592},{"x":83,"y":7972960},{"x":84,"y":7929896},{"x":85,"y":8156340},{"x":86,"y":8159288},{"x":87,"y":8439248},{"x":88,"y":8787196},{"x":89,"y":8618076},{"x":90,"y":8577528},{"x":91,"y":8954500},{"x":92,"y":8720896},{"x":93,"y":8960420},{"x":94,"y":8880536},{"x":95,"y":9007972},{"x":96,"y":9063532},{"x":97,"y":9152048},{"x":98,"y":9312524},{"x":99,"y":9484828},{"x":100,"y":9592212},{"x":101,"y":9711996},{"x":102,"y":9721940},{"x":103,"y":9975248},{"x":104,"y":10066716},{"x":105,"y":10019004},{"x":106,"y":10326148},{"x":107,"y":10423160},{"x":108,"y":10529248},{"x":109,"y":11013176},{"x":110,"y":10605744},{"x":111,"y":10682328},{"x":112,"y":10735544},{"x":113,"y":11042676},{"x":114,"y":11090704},{"x":115,"y":10972620},{"x":116,"y":11267380},{"x":117,"y":11105468},{"x":118,"y":11443484},{"x":119,"y":11396700},{"x":120,"y":11360152},{"x":121,"y":11536784},{"x":122,"y":11634040},{"x":123,"y":11856832},{"x":124,"y":11732832},{"x":125,"y":11876356},{"x":126,"y":12140504},{"x":127,"y":12454652},{"x":128,"y":12807348},{"x":129,"y":12607056},{"x":130,"y":12679032},{"x":131,"y":12950748},{"x":132,"y":12760664},{"x":133,"y":12905532},{"x":134,"y":12875708},{"x":135,"y":12753612},{"x":136,"y":12883328},{"x":137,"y":12848132},{"x":138,"y":13762828},{"x":139,"y":13563404},{"x":140,"y":13153788},{"x":141,"y":13313884},{"x":142,"y":13510908},{"x":143,"y":13775404},{"x":144,"y":13629588},{"x":145,"y":13799748},{"x":146,"y":13968972},{"x":147,"y":13835876},{"x":148,"y":14044148},{"x":149,"y":14486136},{"x":150,"y":14110360},{"x":151,"y":14154872},{"x":152,"y":13938652},{"x":153,"y":14427844},{"x":154,"y":14299272},{"x":155,"y":14378924},{"x":156,"y":14478980},{"x":157,"y":14529404},{"x":158,"y":14571120},{"x":159,"y":14761548},{"x":160,"y":15032468},{"x":161,"y":14813504},{"x":162,"y":15106828},{"x":163,"y":14898728},{"x":164,"y":15010628},{"x":165,"y":15338548},{"x":166,"y":15410976},{"x":167,"y":15563856},{"x":168,"y":15842444},{"x":169,"y":16185956},{"x":170,"y":16294408},{"x":171,"y":16148812},{"x":172,"y":16104196},{"x":173,"y":16288772},{"x":174,"y":16287496},{"x":175,"y":16704292},{"x":176,"y":16216908},{"x":177,"y":17194676},{"x":178,"y":16661904},{"x":179,"y":16855756},{"x":180,"y":17017244},{"x":181,"y":16861472},{"x":182,"y":17106208},{"x":183,"y":17397576},{"x":184,"y":17779164},{"x":185,"y":17096276},{"x":186,"y":17187664},{"x":187,"y":17238916},{"x":188,"y":17241832},{"x":189,"y":17559928},{"x":190,"y":17653016},{"x":191,"y":17650004},{"x":192,"y":18094320},{"x":193,"y":17571448},{"x":194,"y":17901148},{"x":195,"y":17929852},{"x":196,"y":18294316},{"x":197,"y":18001400},{"x":198,"y":18611376},{"x":199,"y":18343856},{"x":200,"y":18596096},{"x":202,"y":18686388},{"x":204,"y":19021220},{"x":206,"y":19220396},{"x":208,"y":19513172},{"x":210,"y":19827624},{"x":212,"y":19733592}],"kde":[94272,93104,92944,92324,93056,93064,92920,92876,107976,88952,89396,89140,89176,89236,89448,89152,89088,88948,89080,89244,89596,89584,89104,89412,89340,89196,88800,117776,93076,93076,107928,89792,89472,89244,89212,89184,89344,89376,89232,89220,89316,89344,89560,89660,89272,89328,89796,89248,89936,89388,89560,89384,89316,89296,89192,89360,89324,89784,89440,89548,89512,89184,89268,89260,89204,88988,89312,89648,89064,89364,109676,96152,92924,93004,107244,89720,89236,89220,89456,89324,89504,89208,89172,89296,89356,89532,89312,89048,89284,89360,89228,89484,89336,89512,89284,89328,107636,92856,92836,108344,89512,89064,110176,93020,92524,92488,92616,92780,109148,89300,89528,89132,109976,92496,96056,92716,92496,106792,89260,89392,89176,89112,89068,89272,89240,89352,89048,89368,89500,89424,89520,89340,89432,89472,89352,89116,89448,89436,89852,89444,89476,89836,89392,107544,92844,92640,93312,92868,107288,89028,89224,89108,108720,92888,92612,107960,89464,117920,93216,93028,107088,89656,89724,89452,89288,89348,89368,89188,88924,89464,89460,89164,89480,89616,88932,89136,89244,88976,107664,92504,92876,93224,105692,88932,88856,89528,89416,89348,89584,88984,107656,92360,93020,92708,92948,107880,89404,89580,89636,89308,113012,92796,92700,106716,89000,89344,89144,108220,93020,92504,92824,92816,93016,92688,92560,92360,93160,92876,93208,93056,93168,93036,92844,93080,92584,93440,93032,93204,93400,93312,93660,94148,93720,93436,94132,94492,93380,93928,94468,94476,94860,95272,99444,115032,97856,116808,93328,93296,93644,92896,93348,94020,93168,93480,93132,93284,93532,93832,93360,93444,93028,93168,92592,92888,93172,93332,93292,93432,92392,93240,93884,93332,93344,93524,114000,96656,111444,93544,93556,93264,93304,92948,92932,92708,98576,93972,93416,93328,92896,93432,92996,93568,92664,93084,93916,93456,93920,93460,93876,93620,93420,93152,93860,93004,93492,94356,93844,93300,93812,94016,93304,93452,93468,93788,93952,94472,114504,98144,111548,93480,93676,94276,93572,93016,93164,93540,121796,96992,97116,111884,93436,94128,93576,93172,92768,92696,93212,93216,93444,92956,93436,94140,92936,93384,93516,93204,93624,93896,92972,93612,93920,93728,93276,93376,93180,93304,93376,93864,94008,93592,93492,93656,93044,94252,93248,93404,92936,93716,99384,92476,92768,93260,93204,92968,93012,93220,93736,93352,93492,93248,93404,93384,93272,93372,93464,92820,93692,93532,93296,93560,92872,92996,93836,92944,93644,93236,93308,93520,93404,93192,94040,93276,93748,93104,93852,93472,94088,93616,93500,93384,93492,99832,93256,92908,92888,92948,93044,93592,93280,93096,92940,93088,93688,93744,93364,93060,93412,93564,93248,93044,93348,92940,93288,92836,93316,93204,92964,93336,92844,92468,93716,92472,92840,93644,103768,94568,93116,92800,93464,93268,92708,92872,92380,99124,93560,92772,92920,92824,93236,93508,92656,92704,92948,92480,93128,92920,92704,92768,92652,93288,92984,92848,92520,98540,93248,93128,92656,93448,95196,93408,93680,93320,93244,95820,94024,93808,93572,93808,96212,93504,94088,93928,93316,93992,93992,93844,99428,93348,93948,93304,93512,92976,93568,93176,93684,93132,93060,93344,93784,94480,92940,93784,95768,93820,93808,93072,92908,95940,93488,92580,93252,92872,96432,93636,93316,93108,92196,94804,93288,93340,93796,92720,94080,94068,93204,94272,94704,94048,99076,93364,93720,93592,94232,93336,93040,93516,92784,93932,93652,93456,92992,96348,93456,93812,93228,93368,96476,93560,93812,93456,93088,95488,93408,92976,93428,94144,97032,93960,93960,114224,97972,112872,94016,94092,93012,93832,93736,93180,93936,93836,184232,98228,97044,109564,99276,94328,112056,96288,112764,128660,96080,93268,92796,92464,92948,95328,93236,92600,92908,92696,94708,92688,92824,93240,92916,94960,93244,92560,93040,92832,93332,92872,93140,93152,92640,93348,93520,93540,93292,93844,121360,96968,96884,114676,93348,93824,92656,93384,93172,95828,93204,92696,93264,93512,95036,93796,93052,92844,93192,95584,94008,93624,93588,93584,96072,93836,93244,92844,94176,93924,93696,93124,93384,93560,93824,93584,93440,93160,94560,94108,93524,93640,120092,97704,97096,96268,97000,112744,96248,93860,93168,92680,93188,95568,93136,93196,93288,93488,96396,94136,92992,93020,93612,95944,93644,92912,93216,93368,94124,94112,92984,92492,92928,93600,92820,92952,92624,93288,111800,97540,96576,109628,92820,99700,114000,97188,112728,96648,93728,93180,93008,93340,95756,92956,93388,93200,93636,95480,94360,93948,93764,94056,96460,93936,94044,93096,93704,93796,93888,93304,93652,93596,94648,93588,93776,99636,93512,93116,93112,93552,93320,93168,93384,93016,92956,116668,99180,97092,117320,92804,92356,115808,97244,112200,93660,93636,95296,93484,93504,92720,93204,95692,93096,93296,93284,93380,94056,93536,93172,93360,93324,93332,92816,93804,94024,93704,94368,93460,92940,93680,93724,93756,93668,93740,94428,96592,93464,121156,97420,96880,117936,93620,93192,93256,93252,95472,93404,92964,92672,92988,95256,94060,93360,93096,92628,93128,92924,94268,93608,93588,93844,94124,93300,93664,93864,94676,93696,93436,93876,93428,94104,94388,93412,93016,93904,93712,93616,92844,94088,101808,93116,93296,92668,92912,95700,93628,93000,92788,92968,97612,93720,93604,92908,93040,93668,93000,93384,93200,92708,93900,92340,92548,92796,93700,93412,93080,93476,94032,93636,93712,93336,93876,93336,93016,93568,94044,93108,93860,96456,94016,92988,99196,113656,99892,113548,93244,93484,93168,95664,93268,93480,93024,93184,93212,93708,93296,92920,93036,93492,93068,92956,93304,94128,93116,93540,93048,93392,92864,94080,93220,93576,93372,94112,93768,94016,92840,93468,96720,93648,93364,93524,93536,97968,100140,93472,93036,93232,95648,92992,93020,92868,92856,93024,92512,93260,93012,92796,93244,92552,93796,93580,93700,93820,93448,93148,93904,92696,93784,93876,93768,93784,93380,94260,94336,93688,93648,96332,93564,93636,93184,93472,102784,94288,93660,93636,99564,95932,93864,92860,92908,93044,93432,93888,92628,93056,93236,93824,92884,93012,92752,93440,93576,93192,93188,92780,92384,93664,93488,93272,93684,93376,94124,93692,93764,93728,98904,94024,93708,93664,96924,96168,93188,92972,93488,92732,95192,93508,92592,99012,93160],"result":{"estimate":94292.35744857784,"r_square":0.9982502301338652}},{"name":"find/hashtbl","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":203,"time":2101813374},"dataset":[{"x":1,"y":108124},{"x":2,"y":197776},{"x":3,"y":292392},{"x":4,"y":430948},{"x":5,"y":529696},{"x":6,"y":582876},{"x":7,"y":683328},{"x":8,"y":783272},{"x":9,"y":876752},{"x":10,"y":967400},{"x":11,"y":1070020},{"x":12,"y":1173584},{"x":13,"y":1301672},{"x":14,"y":1399180},{"x":15,"y":1458708},{"x":16,"y":1547080},{"x":17,"y":1927768},{"x":18,"y":1813296},{"x":19,"y":1872920},{"x":20,"y":1983672},{"x":21,"y":2081304},{"x":22,"y":2181980},{"x":23,"y":2226292},{"x":24,"y":2365696},{"x":25,"y":2481144},{"x":26,"y":2508024},{"x":27,"y":2657668},{"x":28,"y":2757276},{"x":29,"y":2800132},{"x":30,"y":2940580},{"x":31,"y":3055684},{"x":32,"y":3151184},{"x":33,"y":3308112},{"x":34,"y":3329604},{"x":35,"y":3482216},{"x":36,"y":3565480},{"x":37,"y":3692112},{"x":38,"y":3763196},{"x":39,"y":3935508},{"x":40,"y":3891876},{"x":41,"y":4055560},{"x":42,"y":4147072},{"x":43,"y":4218340},{"x":44,"y":4106428},{"x":45,"y":4282344},{"x":46,"y":4422288},{"x":47,"y":4528848},{"x":48,"y":4705812},{"x":49,"y":4764928},{"x":50,"y":4820208},{"x":51,"y":4736524},{"x":52,"y":5012720},{"x":53,"y":5081068},{"x":54,"y":5111532},{"x":55,"y":5454724},{"x":56,"y":5369048},{"x":57,"y":5407360},{"x":58,"y":5528172},{"x":59,"y":5770500},{"x":60,"y":5843320},{"x":61,"y":6103456},{"x":62,"y":6104660},{"x":63,"y":6125872},{"x":64,"y":6226140},{"x":65,"y":6257552},{"x":66,"y":6485124},{"x":67,"y":6609172},{"x":68,"y":6624928},{"x":69,"y":6763356},{"x":70,"y":6808256},{"x":71,"y":6762248},{"x":72,"y":6952328},{"x":73,"y":6915540},{"x":74,"y":7031344},{"x":75,"y":7230108},{"x":76,"y":7351492},{"x":77,"y":7441884},{"x":78,"y":7627064},{"x":79,"y":7524016},{"x":80,"y":7739240},{"x":81,"y":7715740},{"x":82,"y":7864428},{"x":83,"y":7934272},{"x":84,"y":7916876},{"x":85,"y":8068444},{"x":86,"y":8419132},{"x":87,"y":8232348},{"x":88,"y":8521232},{"x":89,"y":8680280},{"x":90,"y":8785932},{"x":91,"y":8610280},{"x":92,"y":8945560},{"x":93,"y":9030184},{"x":94,"y":8837944},{"x":95,"y":9058812},{"x":96,"y":8955024},{"x":97,"y":9596544},{"x":98,"y":9640412},{"x":99,"y":9370420},{"x":100,"y":9654296},{"x":101,"y":9917432},{"x":102,"y":9956344},{"x":103,"y":9855612},{"x":104,"y":9953472},{"x":105,"y":9952952},{"x":106,"y":10136216},{"x":107,"y":10490556},{"x":108,"y":10542796},{"x":109,"y":10520288},{"x":110,"y":10550516},{"x":111,"y":10635112},{"x":112,"y":11063628},{"x":113,"y":10783720},{"x":114,"y":11132304},{"x":115,"y":11244936},{"x":116,"y":11251164},{"x":117,"y":11374648},{"x":118,"y":11272148},{"x":119,"y":11518208},{"x":120,"y":11536776},{"x":121,"y":11476952},{"x":122,"y":11506712},{"x":123,"y":11904456},{"x":124,"y":12104348},{"x":125,"y":11942220},{"x":126,"y":11778260},{"x":127,"y":12086088},{"x":128,"y":12599428},{"x":129,"y":12405944},{"x":130,"y":12402000},{"x":131,"y":12593356},{"x":132,"y":12812080},{"x":133,"y":13071692},{"x":134,"y":12903596},{"x":135,"y":13412820},{"x":136,"y":13047216},{"x":137,"y":13225848},{"x":138,"y":13321956},{"x":139,"y":13343040},{"x":140,"y":13118076},{"x":141,"y":13540188},{"x":142,"y":13808800},{"x":143,"y":13863784},{"x":144,"y":13880328},{"x":145,"y":13974204},{"x":146,"y":14110092},{"x":147,"y":14004516},{"x":148,"y":14332656},{"x":149,"y":14541864},{"x":150,"y":14831992},{"x":151,"y":14596292},{"x":152,"y":14731240},{"x":153,"y":14869696},{"x":154,"y":14998012},{"x":155,"y":15353916},{"x":156,"y":15154420},{"x":157,"y":15398560},{"x":158,"y":15321868},{"x":159,"y":15357592},{"x":160,"y":15308596},{"x":161,"y":15291056},{"x":162,"y":15352368},{"x":163,"y":15955432},{"x":164,"y":15903276},{"x":165,"y":16171572},{"x":166,"y":15966640},{"x":167,"y":15881928},{"x":168,"y":16170920},{"x":169,"y":16288300},{"x":170,"y":16377856},{"x":171,"y":16628436},{"x":172,"y":16396984},{"x":173,"y":16616312},{"x":174,"y":16714196},{"x":175,"y":17120896},{"x":176,"y":16882820},{"x":177,"y":17013204},{"x":178,"y":17326820},{"x":179,"y":17082828},{"x":180,"y":17668936},{"x":181,"y":17458140},{"x":182,"y":17483996},{"x":183,"y":17619132},{"x":184,"y":17613952},{"x":185,"y":17841096},{"x":186,"y":17808476},{"x":187,"y":18009264},{"x":188,"y":18385472},{"x":189,"y":17957208},{"x":190,"y":18348668},{"x":191,"y":18322892},{"x":192,"y":18909976},{"x":193,"y":19215820},{"x":194,"y":18952800},{"x":195,"y":18755656},{"x":196,"y":18794928},{"x":197,"y":19499432},{"x":198,"y":18939296},{"x":199,"y":19499408},{"x":200,"y":19654036},{"x":202,"y":19826636},{"x":204,"y":19832216},{"x":206,"y":19970172}],"kde":[97260,109536,141048,101740,100080,99824,116140,108672,92424,91868,92464,92316,92920,92212,92800,92664,92744,92776,91988,91944,92592,92248,92636,113304,96200,111916,92744,92816,92636,92436,92788,92444,92692,92652,92452,92576,92008,92024,92148,92132,92224,92332,92360,113776,96484,96060,110984,92296,92780,91924,91880,92628,92384,92308,92576,92752,92360,92388,92396,92384,112872,96004,96196,110244,92328,112384,95816,95788,110924,92664,92752,92772,92716,92544,92360,92620,92592,92248,92908,92468,92296,92232,92500,92516,92532,116584,101664,99908,112904,109448,92396,92380,92584,92552,92396,92564,92292,92940,92780,92736,92312,92592,92944,110948,96072,96416,111432,92648,92788,92632,92748,92356,92584,92748,92612,92724,92420,92564,92436,92580,92720,92600,92752,92516,92488,92524,93056,115664,95840,96264,109292,92748,92680,92580,92456,92576,92884,92624,92984,92752,93348,92488,92656,92528,92796,92764,92568,92484,92884,92340,92744,92684,92896,112856,96288,96872,96816,117636,100012,116832,110628,100192,95732,107388,97948,96040,95744,96572,121080,100128,135940,92512,92340,92400,92116,92352,112948,95928,95984,95944,110888,112828,96124,96084,109268,92476,92276,92584,92568,92832,92468,92464,92632,135136,100232,115320,95932,111072,92616,92584,92516,92116,92584,92432,92192,92400,92416,92384,115100,96248,95640,131024,96232,96220,95720,109684,92132,92544,92668,92348,92656,92480,93028,92696,92784,92472,92700,92436,92568,92860,92340,92148,92620,110800,96304,95836,111092,92696,92784,92376,92996,93088,92612,92356,92340,92584,92444,92548,92308,133332,99924,99996,115712,95740,96004,95868,96364,110128,92788,91976,92460,92292,92420,92436,92432,92436,92528,92548,92544,112668,96152,95856,128644,95916,95940,95556,96116,96028,96252,109896,92448,92464,92164,92136,92368,92444,92292,92608,92612,92392,113208,96156,95932,95968,109548,92576,113348,96384,111868,94920,92132,92476,92524,92648,92544,110716,96016,96180,98028,96384,96096,110712,110384,96196,96272,118028,100080,115368,109252,92624,92368,92248,110052,116452,99852,99700,112740,96012,133008,116912,99756,99952,115484,95920,96212,95900,115412,99888,100144,114932,95468,95736,95588,96252,95860,96024,96540,95552,96492,95936,95840,96248,96148,109516,92556,92652,93252,93192,92404,92644,92660,92452,92196,92596,92472,111696,96128,95780,110572,92536,115616,100048,99804,129728,92432,92088,92352,92180,92560,92496,92740,92772,92296,92564,92792,92712,92440,92508,112020,96064,96148,96040,96144,96508,95924,96152,96100,96176,96600,96368,96504,96232,96072,95888,96000,96228,96068,96160,96392,96532,95736,125220,100220,100604,114616,96728,96588,96244,111792,92696,92648,92072,92840,92884,111808,96504,95712,110724,92952,92444,92540,92696,92604,92592,92604,92624,110612,96132,107916,96788,95920,95844,96080,96236,95864,96232,96396,96180,95936,96056,96616,96548,119564,100592,100156,112648,95908,96328,95652,95984,96268,95908,95852,95980,95688,95840,95760,95980,95552,95496,95808,95868,96308,96152,109896,92440,92048,92312,92580,92804,92324,92232,92400,92600,92108,92496,92600,110160,96288,96040,96056,109852,92576,114248,96488,96004,96376,96004,96236,96288,96032,95932,95988,109084,92180,92360,92420,110872,96008,96036,96120,96144,108912,92568,92556,92508,99852,92904,92900,92648,93032,92500,92580,92560,92544,92900,92684,92812,111476,114692,100696,114764,96416,96588,120020,100832,100172,113356,96576,96176,96168,96376,96392,96368,96296,95888,96588,96156,96496,96076,96428,109052,92512,92256,92732,92540,111760,96576,96168,110336,93048,92464,92812,92540,92752,92684,111584,96132,95768,112176,92520,92140,92192,92240,94428,134348,99756,117656,92184,92632,92320,92932,92832,110976,96040,96408,111716,92436,92548,92052,92484,92212,92368,112964,95904,95444,109236,92648,92156,92548,92096,92652,92040,116304,96188,116616,113528,111436,92276,92444,92296,92624,110288,115192,103280,99840,100332,127876,92304,93044,92960,93380,92864,93208,92912,92784,92400,92496,92924,92568,92508,92984,92800,92740,92580,92628,92776,93000,92872,93040,92644,92604,92744,92928,92808,92568,92724,92088,93000,92896,92716,92772,92712,92396,92628,113452,116088,100020,99972,129604,92748,92484,92480,92180,92572,92816,92540,92764,92552,93264,92856,92824,92664,92592,92624,92584,92220,92484,112344,95972,95980,109280,92588,113740,96328,112116,92556,93080,93080,92936,92408,92652,92540,92688,92904,92152,92320,92388,114988,96348,96472,109488,92656,91944,92780,92368,92572,92688,92704,92624,92924,92928,92740,92980,92656,92368,92696,92572,92612,92808,93168,93284,92752,92812,92988,92664,92980,93096,93012,92740,92892,92508,92892,120780,97152,96444,96304,119984,100268,132980,100476,100300,128932,92532,92424,92604,110400,96428,96252,111764,92472,92960,92560,92604,92532,92348,92716,112864,96144,96432,96104,117864,133168,115164,96292,96204,95892,96176,109040,93212,92988,92988,92432,92732,92508,92412,111624,96552,96376,123320,99976,99632,113280,96128,95824,95832,96048,95584,109816,92324,92580,92360,92924,92604,92200,92468,110540,96372,96308,96136,96308,111552,92848,92792,110940,96088,95640,113904,100420,100116,129688,92556,92512,92660,92912,92688,92628,92264,92700,92448,119612,99740,115808,93176,92740,92348,92548,92716,110280,95580,96104,95624,96324,112024,92100,92884,92688,92788,92216,92076,92924,92816,92584,92396,92800,92840,92572,92804,110104,96408,96120,111828,92908,92924,92572,92568,92680,92992,92460,92788,92420,120620,99968,99756,117316,111844,92096,92580,92464,92368,110944,96124,95760,96244,96268,111560,92784,113156,96524,96084,109648,92496,92792,92844,92544,92384,92640,92648,92824,92848,93332,92952,93272,92332,92496,92524,92620,92628,92624,111352,96452,98448,119628,100116,116104,110536,109612,96280,96056,110996,92464,92608,92560,111164,96064,96644,111620,92576,92668,92612,92528,92536,92536,92556,92204,93112,111860,95748,96152,112088,92628,92680,92716,110332,96076,96064,96000,109964,92680,92484,92648,92548,115032,100024,100088,134252,92404,92640,92360,92540,92284,92540,92820,93092,92896,92540,92180,92784,92860,92884,92728,92996,93032,111520,96108,96208,96144,110268,92464,92964,92856,92500,92848,92408,92892,93020,92520,92688,92784,92608,92632,92716,92872,93044,141148,100044,99980,112328,109740,92312,92640,92512,92436,92548,92112,92212,92632,93000,92984,92556],"result":{"estimate":96693.91311714932,"r_square":0.9993169068274862}}]}


if (contents == null)
    d3.json("outputs.json", render);
else
    render(contents);
}

  </script>

</body>
</html>
