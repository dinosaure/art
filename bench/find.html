<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/d3-simple-slider"></script>
  <script src="https://unpkg.com/simple-statistics@7.0.2/dist/simple-statistics.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
  <link href="style.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <style>
    *{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body{
    width: 100%;
    height: 100%;
    font-family:Helvetica Neue,metric,sans-serif;
    text-rendering: optimizeLegibility;
}

.center{
    width: 500px;
    margin:auto
}

text{
    font-family: metric,sans-serif;
}

.ml {
    text-align: left
}

svg {
    overflow: hidden;
    margin: auto
}

.axis line, .axis path{
    stroke: #2E3532;
    stroke-width:1px;
}

.axisTitle, .axis text{
    fill: #2E3532;
    font-size:12px;
}

.background {
    fill: #FBFBFB;
    stroke: #2E3532;
}

.axisTitle, .chartTitle{
    text-anchor: middle
}


.ytitle {
    text-anchor: middle;
    transform: rotate(90deg)
}

.warningtext{
    text-anchor: center;
    fill: #F06449;
}

.regLine {
    stroke: #F06449;
    stroke-width:2px;
    opacity:0.7
}

.circle {
    fill: #4ECDC4;
    stroke: #292f36;
    stroke-width:0.3px
}

table {
    margin:auto;
    text-align:left;
    border-spacing: 15px 5px;
    border: 1px solid #2E3532
}

th {
    text-align: center;
    color:#F06449
}


tr {
    fill: #2E3532;
    font-size:10px
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: auto;
  background-color: #F06449;
  color: #FFFFFF;
  text-align: center;
  border-radius: 10px;
  padding: 0 5px 0 5px;
  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}
.bar {
    fill: #4ECDC4;
    stroke:#292f36;
}
.bar:hover {
    fill: #F06449;
    stroke:#292f36;
    stroke-width:1px;
}

.radio {
    margin: auto;
    width : 200px;
}

.wrapper {
    display: grid;
    margin: 50px 50px 50px 50px;
    gap: 10px 20px;
    grid-auto-rows: minmax(20px, auto);
    text-align: center;
    place-items: center;
}

.mainTitle, .summarizeTitle {
    height:30px;
    width: auto;
    border-radius: 2px;
    padding: 0 45px 0 45px;
    border-style: solid;
    border-width:1px;
    box-shadow: 2px 2px 1px rgba(0,0,0,0.1);
    color:  #2E3532;
    background: #FBFBFB;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.slidecontainer{
    width: 50%;
}

  </style>
</head>
<body>

  <script type="text/javascript">
    // structure of JSON
// { xLabel: string,
//   yLabel: string,
//   series: [ tests ] }
//
// tests := { name: string,
//            description: { start : int, sampling: float, stabilize: bool,
//                           quota: float, limit: int, instances: [string],
//                           samples: int, time : float}
//            dataset: [ point ],
//            kde : [ v: float ] (optional)
//            result: { estimate: float, r_square: float (optional) } }
//
// point := { x : double,
//            y : double }
//
// xLabel and yLabel are the same for any tests
window.onload = function () {

const wsvg = 600;
const hsvg = 400;
const wslider = 200;
const hslider = 50;
const margin = {left:50,right:50,top:20,bottom:50};
const dotSize = 1.5;
const innerW = wsvg-(margin.left+margin.right);
const innerH = hsvg-(margin.top+margin.bottom);

const marginbar = {left:150,right:150,top:50,bottom:50};
const wbar = 900;
const innerWbar = wbar-(marginbar.left+marginbar.right);

const SQRT_2PI = Math.sqrt(2 * Math.PI);

// Main function : place containers and call plot functions.
function render(inputs) {
    inputs.series.forEach(
	function(serie) {
	    serie.dataset.forEach(
		function(d) {
		    d.x = +d.x;
		    d.y = +d.y;
		});}
    );

    // First step : check if there is no kde/histogram data at all in
    // the benchmarks, in which case, we want to reduce our layout to
    // one column.
    let nonempty_kde = false;
    inputs.series.forEach(function (serie) {
	if ('kde' in serie) {
	    nonempty_kde = nonempty_kde || true;} });
    const nb_col = nonempty_kde ? 2 : 1;

    // ************************************************ //
    //              Layout of the page                  //
    // ************************************************ //
    // + a summarize bar graph on top
    // + one section for each benchmark which includes
    //     * 1 title
    //     * 1 linear regression graph and its title and information table
    //     * if kde data are available a histogram/kde graph with its control panel.
    //
    // If none of the benchmarks has kde data, the layout is the same
    // but with only one column (no hist/kde graphs).
    //
    //
    //              c1:        c2:
    //
    // r1:            *title*
    //           ___________________
    // r2:      |   summarize bar   |
    //          |___________________|
    //
    // r3:           *title-1*
    //
    // r4:        *title*   *radio*
    //           _______     _______
    // r5:      | lr-1  |   | kde-1 |
    //          |_______|   |_______|
    //
    // r6:      *infos-1*   *slider-1*
    // ..
    // r(4i+3):       *title-i*
    //
    // r(4i+4):  *title*     *radio*
    //           _______     _______
    // r(4i+5): | lr-i  |   | kde-i |
    //          |_______|   |_______|
    //
    // r(4i+6): *infos-i*   *slider-i*
    //
    // etc ..

      const main = d3.select("body")
	  .append("div")
	    .attr("class", "wrapper")
	    .style("grid-template-columns", (nonempty_kde ? "repeat(2,"+wsvg+"px)" : "900px"))
	    .attr("id", "main");

    // ************************************************ //
    //              Summarize bar graph                 //
    // ************************************************ //

    // Title
    main.append("div")
   	  .style("grid-row", "1")
      	.style("grid-column", "1 / "+(nb_col+1))
  	  .attr("class", "summarizeTitle")
  	.text("Benchmarks summary");

    // Bar graph
    let bar_container = main
	.append("div")
   	  .style("grid-row", "2")
      	  .style("grid-column", "1 / "+(nb_col+1))
	  .attr("id", "bar");
    plot_summarize_bar_graph(bar_container, inputs);


    // ************************************************ //
    //              Layout for lr/kde graphs            //
    // ************************************************ //

    // Benchmark titles
    const titles = main
	  .selectAll(".mainTitle")
	  .data(inputs.series)
	  .enter()
	  .append("div")
	    .attr("id", (data, i) => "title-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+3))
      	    .style("grid-column", "1 / "+(nb_col+1))
  	    .attr("class","mainTitle")
	  .append("text")
  	    .attr("x", wsvg)
  	    .attr("y", margin.top-10)
            .text((data, i) => "#"+data.name);

    // Linear regression graph titles
    const titles_lr = main
	  .selectAll("#title_lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("id",  "title_lr")
   	    .style("grid-row", (data,i) =>""+(4*i+4))
   	    .style("grid-column", "1")
	  .append("text")
  	    .attr("class","chartTitle")
  	    .text("Linear regression");

    // Containers for linear regression graphs
    const lr_graphs = main
	  .selectAll(".lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr")
	    .attr("id", (data, i) => "linearRegression-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+5))
   	  .style("grid-column", "1");

    // Containers for linear regression info tables
    const lr_info = main
	  .selectAll(".lr-info")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr-info")
	    .attr("id", (data, i) => "lr-info-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+6))
            .style("grid-column", "1");

    let radio_div, kde_graphs, kde_controler;
    if (nonempty_kde) {
	// Containers for radio buttons to choose between histogram/kde plots
	radio_div = main
	      .selectAll(".radio_div")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class",  "radio")
	      .attr("id", (d, i) => "radio_div"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+4))
   	      .style("grid-column", "2");

	// Containers for kde/hist graph
	kde_graphs = main
	      .selectAll(".kde")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde")
	      .attr("id", (data, i) => "histKde-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+5))
   	      .style("grid-column", "2");

	// Containers for kde/hist controlers
	kde_controler = main
	      .selectAll(".kde-controler")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde-controler")
	      .attr("id", (data, i) => "kde-controler-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+6))
              .style("grid-column", "2");
    }

    // ************************************************ //
    //          Linear regression graph                 //
    // ************************************************ //
    lr_graphs.each( function(serie, i) {
	//Curves for each input
	const xMin = 0;
	const xMax = d3.max(serie.dataset, d => d.x);
	const yMin = 0;
	const yMax = d3.max(serie.dataset, d => d.y);

	// Define x axis
	const xScale = d3.scaleLinear()
  	      .domain([xMin,xMax])
  	      .range([0,innerW])
  	      .nice();
	const xAxis = d3.axisBottom()
  	      .scale(xScale)
  	      .ticks(8, "s");
	// "s" = number format such as 1000 -> 1k

	// Define y axis
	const yScale = d3.scaleLinear()
  	      .domain([yMin,yMax])
  	      .range([innerH,0])
  	      .nice();
	const yAxis = d3.axisLeft()
  	      .scale(yScale)
  	      .ticks(8, "s");

	// Svg
  	const plot = d3.select(this)
	    .append("svg")
  	      .attr("width",wsvg)
  	      .attr("height",hsvg);
	// Color background
	plot.append("rect")
  	    .attr("x",margin.left)
  	    .attr("y",margin.top)
  	    .attr("width",innerW)
  	    .attr("height",innerH)
  	    .attr("class","background axis");
	// Plot axis
	plot.append("g")
  	    .attr("transform",
	 	  "translate("+margin.left+","
	 	  +(hsvg-margin.bottom)+")")
	    .attr("class", "axis")
  	    .call(xAxis);
	plot.append("g")
  	    .attr("transform",
	  	  "translate("+margin.left+","
		  +margin.top+")")
	    .attr("class", "axis")
  	    .call(yAxis);
	// Print axis titles
	plot.append("text")
	    .attr("class", "axisTitle")
	    .attr("x", wsvg/2)
	    .attr("y", hsvg-10)
	    .text(inputs.xLabel);
	plot.append("text")
	    .attr("class", "axisTitle ytitle")
	    .attr("transform-origin", 0, hsvg/2)
	    .attr("x", 0)
	    .attr("y", hsvg/2)
	    .text(inputs.yLabel);

	// Plot data
	plot.append("g")
	    .attr("transform",
		  "translate("+margin.left+","
		  +margin.top+")")
  	    .selectAll("circle")
  	    .data(serie.dataset)
  	    .enter()
  	    .append("circle")
	    .attr("class", "circle")
  	    .attr("r", dotSize)
  	    .attr("cx", d => xScale(d.x))
  	    .attr("cy", d => yScale(d.y));

	// Plot linear regression line

	const xVals = serie.dataset.map((e,j) => e.x);
	const yVals = serie.dataset.map((e,j) => e.y);
	const pairs = [];
	xVals.forEach((d,i) => pairs.push([xVals[i],yVals[i]]));
	const linReg = ss.linearRegression(pairs);
	const linRegLine = ss.linearRegressionLine(linReg);
	let line = plot
	    .append("line")
    	      .attr("transform","translate("+margin.left+","+margin.top+")")
    	      .attr("class","regLine")
    	      .attr("x1",xScale(xMin))
    	      .attr("x2",xScale(xMin))
    	      .attr("y1",yScale(linRegLine(xMin)))
    	      .attr("y2",yScale(linRegLine(xMin)));
	line.transition().duration(1000).delay(2000)
    	      .attr("x2",xScale(xMax))
    	      .attr("y2",yScale(linRegLine(xMax)));

	// Add text boxes
	//const meanX = ss.mean(xVals).toFixed(0);
	//const meanY = ss.mean(yVals).toFixed(2);
	//const varX = ss.sampleVariance(xVals).toFixed(0);
	//const varY = ss.sampleVariance(yVals).toFixed(1);
	//const corCoeff = ss.sampleCorrelation(xVals,yVals).toFixed(3);

	const lr_results = [
	    ["Linear regression line", "y = "+linReg.b.toFixed(2)+" + "+linReg.m.toFixed(3)+"x"],
	    ["Coefficient", serie.result.estimate],
	    ["RÂ²", serie.result.r_square]
	];

	const sampling_to_string = sampling =>
              (Number.isInteger(sampling) ?  "`Linear "+sampling+"" : "`Geometric "+sampling+"");

	const format = v  => d3.format("s")(v);

	const param_benchmarks = [
	    ["LR sampling (sampling)", sampling_to_string(serie.description.sampling)],
	    ["Start (start)", serie.description.start],
	    ["Benchmark runtime (time / quota)",
	     format(serie.description.time) + " / " + format(serie.description.quota)],
	    ["Number of runs (samples)", serie.description.samples + " / " + serie.description.limit],
	    ["Stabilized GC (stabilize)", serie.description.stabilize]
	];

	const table = d3.select("#lr-info-"+i)
	      .append("table");

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Linear regression results");

	table.append("tbody")
	    .selectAll("tr")
	    .data(lr_results)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("class", "tooltip")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Benchmarks parameters")
	    .append("span")
	    .attr("class","tooltiptext")
	    .text("See [Benchmarks.stats]");

	table.append("tbody")
	    .selectAll("tr")
	    .data(param_benchmarks)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

    });

    // ************************************************ //
    //         Histogram and kde graphs                 //
    // ************************************************ //
    if (nonempty_kde) {
        kde_graphs.each(function (serie, i) {

	    // Svg for histogram and kde graphs
	    let pdfgraph = d3.select(this)
		.append("svg")
		.attr("id", "pdfgraph")
		.attr("width", wsvg)
		.attr("height", hsvg)
		.append("g")
		.attr("transform", "translate("+margin.left+","+margin.top+")");

	    // If there is no kde field in the data [serie], some note
	    // is written in the svg window.
	    if (!('kde' in serie)) {
		pdfgraph.append("text")
		    .attr("x", (margin.left+margin.right+wsvg)/2)
		    .attr("y", (margin.top+margin.bottom+hsvg)/2)
		    .attr("class", "warning")
		    .text("No available data");
	    } else if (d3.max(serie.kde) == d3.min(serie.kde)) {
		pdfgraph.append("text")
		    .attr("x", wsvg/2)
		    .attr("y", hsvg/2)
		    .attr("class", "warningtext")
		    .text("All data have same value.");
	    } else {
		const data = serie.kde;
		//Some default values
		const min_slider = (d3.max(data)-d3.min(data))/data.length;
		const max_slider = (d3.max(data)-d3.min(data))/30;
		let vslider = min_slider;

		//Radio buttons
		const form = d3.select("#radio_div"+i)
		      .append("form");

		form.append("input")
		    .attr("type", "radio")
		    .attr("name", "graph")
		    .attr("value", "hist"+i)
		    .attr("name", "graph")
		    .attr("checked", "checked")
		    .on("change", () => plot_chosen_graph(d3.select(this), "hist"));
		form.append("label")
		    .attr("for", "hist"+i)
		    .text("Histogram");
		form.append("input")
		    .attr("type", "radio")
		    .attr("value", "kde"+i)
		    .attr("name", "graph")
		    .on("change", () => plot_chosen_graph(d3.select(this), "kde"));
		form.append("label")
		    .attr("for", "kde"+i)
		    .text("KDE");

		//axis
		const min = d3.min(data),
		      max = d3.max(data);
		const minX = d3.max([0, min-max_slider]),
		      maxX = max+max_slider;

		//X axis is the same for both graphs (histogram and kde)
		const xscale = d3.scaleLinear()
		      .range([0, innerW])
		      .domain([minX, maxX])
		      .nice();
		const xAxis = d3.axisBottom()
		      .scale(xscale)
		      .ticks(8, "s");

		//Y axis has a different domain value between both graphs.
		//So yscale.domain() is defined individually for each plot.
		const yscale = d3.scaleLinear()
		      .range([0, innerH])
		      .nice();
		const yAxis = d3.axisLeft()
		      .scale(yscale)
		      .ticks(8, "s");

		//x value for kde graph
		const n = 1000;
		const x = Array(n);
		const xmin = d3.min(xscale.domain()),
		      xmax = d3.max(xscale.domain());
		for (let i=0; i<n; i++) { x[i] = xmin + i*(xmax-xmin)/n; }

		//Compute kde function for min bandwidth value to determine to determine
		//the max value of Y axis. Only happens one time when loading the webpage.
		const kde = kernelDensityEstimation(data, min_slider);
		const v = new Array(n);
		for (let i=0; i<n;i++){ v[i] = kde(x[i]);}
		const maxYkde = d3.max(v),
		      maxYhist = d3.max(histogram(data, max_slider, min, max));

		//background
		pdfgraph
		    .append("rect")
  		    .attr("x", 0)
  		    .attr("y", 0)
  		    .attr("width", innerW)
  		    .attr("height", innerH)
  		    .attr("class","background axis");

		// x Axis
		const gxAxis = pdfgraph
	              .append("g")
	              .attr("transform","translate(0"+","+innerH+")")
	              .attr("class", "axis")
	              .call(xAxis);

		// y Axis
		const gyAxis = pdfgraph
	              .append("g")
	              .attr("class", "axis")
	              .call(yAxis);

		// X Axis title
		pdfgraph.append("text")
		    .attr("class", "axisTitle")
		    .attr("x", innerW/2)
		    .attr("y", innerH+40)
		    .text("Estimated "+inputs.yLabel);

		plot_chosen_graph(d3.select(this), "hist");

		function plot_chosen_graph(container, choice) {


		    container.selectAll(".bar").remove();
		    container.select(".mypath").remove();
		    container.select(".ytitle").remove();

		    // Erasing control panels if it exists and initializing it
		    const control_container = d3.select("#kde-controler-"+i);
		    const slider = control_container.select("#slider-"+i);
		    const slidertitle = control_container.select("#slidertitle-"+i);
		    if (!slider.empty())  {
			slider.remove();
		    }
		    if (!slidertitle.empty())  {
			slidertitle.remove();
		    }

		    //Hist part
		    if (choice=="hist") {
			// Defined yAxis
			yscale.domain([maxYhist, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", 10)
			    .attr("y", innerH/2)
			    .text("Count");

			const barwidth = vslider;

			const update_hist =
			      plot_histogram(pdfgraph, data, barwidth, xscale, yscale);

			//slider
			control_container
			    .insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Barwidth");

			control_container
			    .insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) => {
				      if (value > 0) {
					  vslider=value;
					  update_hist(vslider);}}));
		    } else {
			//Defined yAxis
			yscale.domain([maxYkde, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", +10)
			    .attr("y", innerH/2)
			    .text("Density");

			const bandwidth = vslider;
			const update_kde = plot_kde(pdfgraph, data, bandwidth, xscale, yscale, x);

			//slider
			control_container.insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Bandwidth");

			control_container.insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) =>
				      {if (value > 0) { vslider=value; update_kde(vslider);}}));
		    }; // end else
		}; // end function
	    }; //end else (available kde data)
	}); //end function // end each
    }; //end if



function plot_summarize_bar_graph(container, inputs) {

    const hbar = d3.min([60*inputs.series.length, hsvg]);
    const innerHbar = hbar - marginbar.top - marginbar.bottom;

    const xb = d3.scaleLinear()
	  .range([0, innerWbar])
	  .domain([0, d3.max(inputs.series, serie => serie.result.estimate)])
	  .nice();
    const yb = d3.scaleBand()
	  .range([0, innerHbar])
	  .padding(0.2)
	  .domain(inputs.series.map(serie => serie.name));
    const xbAxis = d3.axisBottom()
	  .scale(xb)
	  .ticks(8, "s");
    const ybAxis = d3.axisLeft()
	  .scale(yb);

    const bargraph =
	container.append("svg")
	.attr("width", wbar)
	.attr("height", hbar);

    // background
    bargraph.append("rect")
  	.attr("x", marginbar.left)
  	.attr("y", marginbar.top)
  	.attr("width", innerWbar)
  	.attr("height", innerHbar)
  	.attr("class", "background axis");
    // x Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+(hbar-marginbar.bottom)+")")
	.attr("class", "axis")
	.call(xbAxis);
    // x axis title
    bargraph.append("text")
	.attr("class", "axisTitle")
	.attr("x", wbar/2)
	.attr("y", hbar-10)
	.text("Estimated "+inputs.yLabel);
    // y Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.bottom+")")
	.attr("class", "axis")
	.call(ybAxis);

    // Bargraph
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.top+")")
	.selectAll(".bar")
   	.data(inputs.series)
	.enter()
	.append("rect")
	.attr("class", "bar")
	.attr("y", serie => yb(serie.name))
	.attr("height", yb.bandwidth)
	.attr("x", serie => 0)
	.attr("width", serie => xb(serie.result.estimate))
	.attr("fill", "#4ECDC4")
	.on("mouseover", function (serie) {
	    // Specify where to put label of text
	    bargraph.append("text")
		.attr("class", "axisTitle")
		.attr("id", "tt")
		.attr("x", wbar-200)
		.attr("y", marginbar.top-10)
		.text("Value: "+d3.format(".4s")(serie.result.estimate));
	})
        .on("mouseout", function (serie) {
	    // Select text by id and then remove
	    d3.selectAll("#tt").transition().duration("50").remove();
	});

};

// [histrogram (data, barwidth, min, max)] computes histogram
// values as follows:
// - a value [v] of [data] contributes to the bar between [u] and
// [u+barwidth] if u <= v < u+barwidth
// - the [i]th bar is between [min+i*barwidth] and [min+(i+1)*barwidth]
// - [max] is used only to determine the number of bars. It MUST be greater
// than [d3.max(data)]
function histogram(data, barwidth, min, max) {
    const nbar = Math.floor((max-min)/barwidth)+1;
    let hist = new Array(nbar);
    for (let i=0; i<nbar; i++) {
	hist[i]=0;
    }

    data.forEach(function(v) {
	const ind = Math.floor((v-min)/barwidth);
	hist[ind] ++;
    });

    let n = data.length;
    for (let i=0; i<nbar; i++) {
	hist[i] = hist[i];
    }

    return hist;
}

// [plot_histogram(container, data, bandwidth, xscale, yscale)]
// draws the histogram computes with
// [histogram(data, barwidth, d3.min(data), d3.max(data)]
// in the html element [container].
//
// Axis are already defined on [container], using [xscale] and [yscale].
//
// In addition, this function returns the update function
// that redraw the bar if called with a new barwidth.
function plot_histogram(container, data, barwidth, xscale, yscale) {
    const min = d3.min(data),
	  max = d3.max(data);
    const hist = histogram(data, barwidth, min, max);
    const sample_nb = data.length;

    const print_value = function (v) {
	container.append("text")
	    .attr("class", "axisTitle")
	    .attr("id", "tt2")
	    .attr("x", wsvg-170)
	    .attr("y", 20)
	    .text("Value: "+d3.format("d")(v)+" / "+d3.format("d")(sample_nb));};

    const rects = container
	  .selectAll(".bar")
   	  .data(hist)
	  .enter();

    rects.append("rect")
	.attr("class", "bar")
	.attr("x", (v, i) => xscale(i*barwidth+min))
	.attr("width", (v, i) => xscale(barwidth)-xscale(0))
	.attr("y", (v, i) => yscale(v))
	.attr("height", (v, i) => innerH-yscale(v))
	.on("mouseover", print_value)
        .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());

    function update_hist(nbarwidth) {
	//compute new histograph values
	const nhist = histogram(data, nbarwidth, min, max);

	const rects = container
	      .selectAll(".bar")
   	      .data(nhist);

	rects.exit().remove();

	rects.enter().append("rect").attr("class", "bar")
	    .merge(rects)
	    .attr("x", (v, i) => xscale(i*nbarwidth+min))
	    .attr("width", (v, i) => xscale(nbarwidth)-xscale(0))
	    .attr("y", (v, i) => yscale(v))
	    .attr("height", (v, i) => innerH-yscale(v))
	    .on("mouseover", print_value)
            .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());
    }
    return update_hist;
};

// [kernelDensityEstimation(data, bandwith] returns the function x -> kde(x)
//    for [data]. The kernel function used is a gaussian.
function kernelDensityEstimation(X, bandwidth) {
    //gaussian constante
    const a = 1/(2*bandwidth*bandwidth);
    const b = bandwidth * SQRT_2PI;
    const gaussianKernel =
	  function (x) {
	      return Math.exp(-a * x * x) / b;
	  };

    return function (x) {
        let i = 0;
        let sum = 0;
        for (i = 0; i < X.length; i++) {
	    sum += gaussianKernel(x - X[i])/X.length;
        }
	return sum ;
    };
}

// [plot_kde(container, data, bandwidth, xscale, yscale, x)] draws
// the kde function computes with [kde(data, bandwidth)]
// for the abscisse values defined by [x], in the html element
// [container].
//
// Axis are already defined on [container], using [xscale] and
// [yscale].
//
// In addition, this function returns the update function that
// redraw the curve if called with a new bandwidth.
function plot_kde(container, data, bandwidth, xscale, yscale, x) {
    const n = x.length;
    const kde = kernelDensityEstimation(data, bandwidth);
    const density = new Array(n);

    for (let i=0; i<n;i++){
	let tmp = x[i] ;
	density[i] = [tmp, kde(tmp)];
    }

    const graph = container
	  .append('g')
	  .append("path")
	  .attr("class", "mypath")
	  .datum(density)
	  .attr("fill", "#4ECDC4")
	  .attr("opacity", ".8")
	  .attr("stroke", "#292F36")
	  .attr("stroke-width", 1)
	  .attr("stroke-linejoin", "round")
	  .attr("d",
		d3.line()
		.curve(d3.curveBasis)
		.x(d => xscale(d[0]))
		.y(d => yscale(d[1])));

    function update_kde(nbandwidth) {
	let kde = kernelDensityEstimation(data, nbandwidth);

	for (let i=0; i<n;i++){
	    density[i][1] = kde(density[i][0]);
	}

	graph.datum(density)
	    .transition()
	    .duration(50)
	    .attr("d",
		  d3.line()
		  .curve(d3.curveBasis)
		  .x(d => xscale(d[0]))
		  .y(d => yscale(d[1])));
    };

    return update_kde;
};

};


var contents = null;
contents = {"xLabel":"run","yLabel":"monotonic-clock","series":[{"name":"find/art","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":208,"time":2096442603},"dataset":[{"x":1,"y":143280},{"x":2,"y":192956},{"x":3,"y":286072},{"x":4,"y":379660},{"x":5,"y":472376},{"x":6,"y":565840},{"x":7,"y":664928},{"x":8,"y":761868},{"x":9,"y":863064},{"x":10,"y":941400},{"x":11,"y":1036072},{"x":12,"y":1132780},{"x":13,"y":1254836},{"x":14,"y":1320264},{"x":15,"y":1418192},{"x":16,"y":1528272},{"x":17,"y":1605028},{"x":18,"y":1704124},{"x":19,"y":1783272},{"x":20,"y":1885196},{"x":21,"y":1953484},{"x":22,"y":1980900},{"x":23,"y":2118152},{"x":24,"y":2194536},{"x":25,"y":2320328},{"x":26,"y":2432192},{"x":27,"y":2470840},{"x":28,"y":2613288},{"x":29,"y":2657380},{"x":30,"y":2701436},{"x":31,"y":2836300},{"x":32,"y":2927888},{"x":33,"y":2991984},{"x":34,"y":3122532},{"x":35,"y":3186728},{"x":36,"y":3325728},{"x":37,"y":3374916},{"x":38,"y":3466520},{"x":39,"y":3526248},{"x":40,"y":3669668},{"x":41,"y":3786828},{"x":42,"y":3897588},{"x":43,"y":3939056},{"x":44,"y":4004100},{"x":45,"y":4145484},{"x":46,"y":4186316},{"x":47,"y":4272588},{"x":48,"y":4412588},{"x":49,"y":4455260},{"x":50,"y":4546204},{"x":51,"y":4630096},{"x":52,"y":4804488},{"x":53,"y":4822656},{"x":54,"y":5041424},{"x":55,"y":4991048},{"x":56,"y":5084680},{"x":57,"y":5180152},{"x":58,"y":5311816},{"x":59,"y":5401792},{"x":60,"y":5481372},{"x":61,"y":5549284},{"x":62,"y":5619816},{"x":63,"y":5852820},{"x":64,"y":5808400},{"x":65,"y":5987260},{"x":66,"y":5983352},{"x":67,"y":6120780},{"x":68,"y":6167040},{"x":69,"y":6302728},{"x":70,"y":6366144},{"x":71,"y":6588200},{"x":72,"y":6615936},{"x":73,"y":6706208},{"x":74,"y":6748780},{"x":75,"y":6891868},{"x":76,"y":6925488},{"x":77,"y":7012792},{"x":78,"y":7120796},{"x":79,"y":7299360},{"x":80,"y":7296544},{"x":81,"y":7428624},{"x":82,"y":7516820},{"x":83,"y":7543120},{"x":84,"y":7656476},{"x":85,"y":7829464},{"x":86,"y":7928592},{"x":87,"y":7979604},{"x":88,"y":8142392},{"x":89,"y":8330908},{"x":90,"y":8460796},{"x":91,"y":8595044},{"x":92,"y":8624632},{"x":93,"y":8712116},{"x":94,"y":8793540},{"x":95,"y":8899768},{"x":96,"y":8994840},{"x":97,"y":9088952},{"x":98,"y":9188436},{"x":99,"y":9297124},{"x":100,"y":9386732},{"x":101,"y":9484952},{"x":102,"y":9584348},{"x":103,"y":9660952},{"x":104,"y":9771560},{"x":105,"y":9870120},{"x":106,"y":9953316},{"x":107,"y":10040380},{"x":108,"y":10141716},{"x":109,"y":10229720},{"x":110,"y":10396028},{"x":111,"y":10475832},{"x":112,"y":10385456},{"x":113,"y":10217096},{"x":114,"y":10361688},{"x":115,"y":10446028},{"x":116,"y":10708960},{"x":117,"y":10754792},{"x":118,"y":10784140},{"x":119,"y":10852856},{"x":120,"y":10897668},{"x":121,"y":10990880},{"x":122,"y":11238408},{"x":123,"y":11134144},{"x":124,"y":11272044},{"x":125,"y":11505052},{"x":126,"y":11585644},{"x":127,"y":11532824},{"x":128,"y":11677372},{"x":129,"y":11764380},{"x":130,"y":11914468},{"x":131,"y":11969392},{"x":132,"y":12053436},{"x":133,"y":12085912},{"x":134,"y":12168724},{"x":135,"y":12342744},{"x":136,"y":12467608},{"x":137,"y":12452384},{"x":138,"y":12544420},{"x":139,"y":12838456},{"x":140,"y":12734308},{"x":141,"y":12802660},{"x":142,"y":13076516},{"x":143,"y":13008248},{"x":144,"y":13134864},{"x":145,"y":13247752},{"x":146,"y":13403888},{"x":147,"y":13465652},{"x":148,"y":13429608},{"x":149,"y":13875892},{"x":150,"y":14050188},{"x":151,"y":14171924},{"x":152,"y":14225348},{"x":153,"y":14377556},{"x":154,"y":14007540},{"x":155,"y":14071928},{"x":156,"y":14242128},{"x":157,"y":14362204},{"x":158,"y":14655140},{"x":159,"y":14439332},{"x":160,"y":14603608},{"x":161,"y":14656020},{"x":162,"y":14732040},{"x":163,"y":14799296},{"x":164,"y":15067536},{"x":165,"y":15120360},{"x":166,"y":15149740},{"x":167,"y":15324632},{"x":168,"y":15280844},{"x":169,"y":15416060},{"x":170,"y":15575888},{"x":171,"y":15549680},{"x":172,"y":15705732},{"x":173,"y":15764976},{"x":174,"y":16126112},{"x":175,"y":15984840},{"x":176,"y":16024088},{"x":177,"y":16256384},{"x":178,"y":16212152},{"x":179,"y":16399104},{"x":180,"y":16525280},{"x":181,"y":16445988},{"x":182,"y":16535152},{"x":183,"y":16722036},{"x":184,"y":16734236},{"x":185,"y":17419852},{"x":186,"y":17416584},{"x":187,"y":17531748},{"x":188,"y":17653992},{"x":189,"y":17681420},{"x":190,"y":17935964},{"x":191,"y":17946732},{"x":192,"y":18035304},{"x":193,"y":18102864},{"x":194,"y":18191548},{"x":195,"y":18293248},{"x":196,"y":18403784},{"x":197,"y":18429000},{"x":198,"y":17934464},{"x":199,"y":18052324},{"x":200,"y":18218808},{"x":202,"y":18337092},{"x":204,"y":18877388},{"x":206,"y":18762404},{"x":208,"y":19209312},{"x":210,"y":19423100},{"x":212,"y":19407996},{"x":214,"y":19559148},{"x":216,"y":19768848}],"kde":[95496,109116,90172,90288,90412,90328,90288,90476,90300,90580,90728,90376,90372,90360,90624,90472,90668,90524,90500,90376,90096,90304,90440,90252,90676,90368,90212,90296,90480,90412,90616,90456,90804,90796,90420,90364,90388,90432,90624,90400,90424,94252,90680,90488,90384,90608,90656,90132,109228,94156,93856,109512,90232,90684,90524,90520,90328,90504,90452,90688,90532,90328,90380,90532,90268,90388,90576,90484,90204,90404,90244,90140,90176,90408,90280,90428,90344,90456,90488,90368,90364,90544,90748,90320,93412,90924,90448,90608,90540,90392,90324,90664,90700,90312,108328,93452,93804,93788,107228,90092,90592,90244,90400,90200,90084,90032,90240,90340,90544,90280,90284,90124,90540,90080,89960,90152,90320,90160,90520,90308,90724,90408,90476,90132,90084,90572,90108,90160,93100,90232,90336,90360,90116,90468,90532,90100,90212,90276,90256,90072,90232,90208,90112,90192,90244,90340,89932,90404,90092,90200,90480,90360,90344,90316,90256,90360,89928,90316,90420,90460,90232,90196,90436,90444,90324,89904,90388,90368,90552,90136,90080,90208,93336,90512,90584,90660,90860,90388,90472,90176,90260,90356,90356,90600,90144,90640,90452,90336,90224,90472,90276,90284,90488,90192,90488,90588,90308,90464,90332,90512,120364,94196,93868,93800,93684,94224,93968,93764,94204,93968,93916,93792,94104,93792,93456,97160,94020,93984,94220,93840,94064,94056,93756,93768,94056,94292,93952,93888,93828,94104,93928,93696,93636,93888,93820,93636,93860,94280,93780,94140,93992,94256,93576,93904,94120,93836,93616,93720,97028,94420,94228,107500,90228,90196,90360,90008,90284,90232,93660,90612,90468,90508,90484,90320,90544,90188,90452,90432,89908,90128,90384,90136,90192,90112,90628,90524,90208,90324,90300,90088,90156,90104,90164,90540,90380,90248,90088,90128,90284,90280,90300,90316,90156,90056,90292,90244,90264,89928,90280,90100,90360,90100,92984,90056,90188,90448,90132,90084,90424,90140,90568,90352,90312,90316,90384,90588,90292,90452,90708,90400,90432,90348,90632,90692,90572,90888,90912,90756,90664,90512,90444,90332,90552,90612,90476,90664,90492,90672,90224,90560,90504,90652,90224,90120,90376,90312,93200,110936,93452,93952,106888,90612,90664,90480,90528,90552,90584,90500,90496,90140,90168,90712,90296,90588,90384,90248,90284,90804,90408,90228,90252,90592,90564,90096,90408,90416,90304,90608,90548,90744,90444,90468,90420,90116,90468,90200,90468,90572,90236,90424,92944,90204,90588,90040,90024,90352,90296,90216,89960,90384,90244,90220,90052,90324,90388,90028,90316,90252,90176,90420,90236,90424,90148,90656,90760,90248,90096,90284,90128,90120,90500,90404,90256,90196,90244,90096,90120,90380,90060,90028,90176,90120,90160,90304,93340,90200,90324,90488,90800,90528,90480,90384,91184,90344,90424,90456,90092,91036,90500,90276,90436,90148,90696,90616,90304,90400,90612,90628,90284,90464,90552,91768,90524,90496,90680,90604,94532,91028,90268,90196,90588,92276,90676,90208,90392,90536,91840,90776,100992,90716,90244,90752,110644,93624,93964,108484,90320,90336,90732,90204,90224,90620,90456,90564,90204,90448,90680,90416,90088,90392,91856,90576,90240,90524,90548,91816,90724,90444,90188,90252,91820,90636,90188,90696,90592,91680,90572,90264,90412,90248,90604,93916,90504,111008,93956,94464,108272,90040,90236,90340,90376,90168,90004,90244,107896,93996,93616,109992,90332,92956,90296,90344,90348,90216,91944,90736,90340,90280,90100,91868,90844,90404,90316,90208,91876,90600,90300,90304,90632,90572,90084,90168,90516,90212,94056,90200,89784,90316,90256,90548,90332,90560,90184,90224,90572,90264,90436,90300,91532,90396,90364,90344,90176,92660,90768,90360,90472,90340,91776,90764,90392,90276,90148,91660,90548,89744,90300,90516,90488,90208,108560,93928,93992,108500,90024,90664,90452,93376,90744,90472,90456,90368,90052,90648,90352,90624,90028,91780,90288,90204,90232,90452,92392,90876,90264,90332,90368,92576,90784,90504,90912,90580,91784,90740,90656,90640,90324,90572,90192,90276,90264,90280,91084,90804,90616,90368,90636,90992,90332,90212,90264,93180,90952,90196,90524,90584,90040,90424,90160,90428,90480,91724,90504,90152,90232,90104,91512,90776,90136,89936,89952,91544,90584,90368,89952,89856,90244,90368,89992,90224,90448,90644,90156,90084,90308,90360,90752,90528,90420,90552,90436,90456,89888,90320,90144,93548,90848,90384,90268,90412,91940,90604,90256,90308,90432,91676,90988,90344,90284,90056,91732,90528,90200,90420,90456,90776,90360,90152,90156,90472,90800,90188,90300,90392,90144,90128,90024,90456,90296,90372,90608,90036,90392,90068,90044,90744,90740,90444,90460,95528,91512,90312,90124,108808,95420,94220,109560,89892,90080,92088,90444,89964,89912,89944,90364,90224,90064,90688,90500,90484,90108,90448,90248,90184,90644,90276,90276,90376,90528,90764,90444,90476,90388,90384,90880,90368,90420,90176,91400,90360,90224,90232,90176,95276,90448,89648,89984,89952,91616,90376,90112,90260,90344,90492,90444,90320,90284,90592,90720,90336,90312,90648,90480,90380,90328,90360,90332,90164,90572,90544,90192,90264,90164,90500,90612,90320,90448,91848,90916,90312,90320,90604,92120,90756,90596,90700,90608,115208,94048,110124,90352,90384,93232,90000,90580,90180,90136,90708,90688,90476,90472,90604,90824,90192,89936,90180,90188,90568,90472,90172,90280,90492,90604,90088,90596,90564,91560,90724,90204,90360,90488,92032,90828,90412,90568,90312,91948,90868,90548,90124,93644,92436,90108,90424,90372,90500,91000,90200,90312,90404,90520,90632,90040,90400,90480,90332,90784,108640,93672,93880,94072,94608,94096,94352,94668,96840,94928,94824,94492,95368,97004,95604,94944,94940,94304,99992,94712,94820,94616,94584,97076,94504,98980,94276,94368,94404,94540,94540,94012,94280,94012,94208,93664,93692,94268,94280,93884,94156,94196,94472,95016,94600,95080,94652,97584,94884,94124,94696,94408,96300,95144,95272,94624,94848,98208,95100,94772,94768,93988,97092,95336,94744,93988,94144,100884,94588,94320,94304,94232,94584,94108,94024,94348,94388,94416,94332,94724,93920,94328,94576,94272,94156,94240,96720,94736,94320,94380,94812,99460,95984,94748,95296,94480,97196,95724,94152,94468,94152,96744,96256,94640,94220,95016,94520,94944,94568,100368,96732,94260,93932],"result":{"estimate":92049.00695184559,"r_square":0.9993116495399473}},{"name":"find/hashtbl","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":210,"time":2096938605},"dataset":[{"x":1,"y":104392},{"x":2,"y":187100},{"x":3,"y":277132},{"x":4,"y":367820},{"x":5,"y":458300},{"x":6,"y":554588},{"x":7,"y":650584},{"x":8,"y":739704},{"x":9,"y":833240},{"x":10,"y":916656},{"x":11,"y":1008212},{"x":12,"y":1101396},{"x":13,"y":1193212},{"x":14,"y":1274540},{"x":15,"y":1378448},{"x":16,"y":1473260},{"x":17,"y":1555540},{"x":18,"y":1656984},{"x":19,"y":1734776},{"x":20,"y":1834540},{"x":21,"y":1925136},{"x":22,"y":2013416},{"x":23,"y":2103164},{"x":24,"y":2193912},{"x":25,"y":2281296},{"x":26,"y":2376472},{"x":27,"y":2462696},{"x":28,"y":2567496},{"x":29,"y":2653652},{"x":30,"y":2772288},{"x":31,"y":2831032},{"x":32,"y":2960388},{"x":33,"y":2916144},{"x":34,"y":3008884},{"x":35,"y":3097532},{"x":36,"y":3278204},{"x":37,"y":3326664},{"x":38,"y":3314048},{"x":39,"y":3462520},{"x":40,"y":3785292},{"x":41,"y":3951072},{"x":42,"y":3942784},{"x":43,"y":3873548},{"x":44,"y":4060100},{"x":45,"y":4035108},{"x":46,"y":4303276},{"x":47,"y":4154056},{"x":48,"y":4423456},{"x":49,"y":4519472},{"x":50,"y":4470908},{"x":51,"y":4545028},{"x":52,"y":4765120},{"x":53,"y":4763048},{"x":54,"y":4852616},{"x":55,"y":4987956},{"x":56,"y":5054480},{"x":57,"y":5109584},{"x":58,"y":5134176},{"x":59,"y":5365960},{"x":60,"y":5418432},{"x":61,"y":5444076},{"x":62,"y":5583908},{"x":63,"y":5634148},{"x":64,"y":5777568},{"x":65,"y":5723460},{"x":66,"y":5906288},{"x":67,"y":6052100},{"x":68,"y":6135680},{"x":69,"y":6150328},{"x":70,"y":6292128},{"x":71,"y":6279664},{"x":72,"y":6468340},{"x":73,"y":6668968},{"x":74,"y":6583648},{"x":75,"y":6634616},{"x":76,"y":6765040},{"x":77,"y":6933148},{"x":78,"y":7058564},{"x":79,"y":7203184},{"x":80,"y":7224412},{"x":81,"y":7260524},{"x":82,"y":7341780},{"x":83,"y":7342284},{"x":84,"y":7686504},{"x":85,"y":7517324},{"x":86,"y":7678476},{"x":87,"y":7824136},{"x":88,"y":7948980},{"x":89,"y":7971648},{"x":90,"y":7945164},{"x":91,"y":8135100},{"x":92,"y":8326072},{"x":93,"y":8355556},{"x":94,"y":8365884},{"x":95,"y":8403236},{"x":96,"y":8469780},{"x":97,"y":8717676},{"x":98,"y":8958652},{"x":99,"y":8955756},{"x":100,"y":8796068},{"x":101,"y":8991368},{"x":102,"y":9095676},{"x":103,"y":9484584},{"x":104,"y":9613520},{"x":105,"y":9370420},{"x":106,"y":9548840},{"x":107,"y":9707408},{"x":108,"y":9847540},{"x":109,"y":9806268},{"x":110,"y":9694348},{"x":111,"y":10146952},{"x":112,"y":10190456},{"x":113,"y":10167524},{"x":114,"y":10386248},{"x":115,"y":10697704},{"x":116,"y":10387744},{"x":117,"y":10512684},{"x":118,"y":10537452},{"x":119,"y":10679772},{"x":120,"y":10665968},{"x":121,"y":10767816},{"x":122,"y":11092944},{"x":123,"y":11366468},{"x":124,"y":11709356},{"x":125,"y":11521228},{"x":126,"y":11514280},{"x":127,"y":11643804},{"x":128,"y":11682528},{"x":129,"y":11800124},{"x":130,"y":11855688},{"x":131,"y":11922968},{"x":132,"y":12073816},{"x":133,"y":12158692},{"x":134,"y":12232804},{"x":135,"y":12355524},{"x":136,"y":12446800},{"x":137,"y":12557156},{"x":138,"y":12694444},{"x":139,"y":12845516},{"x":140,"y":13003124},{"x":141,"y":12995924},{"x":142,"y":12643984},{"x":143,"y":12784380},{"x":144,"y":12770928},{"x":145,"y":12806728},{"x":146,"y":12909048},{"x":147,"y":13158592},{"x":148,"y":13207672},{"x":149,"y":13046292},{"x":150,"y":13264504},{"x":151,"y":13267732},{"x":152,"y":13461928},{"x":153,"y":13925612},{"x":154,"y":13986292},{"x":155,"y":14296628},{"x":156,"y":14469488},{"x":157,"y":14662792},{"x":158,"y":14142068},{"x":159,"y":14344596},{"x":160,"y":14357724},{"x":161,"y":14335332},{"x":162,"y":14442180},{"x":163,"y":14451108},{"x":164,"y":14803556},{"x":165,"y":14881256},{"x":166,"y":14944952},{"x":167,"y":14919268},{"x":168,"y":15185668},{"x":169,"y":15426800},{"x":170,"y":15236672},{"x":171,"y":15359372},{"x":172,"y":15646056},{"x":173,"y":15297596},{"x":174,"y":15414152},{"x":175,"y":15869972},{"x":176,"y":15755992},{"x":177,"y":15904036},{"x":178,"y":15789764},{"x":179,"y":16142992},{"x":180,"y":16148780},{"x":181,"y":16241472},{"x":182,"y":16388100},{"x":183,"y":16464000},{"x":184,"y":16465176},{"x":185,"y":16608760},{"x":186,"y":16434096},{"x":187,"y":16732596},{"x":188,"y":16782404},{"x":189,"y":16820716},{"x":190,"y":16910312},{"x":191,"y":17039692},{"x":192,"y":17034740},{"x":193,"y":17173644},{"x":194,"y":17504624},{"x":195,"y":17433920},{"x":196,"y":17760844},{"x":197,"y":18059620},{"x":198,"y":17719364},{"x":199,"y":17887652},{"x":200,"y":17724840},{"x":202,"y":17930480},{"x":204,"y":18103524},{"x":206,"y":18301412},{"x":208,"y":18875584},{"x":210,"y":19278768},{"x":212,"y":19415668},{"x":214,"y":19501944},{"x":216,"y":20183524},{"x":218,"y":19934632},{"x":220,"y":20277944}],"kde":[91420,90932,90752,108156,91584,90812,90988,90344,90964,90852,90944,91004,90964,91900,91200,90812,90928,90876,91420,90740,91376,91380,91072,91668,91172,91360,91696,92684,92864,91536,91360,91400,91712,91868,91652,92024,92152,91204,90816,91632,92968,91556,92056,92452,92284,91856,91924,110132,91176,91632,91388,91080,91264,93284,94912,91388,91792,90460,91036,90896,90156,91456,91228,91644,91688,90888,91552,91160,91768,91456,90940,90792,91104,96292,91172,91784,91272,91408,91448,91888,92456,96572,111632,94980,94760,95436,110524,91864,91052,107612,93860,91008,91332,91000,91104,91192,91108,91248,92116,91248,91132,91632,91408,90616,91412,91660,91800,91412,91764,91092,91060,91380,90748,91252,91920,92204,91812,92132,92528,92528,92496,91800,92488,92536,92524,92492,91824,92604,92364,92200,92056,91844,92468,110596,91104,91192,91332,91188,90876,91364,91772,92252,91752,91544,91008,91412,91088,92116,91096,91284,91232,92128,111864,94984,111000,91360,92356,92284,92332,91676,91620,91356,91888,91760,92748,91372,92164,91908,91132,91688,93300,91940,91360,91256,91976,104172,97840,90652,90712,91304,90992,90528,91200,91900,91424,91224,90940,91964,91272,92252,91052,91680,91528,91748,91488,91960,91796,91848,93164,91924,91216,92172,91044,92004,91472,91696,90712,91432,91616,90992,92716,91828,92516,91824,91880,93400,92612,92296,92636,112176,91656,91368,91984,91288,91576,92100,91404,91432,91656,92024,91504,92040,90976,91656,91128,91348,90424,91204,91440,91004,91328,91184,91196,91728,91916,91996,92400,91644,91952,91632,91416,91796,92808,92620,91636,91800,92364,92160,92092,92152,93260,91248,109992,91168,91380,90520,91404,91320,91920,91376,91100,90944,91620,91232,91020,91032,90616,91364,91400,92260,91400,92548,91672,91428,91912,92308,91984,91640,92048,92080,90788,91840,91404,91716,91608,92092,92448,93260,92360,91908,91740,91104,91900,91500,91484,108412,91904,91824,91432,91428,90700,91176,91216,90716,91960,91636,92016,91668,92164,92308,91060,91356,91348,90552,91712,91260,91164,90636,91936,90724,92200,91788,91340,91860,91808,90916,93000,92352,91652,91396,91668,91796,91664,91640,92508,92236,92184,91824,91352,108088,91216,90956,91584,91620,91604,91108,91168,91384,91372,90904,91720,91580,92388,91364,92124,91728,92512,91408,91784,92848,91644,91640,91648,92684,91896,91936,91276,91576,91984,91848,91768,92620,92020,92912,91632,91312,91560,91244,91212,91420,92432,92360,110684,91168,90264,91876,92364,91200,91680,91544,92080,91724,91792,92400,91572,92068,90976,90776,91616,91684,91992,92112,91012,90896,91508,91288,91424,92008,91432,90588,91300,91196,90960,91348,90248,91104,91156,91616,92644,92252,92056,91660,91448,91852,92216,110332,92060,91284,91544,91008,91208,91844,91296,91024,91520,91608,91100,91532,91260,90692,91672,91772,91348,91192,91692,95040,91540,90572,90796,90612,92716,91840,92840,91984,91648,91484,91016,91476,90960,91596,91092,91284,92192,90952,91716,92092,91872,91692,92456,111300,92172,91056,91752,91668,91356,91456,91584,92132,91016,90816,91628,90904,90596,91164,91184,91928,92000,91172,91232,91808,92128,92260,91920,92636,92160,92452,90760,93004,91384,91632,91796,92024,91380,90900,92516,93108,92728,92148,91080,92208,91832,92112,109084,91152,91148,91632,91040,90620,90956,91292,90840,90684,91384,91668,90900,91764,91968,91392,92668,91400,92048,92536,91140,90852,91656,91496,90648,92512,91152,92456,91444,96356,92152,115684,94716,95344,95104,94688,94540,94728,96180,96140,108324,92016,123412,99764,94648,109452,90996,90908,91036,90840,108892,95076,95308,109560,92236,92352,91592,91108,91576,91448,91584,91420,92704,93124,92152,91828,92636,91452,91528,92376,92608,92916,91680,92292,91936,92488,91972,92112,92080,92148,92592,111420,95704,96444,111412,94940,94564,109164,91384,91416,91372,90676,90272,90712,91664,91356,91236,91560,92368,90832,92408,92428,92144,91112,92072,91376,92020,91652,91152,92148,92104,91968,92584,92872,91980,92456,91980,90876,91616,91972,92276,91840,93840,91220,92688,92096,92412,129120,99080,94724,110020,90876,92264,91712,91728,91712,90880,91076,91000,92112,91472,91676,91048,91964,91244,91184,93600,91964,92592,92304,92856,91672,91064,91112,91444,91920,91168,92412,91576,92504,93280,93216,92196,91432,92100,92048,91696,91316,92660,92176,111008,91316,90896,90704,90708,91612,92156,91592,91428,127036,90836,92296,91900,91020,92440,91600,91240,91620,92228,91964,92504,92620,92316,91892,91704,91100,92340,91272,91028,91320,91544,92392,92196,92216,92804,92812,92664,91824,92964,92592,91932,92076,91888,106716,92016,91496,90904,91780,91420,91912,111244,95292,94124,94348,94692,107228,91992,91284,91976,91564,91440,91376,91892,91368,91128,90812,91364,109756,105048,96912,95444,100120,111928,91792,92600,91192,91488,90824,90628,91208,90848,91388,91280,91504,90572,133640,95148,94408,107964,91040,90752,91256,91644,90944,112676,95320,94316,109580,91372,91064,90736,91532,91168,90712,90852,91052,91632,90780,90808,91224,91488,90984,91408,90912,92360,92116,92340,92144,91212,92912,91164,92096,91820,92400,92336,91884,91632,126608,96244,94028,110040,90868,91196,91084,90968,91300,91196,90896,90944,90544,90964,90768,90804,91204,90908,90996,90940,91236,90812,93308,90980,91576,92092,91056,91680,91388,90920,91336,90912,91940,92240,91740,91100,92244,92216,90940,91636,92096,91876,91396,105324,92184,109944,109676,91200,91240,90596,91328,90952,91416,91900,91564,90816,92156,91748,91748,91340,91464,90860,91712,91780,92056,92364,92144,91952,91524,91752,91812,92188,92020,91924,92132,92272,92944,92080,91736,91116,92392,92840,92356,92688,92020,92032,110712,91888,91752,91364,91716,92008,92968,91620,92144,92264,94428,93352,93216,93772,92448,92332,91560,92048,92200,91880,90508,110292,95288,95320,110580,91792,92272,91852,91676,91428,91492,92616,91980,109008,97864,95944,97108,107752,92136,91276,91380,92396,111192,96592,90676,91052,91376,91672,91472,91176,91316,91764,91788,91216,91112,91832,91688,91276,92736,91884,91420,91472,90780,91252,91972,91124,91800,91688,91944,91740,91256,92432,91984,91528,91540,92644,92712,92300,92300,93156,91248,90752,91092,90804,90472,90452,103632,91140,91156,90604,90728,90296,91256,90844,90504],"result":{"estimate":90149.56758869048,"r_square":0.9990898140659992}}]}


if (contents == null)
    d3.json("outputs.json", render);
else
    render(contents);
}

  </script>

</body>
</html>
