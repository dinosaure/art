<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/d3-simple-slider"></script>
  <script src="https://unpkg.com/simple-statistics@7.0.2/dist/simple-statistics.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
  <link href="style.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <style>
    *{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body{
    width: 100%;
    height: 100%;
    font-family:Helvetica Neue,metric,sans-serif;
    text-rendering: optimizeLegibility;
}

.center{
    width: 500px;
    margin:auto
}

text{
    font-family: metric,sans-serif;
}

.ml {
    text-align: left
}

svg {
    overflow: hidden;
    margin: auto
}

.axis line, .axis path{
    stroke: #2E3532;
    stroke-width:1px;
}

.axisTitle, .axis text{
    fill: #2E3532;
    font-size:12px;
}

.background {
    fill: #FBFBFB;
    stroke: #2E3532;
}

.axisTitle, .chartTitle{
    text-anchor: middle
}


.ytitle {
    text-anchor: middle;
    transform: rotate(90deg)
}

.warningtext{
    text-anchor: center;
    fill: #F06449;
}

.regLine {
    stroke: #F06449;
    stroke-width:2px;
    opacity:0.7
}

.circle {
    fill: #4ECDC4;
    stroke: #292f36;
    stroke-width:0.3px
}

table {
    margin:auto;
    text-align:left;
    border-spacing: 15px 5px;
    border: 1px solid #2E3532
}

th {
    text-align: center;
    color:#F06449
}


tr {
    fill: #2E3532;
    font-size:10px
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: auto;
  background-color: #F06449;
  color: #FFFFFF;
  text-align: center;
  border-radius: 10px;
  padding: 0 5px 0 5px;
  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}
.bar {
    fill: #4ECDC4;
    stroke:#292f36;
}
.bar:hover {
    fill: #F06449;
    stroke:#292f36;
    stroke-width:1px;
}

.radio {
    margin: auto;
    width : 200px;
}

.wrapper {
    display: grid;
    margin: 50px 50px 50px 50px;
    gap: 10px 20px;
    grid-auto-rows: minmax(20px, auto);
    text-align: center;
    place-items: center;
}

.mainTitle, .summarizeTitle {
    height:30px;
    width: auto;
    border-radius: 2px;
    padding: 0 45px 0 45px;
    border-style: solid;
    border-width:1px;
    box-shadow: 2px 2px 1px rgba(0,0,0,0.1);
    color:  #2E3532;
    background: #FBFBFB;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.slidecontainer{
    width: 50%;
}

  </style>
</head>
<body>

  <script type="text/javascript">
    // structure of JSON
// { xLabel: string,
//   yLabel: string,
//   series: [ tests ] }
//
// tests := { name: string,
//            description: { start : int, sampling: float, stabilize: bool,
//                           quota: float, limit: int, instances: [string],
//                           samples: int, time : float}
//            dataset: [ point ],
//            kde : [ v: float ] (optional)
//            result: { estimate: float, r_square: float (optional) } }
//
// point := { x : double,
//            y : double }
//
// xLabel and yLabel are the same for any tests
window.onload = function () {

const wsvg = 600;
const hsvg = 400;
const wslider = 200;
const hslider = 50;
const margin = {left:50,right:50,top:20,bottom:50};
const dotSize = 1.5;
const innerW = wsvg-(margin.left+margin.right);
const innerH = hsvg-(margin.top+margin.bottom);

const marginbar = {left:150,right:150,top:50,bottom:50};
const wbar = 900;
const innerWbar = wbar-(marginbar.left+marginbar.right);

const SQRT_2PI = Math.sqrt(2 * Math.PI);

// Main function : place containers and call plot functions.
function render(inputs) {
    inputs.series.forEach(
	function(serie) {
	    serie.dataset.forEach(
		function(d) {
		    d.x = +d.x;
		    d.y = +d.y;
		});}
    );

    // First step : check if there is no kde/histogram data at all in
    // the benchmarks, in which case, we want to reduce our layout to
    // one column.
    let nonempty_kde = false;
    inputs.series.forEach(function (serie) {
	if ('kde' in serie) {
	    nonempty_kde = nonempty_kde || true;} });
    const nb_col = nonempty_kde ? 2 : 1;

    // ************************************************ //
    //              Layout of the page                  //
    // ************************************************ //
    // + a summarize bar graph on top
    // + one section for each benchmark which includes
    //     * 1 title
    //     * 1 linear regression graph and its title and information table
    //     * if kde data are available a histogram/kde graph with its control panel.
    //
    // If none of the benchmarks has kde data, the layout is the same
    // but with only one column (no hist/kde graphs).
    //
    //
    //              c1:        c2:
    //
    // r1:            *title*
    //           ___________________
    // r2:      |   summarize bar   |
    //          |___________________|
    //
    // r3:           *title-1*
    //
    // r4:        *title*   *radio*
    //           _______     _______
    // r5:      | lr-1  |   | kde-1 |
    //          |_______|   |_______|
    //
    // r6:      *infos-1*   *slider-1*
    // ..
    // r(4i+3):       *title-i*
    //
    // r(4i+4):  *title*     *radio*
    //           _______     _______
    // r(4i+5): | lr-i  |   | kde-i |
    //          |_______|   |_______|
    //
    // r(4i+6): *infos-i*   *slider-i*
    //
    // etc ..

      const main = d3.select("body")
	  .append("div")
	    .attr("class", "wrapper")
	    .style("grid-template-columns", (nonempty_kde ? "repeat(2,"+wsvg+"px)" : "900px"))
	    .attr("id", "main");

    // ************************************************ //
    //              Summarize bar graph                 //
    // ************************************************ //

    // Title
    main.append("div")
   	  .style("grid-row", "1")
      	.style("grid-column", "1 / "+(nb_col+1))
  	  .attr("class", "summarizeTitle")
  	.text("Benchmarks summary");

    // Bar graph
    let bar_container = main
	.append("div")
   	  .style("grid-row", "2")
      	  .style("grid-column", "1 / "+(nb_col+1))
	  .attr("id", "bar");
    plot_summarize_bar_graph(bar_container, inputs);


    // ************************************************ //
    //              Layout for lr/kde graphs            //
    // ************************************************ //

    // Benchmark titles
    const titles = main
	  .selectAll(".mainTitle")
	  .data(inputs.series)
	  .enter()
	  .append("div")
	    .attr("id", (data, i) => "title-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+3))
      	    .style("grid-column", "1 / "+(nb_col+1))
  	    .attr("class","mainTitle")
	  .append("text")
  	    .attr("x", wsvg)
  	    .attr("y", margin.top-10)
            .text((data, i) => "#"+data.name);

    // Linear regression graph titles
    const titles_lr = main
	  .selectAll("#title_lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("id",  "title_lr")
   	    .style("grid-row", (data,i) =>""+(4*i+4))
   	    .style("grid-column", "1")
	  .append("text")
  	    .attr("class","chartTitle")
  	    .text("Linear regression");

    // Containers for linear regression graphs
    const lr_graphs = main
	  .selectAll(".lr")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr")
	    .attr("id", (data, i) => "linearRegression-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+5))
   	  .style("grid-column", "1");

    // Containers for linear regression info tables
    const lr_info = main
	  .selectAll(".lr-info")
	  .data(inputs.series)
	  .enter()
	  .append("div")
            .attr("class", "lr-info")
	    .attr("id", (data, i) => "lr-info-"+i)
   	    .style("grid-row", (data,i) =>""+(4*i+6))
            .style("grid-column", "1");

    let radio_div, kde_graphs, kde_controler;
    if (nonempty_kde) {
	// Containers for radio buttons to choose between histogram/kde plots
	radio_div = main
	      .selectAll(".radio_div")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class",  "radio")
	      .attr("id", (d, i) => "radio_div"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+4))
   	      .style("grid-column", "2");

	// Containers for kde/hist graph
	kde_graphs = main
	      .selectAll(".kde")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde")
	      .attr("id", (data, i) => "histKde-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+5))
   	      .style("grid-column", "2");

	// Containers for kde/hist controlers
	kde_controler = main
	      .selectAll(".kde-controler")
	      .data(inputs.series)
	      .enter()
	      .append("div")
              .attr("class", "kde-controler")
	      .attr("id", (data, i) => "kde-controler-"+i)
   	      .style("grid-row", (data,i) =>""+(4*i+6))
              .style("grid-column", "2");
    }

    // ************************************************ //
    //          Linear regression graph                 //
    // ************************************************ //
    lr_graphs.each( function(serie, i) {
	//Curves for each input
	const xMin = 0;
	const xMax = d3.max(serie.dataset, d => d.x);
	const yMin = 0;
	const yMax = d3.max(serie.dataset, d => d.y);

	// Define x axis
	const xScale = d3.scaleLinear()
  	      .domain([xMin,xMax])
  	      .range([0,innerW])
  	      .nice();
	const xAxis = d3.axisBottom()
  	      .scale(xScale)
  	      .ticks(8, "s");
	// "s" = number format such as 1000 -> 1k

	// Define y axis
	const yScale = d3.scaleLinear()
  	      .domain([yMin,yMax])
  	      .range([innerH,0])
  	      .nice();
	const yAxis = d3.axisLeft()
  	      .scale(yScale)
  	      .ticks(8, "s");

	// Svg
  	const plot = d3.select(this)
	    .append("svg")
  	      .attr("width",wsvg)
  	      .attr("height",hsvg);
	// Color background
	plot.append("rect")
  	    .attr("x",margin.left)
  	    .attr("y",margin.top)
  	    .attr("width",innerW)
  	    .attr("height",innerH)
  	    .attr("class","background axis");
	// Plot axis
	plot.append("g")
  	    .attr("transform",
	 	  "translate("+margin.left+","
	 	  +(hsvg-margin.bottom)+")")
	    .attr("class", "axis")
  	    .call(xAxis);
	plot.append("g")
  	    .attr("transform",
	  	  "translate("+margin.left+","
		  +margin.top+")")
	    .attr("class", "axis")
  	    .call(yAxis);
	// Print axis titles
	plot.append("text")
	    .attr("class", "axisTitle")
	    .attr("x", wsvg/2)
	    .attr("y", hsvg-10)
	    .text(inputs.xLabel);
	plot.append("text")
	    .attr("class", "axisTitle ytitle")
	    .attr("transform-origin", 0, hsvg/2)
	    .attr("x", 0)
	    .attr("y", hsvg/2)
	    .text(inputs.yLabel);

	// Plot data
	plot.append("g")
	    .attr("transform",
		  "translate("+margin.left+","
		  +margin.top+")")
  	    .selectAll("circle")
  	    .data(serie.dataset)
  	    .enter()
  	    .append("circle")
	    .attr("class", "circle")
  	    .attr("r", dotSize)
  	    .attr("cx", d => xScale(d.x))
  	    .attr("cy", d => yScale(d.y));

	// Plot linear regression line

	const xVals = serie.dataset.map((e,j) => e.x);
	const yVals = serie.dataset.map((e,j) => e.y);
	const pairs = [];
	xVals.forEach((d,i) => pairs.push([xVals[i],yVals[i]]));
	const linReg = ss.linearRegression(pairs);
	const linRegLine = ss.linearRegressionLine(linReg);
	let line = plot
	    .append("line")
    	      .attr("transform","translate("+margin.left+","+margin.top+")")
    	      .attr("class","regLine")
    	      .attr("x1",xScale(xMin))
    	      .attr("x2",xScale(xMin))
    	      .attr("y1",yScale(linRegLine(xMin)))
    	      .attr("y2",yScale(linRegLine(xMin)));
	line.transition().duration(1000).delay(2000)
    	      .attr("x2",xScale(xMax))
    	      .attr("y2",yScale(linRegLine(xMax)));

	// Add text boxes
	//const meanX = ss.mean(xVals).toFixed(0);
	//const meanY = ss.mean(yVals).toFixed(2);
	//const varX = ss.sampleVariance(xVals).toFixed(0);
	//const varY = ss.sampleVariance(yVals).toFixed(1);
	//const corCoeff = ss.sampleCorrelation(xVals,yVals).toFixed(3);

	const lr_results = [
	    ["Linear regression line", "y = "+linReg.b.toFixed(2)+" + "+linReg.m.toFixed(3)+"x"],
	    ["Coefficient", serie.result.estimate],
	    ["R²", serie.result.r_square]
	];

	const sampling_to_string = sampling =>
              (Number.isInteger(sampling) ?  "`Linear "+sampling+"" : "`Geometric "+sampling+"");

	const format = v  => d3.format("s")(v);

	const param_benchmarks = [
	    ["LR sampling (sampling)", sampling_to_string(serie.description.sampling)],
	    ["Start (start)", serie.description.start],
	    ["Benchmark runtime (time / quota)",
	     format(serie.description.time) + " / " + format(serie.description.quota)],
	    ["Number of runs (samples)", serie.description.samples + " / " + serie.description.limit],
	    ["Stabilized GC (stabilize)", serie.description.stabilize]
	];

	const table = d3.select("#lr-info-"+i)
	      .append("table");

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Linear regression results");

	table.append("tbody")
	    .selectAll("tr")
	    .data(lr_results)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

	table.append("thead")
	    .append("tr")
	    .append("th")
	    .attr("class", "tooltip")
	    .attr("colspan", 2)
	    .attr("scope", "col")
	    .text("Benchmarks parameters")
	    .append("span")
	    .attr("class","tooltiptext")
	    .text("See [Benchmarks.stats]");

	table.append("tbody")
	    .selectAll("tr")
	    .data(param_benchmarks)
	    .enter()
	    .append("tr")
	    .selectAll("td")
	    .data(d => d)
	    .enter()
	    .append("td")
	    .text(d=>d);

    });

    // ************************************************ //
    //         Histogram and kde graphs                 //
    // ************************************************ //
    if (nonempty_kde) {
        kde_graphs.each(function (serie, i) {

	    // Svg for histogram and kde graphs
	    let pdfgraph = d3.select(this)
		.append("svg")
		.attr("id", "pdfgraph")
		.attr("width", wsvg)
		.attr("height", hsvg)
		.append("g")
		.attr("transform", "translate("+margin.left+","+margin.top+")");

	    // If there is no kde field in the data [serie], some note
	    // is written in the svg window.
	    if (!('kde' in serie)) {
		pdfgraph.append("text")
		    .attr("x", (margin.left+margin.right+wsvg)/2)
		    .attr("y", (margin.top+margin.bottom+hsvg)/2)
		    .attr("class", "warning")
		    .text("No available data");
	    } else if (d3.max(serie.kde) == d3.min(serie.kde)) {
		pdfgraph.append("text")
		    .attr("x", wsvg/2)
		    .attr("y", hsvg/2)
		    .attr("class", "warningtext")
		    .text("All data have same value.");
	    } else {
		const data = serie.kde;
		//Some default values
		const min_slider = (d3.max(data)-d3.min(data))/data.length;
		const max_slider = (d3.max(data)-d3.min(data))/30;
		let vslider = min_slider;

		//Radio buttons
		const form = d3.select("#radio_div"+i)
		      .append("form");

		form.append("input")
		    .attr("type", "radio")
		    .attr("name", "graph")
		    .attr("value", "hist"+i)
		    .attr("name", "graph")
		    .attr("checked", "checked")
		    .on("change", () => plot_chosen_graph(d3.select(this), "hist"));
		form.append("label")
		    .attr("for", "hist"+i)
		    .text("Histogram");
		form.append("input")
		    .attr("type", "radio")
		    .attr("value", "kde"+i)
		    .attr("name", "graph")
		    .on("change", () => plot_chosen_graph(d3.select(this), "kde"));
		form.append("label")
		    .attr("for", "kde"+i)
		    .text("KDE");

		//axis
		const min = d3.min(data),
		      max = d3.max(data);
		const minX = d3.max([0, min-max_slider]),
		      maxX = max+max_slider;

		//X axis is the same for both graphs (histogram and kde)
		const xscale = d3.scaleLinear()
		      .range([0, innerW])
		      .domain([minX, maxX])
		      .nice();
		const xAxis = d3.axisBottom()
		      .scale(xscale)
		      .ticks(8, "s");

		//Y axis has a different domain value between both graphs.
		//So yscale.domain() is defined individually for each plot.
		const yscale = d3.scaleLinear()
		      .range([0, innerH])
		      .nice();
		const yAxis = d3.axisLeft()
		      .scale(yscale)
		      .ticks(8, "s");

		//x value for kde graph
		const n = 1000;
		const x = Array(n);
		const xmin = d3.min(xscale.domain()),
		      xmax = d3.max(xscale.domain());
		for (let i=0; i<n; i++) { x[i] = xmin + i*(xmax-xmin)/n; }

		//Compute kde function for min bandwidth value to determine to determine
		//the max value of Y axis. Only happens one time when loading the webpage.
		const kde = kernelDensityEstimation(data, min_slider);
		const v = new Array(n);
		for (let i=0; i<n;i++){ v[i] = kde(x[i]);}
		const maxYkde = d3.max(v),
		      maxYhist = d3.max(histogram(data, max_slider, min, max));

		//background
		pdfgraph
		    .append("rect")
  		    .attr("x", 0)
  		    .attr("y", 0)
  		    .attr("width", innerW)
  		    .attr("height", innerH)
  		    .attr("class","background axis");

		// x Axis
		const gxAxis = pdfgraph
	              .append("g")
	              .attr("transform","translate(0"+","+innerH+")")
	              .attr("class", "axis")
	              .call(xAxis);

		// y Axis
		const gyAxis = pdfgraph
	              .append("g")
	              .attr("class", "axis")
	              .call(yAxis);

		// X Axis title
		pdfgraph.append("text")
		    .attr("class", "axisTitle")
		    .attr("x", innerW/2)
		    .attr("y", innerH+40)
		    .text("Estimated "+inputs.yLabel);

		plot_chosen_graph(d3.select(this), "hist");

		function plot_chosen_graph(container, choice) {


		    container.selectAll(".bar").remove();
		    container.select(".mypath").remove();
		    container.select(".ytitle").remove();

		    // Erasing control panels if it exists and initializing it
		    const control_container = d3.select("#kde-controler-"+i);
		    const slider = control_container.select("#slider-"+i);
		    const slidertitle = control_container.select("#slidertitle-"+i);
		    if (!slider.empty())  {
			slider.remove();
		    }
		    if (!slidertitle.empty())  {
			slidertitle.remove();
		    }

		    //Hist part
		    if (choice=="hist") {
			// Defined yAxis
			yscale.domain([maxYhist, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", 10)
			    .attr("y", innerH/2)
			    .text("Count");

			const barwidth = vslider;

			const update_hist =
			      plot_histogram(pdfgraph, data, barwidth, xscale, yscale);

			//slider
			control_container
			    .insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Barwidth");

			control_container
			    .insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) => {
				      if (value > 0) {
					  vslider=value;
					  update_hist(vslider);}}));
		    } else {
			//Defined yAxis
			yscale.domain([maxYkde, 0]).nice();
			yAxis.scale(yscale);
			gyAxis.call(yAxis);

			// y Axis title
			pdfgraph.append("text")
			    .attr("transform-origin", "10 "+(innerH/2))
			    .attr("class", "axisTitle ytitle")
			    .attr("x", +10)
			    .attr("y", innerH/2)
			    .text("Density");

			const bandwidth = vslider;
			const update_kde = plot_kde(pdfgraph, data, bandwidth, xscale, yscale, x);

			//slider
			control_container.insert("p")
			    .attr("align", "center")
			    .attr("id", "slidertitle-"+i)
			    .text("Bandwidth");

			control_container.insert("svg")
			    .attr("width", wsvg)
			    .attr("height", hslider)
			    .attr("id", "slider-"+i)
			    .append("g")
			    .attr("transform", "translate("+(wsvg-wslider)/2+",10)")
			    .call(d3
				  .sliderBottom()
				  .min(min_slider)
				  .max(max_slider)
				  .width(wslider)
				  .ticks(5, "s")
				  .default(vslider)
				  .fill("red")
				  .on("onchange", (value) =>
				      {if (value > 0) { vslider=value; update_kde(vslider);}}));
		    }; // end else
		}; // end function
	    }; //end else (available kde data)
	}); //end function // end each
    }; //end if



function plot_summarize_bar_graph(container, inputs) {

    const hbar = d3.min([60*inputs.series.length, hsvg]);
    const innerHbar = hbar - marginbar.top - marginbar.bottom;

    const xb = d3.scaleLinear()
	  .range([0, innerWbar])
	  .domain([0, d3.max(inputs.series, serie => serie.result.estimate)])
	  .nice();
    const yb = d3.scaleBand()
	  .range([0, innerHbar])
	  .padding(0.2)
	  .domain(inputs.series.map(serie => serie.name));
    const xbAxis = d3.axisBottom()
	  .scale(xb)
	  .ticks(8, "s");
    const ybAxis = d3.axisLeft()
	  .scale(yb);

    const bargraph =
	container.append("svg")
	.attr("width", wbar)
	.attr("height", hbar);

    // background
    bargraph.append("rect")
  	.attr("x", marginbar.left)
  	.attr("y", marginbar.top)
  	.attr("width", innerWbar)
  	.attr("height", innerHbar)
  	.attr("class", "background axis");
    // x Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+(hbar-marginbar.bottom)+")")
	.attr("class", "axis")
	.call(xbAxis);
    // x axis title
    bargraph.append("text")
	.attr("class", "axisTitle")
	.attr("x", wbar/2)
	.attr("y", hbar-10)
	.text("Estimated "+inputs.yLabel);
    // y Axis
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.bottom+")")
	.attr("class", "axis")
	.call(ybAxis);

    // Bargraph
    bargraph.append("g")
	.attr("transform","translate("+marginbar.left+","+marginbar.top+")")
	.selectAll(".bar")
   	.data(inputs.series)
	.enter()
	.append("rect")
	.attr("class", "bar")
	.attr("y", serie => yb(serie.name))
	.attr("height", yb.bandwidth)
	.attr("x", serie => 0)
	.attr("width", serie => xb(serie.result.estimate))
	.attr("fill", "#4ECDC4")
	.on("mouseover", function (serie) {
	    // Specify where to put label of text
	    bargraph.append("text")
		.attr("class", "axisTitle")
		.attr("id", "tt")
		.attr("x", wbar-200)
		.attr("y", marginbar.top-10)
		.text("Value: "+d3.format(".4s")(serie.result.estimate));
	})
        .on("mouseout", function (serie) {
	    // Select text by id and then remove
	    d3.selectAll("#tt").transition().duration("50").remove();
	});

};

// [histrogram (data, barwidth, min, max)] computes histogram
// values as follows:
// - a value [v] of [data] contributes to the bar between [u] and
// [u+barwidth] if u <= v < u+barwidth
// - the [i]th bar is between [min+i*barwidth] and [min+(i+1)*barwidth]
// - [max] is used only to determine the number of bars. It MUST be greater
// than [d3.max(data)]
function histogram(data, barwidth, min, max) {
    const nbar = Math.floor((max-min)/barwidth)+1;
    let hist = new Array(nbar);
    for (let i=0; i<nbar; i++) {
	hist[i]=0;
    }

    data.forEach(function(v) {
	const ind = Math.floor((v-min)/barwidth);
	hist[ind] ++;
    });

    let n = data.length;
    for (let i=0; i<nbar; i++) {
	hist[i] = hist[i];
    }

    return hist;
}

// [plot_histogram(container, data, bandwidth, xscale, yscale)]
// draws the histogram computes with
// [histogram(data, barwidth, d3.min(data), d3.max(data)]
// in the html element [container].
//
// Axis are already defined on [container], using [xscale] and [yscale].
//
// In addition, this function returns the update function
// that redraw the bar if called with a new barwidth.
function plot_histogram(container, data, barwidth, xscale, yscale) {
    const min = d3.min(data),
	  max = d3.max(data);
    const hist = histogram(data, barwidth, min, max);
    const sample_nb = data.length;

    const print_value = function (v) {
	container.append("text")
	    .attr("class", "axisTitle")
	    .attr("id", "tt2")
	    .attr("x", wsvg-170)
	    .attr("y", 20)
	    .text("Value: "+d3.format("d")(v)+" / "+d3.format("d")(sample_nb));};

    const rects = container
	  .selectAll(".bar")
   	  .data(hist)
	  .enter();

    rects.append("rect")
	.attr("class", "bar")
	.attr("x", (v, i) => xscale(i*barwidth+min))
	.attr("width", (v, i) => xscale(barwidth)-xscale(0))
	.attr("y", (v, i) => yscale(v))
	.attr("height", (v, i) => innerH-yscale(v))
	.on("mouseover", print_value)
        .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());

    function update_hist(nbarwidth) {
	//compute new histograph values
	const nhist = histogram(data, nbarwidth, min, max);

	const rects = container
	      .selectAll(".bar")
   	      .data(nhist);

	rects.exit().remove();

	rects.enter().append("rect").attr("class", "bar")
	    .merge(rects)
	    .attr("x", (v, i) => xscale(i*nbarwidth+min))
	    .attr("width", (v, i) => xscale(nbarwidth)-xscale(0))
	    .attr("y", (v, i) => yscale(v))
	    .attr("height", (v, i) => innerH-yscale(v))
	    .on("mouseover", print_value)
            .on("mouseout", () => d3.selectAll("#tt2").transition().duration("50").remove());
    }
    return update_hist;
};

// [kernelDensityEstimation(data, bandwith] returns the function x -> kde(x)
//    for [data]. The kernel function used is a gaussian.
function kernelDensityEstimation(X, bandwidth) {
    //gaussian constante
    const a = 1/(2*bandwidth*bandwidth);
    const b = bandwidth * SQRT_2PI;
    const gaussianKernel =
	  function (x) {
	      return Math.exp(-a * x * x) / b;
	  };

    return function (x) {
        let i = 0;
        let sum = 0;
        for (i = 0; i < X.length; i++) {
	    sum += gaussianKernel(x - X[i])/X.length;
        }
	return sum ;
    };
}

// [plot_kde(container, data, bandwidth, xscale, yscale, x)] draws
// the kde function computes with [kde(data, bandwidth)]
// for the abscisse values defined by [x], in the html element
// [container].
//
// Axis are already defined on [container], using [xscale] and
// [yscale].
//
// In addition, this function returns the update function that
// redraw the curve if called with a new bandwidth.
function plot_kde(container, data, bandwidth, xscale, yscale, x) {
    const n = x.length;
    const kde = kernelDensityEstimation(data, bandwidth);
    const density = new Array(n);

    for (let i=0; i<n;i++){
	let tmp = x[i] ;
	density[i] = [tmp, kde(tmp)];
    }

    const graph = container
	  .append('g')
	  .append("path")
	  .attr("class", "mypath")
	  .datum(density)
	  .attr("fill", "#4ECDC4")
	  .attr("opacity", ".8")
	  .attr("stroke", "#292F36")
	  .attr("stroke-width", 1)
	  .attr("stroke-linejoin", "round")
	  .attr("d",
		d3.line()
		.curve(d3.curveBasis)
		.x(d => xscale(d[0]))
		.y(d => yscale(d[1])));

    function update_kde(nbandwidth) {
	let kde = kernelDensityEstimation(data, nbandwidth);

	for (let i=0; i<n;i++){
	    density[i][1] = kde(density[i][0]);
	}

	graph.datum(density)
	    .transition()
	    .duration(50)
	    .attr("d",
		  d3.line()
		  .curve(d3.curveBasis)
		  .x(d => xscale(d[0]))
		  .y(d => yscale(d[1])));
    };

    return update_kde;
};

};


var contents = null;
contents = {"xLabel":"run","yLabel":"monotonic-clock","series":[{"name":"find/art","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":217,"time":2100152500},"dataset":[{"x":1,"y":93421},{"x":2,"y":174200},{"x":3,"y":257205},{"x":4,"y":340937},{"x":5,"y":426324},{"x":6,"y":510782},{"x":7,"y":595944},{"x":8,"y":728991},{"x":9,"y":762285},{"x":10,"y":847452},{"x":11,"y":930812},{"x":12,"y":1064806},{"x":13,"y":1116686},{"x":14,"y":1186893},{"x":15,"y":1268219},{"x":16,"y":1400192},{"x":17,"y":1435349},{"x":18,"y":1549643},{"x":19,"y":1622221},{"x":20,"y":1686673},{"x":21,"y":1823931},{"x":22,"y":1858163},{"x":23,"y":1989137},{"x":24,"y":2027173},{"x":25,"y":2119168},{"x":26,"y":2197332},{"x":27,"y":2281522},{"x":28,"y":2365965},{"x":29,"y":2456905},{"x":30,"y":2539039},{"x":31,"y":2619894},{"x":32,"y":2709441},{"x":33,"y":2789115},{"x":34,"y":2873802},{"x":35,"y":2951176},{"x":36,"y":3041342},{"x":37,"y":3128777},{"x":38,"y":3213217},{"x":39,"y":3288616},{"x":40,"y":3378749},{"x":41,"y":3466973},{"x":42,"y":3547755},{"x":43,"y":3652455},{"x":44,"y":3715476},{"x":45,"y":3802760},{"x":46,"y":3888695},{"x":47,"y":3974275},{"x":48,"y":4050989},{"x":49,"y":4141468},{"x":50,"y":4226300},{"x":51,"y":4313502},{"x":52,"y":4398111},{"x":53,"y":4563624},{"x":54,"y":4562078},{"x":55,"y":4644494},{"x":56,"y":4734991},{"x":57,"y":4818662},{"x":58,"y":4936558},{"x":59,"y":4978096},{"x":60,"y":5073718},{"x":61,"y":5157686},{"x":62,"y":5246515},{"x":63,"y":5323400},{"x":64,"y":5403467},{"x":65,"y":5521440},{"x":66,"y":5643599},{"x":67,"y":5724700},{"x":68,"y":5785005},{"x":69,"y":5828800},{"x":70,"y":5913351},{"x":71,"y":5994692},{"x":72,"y":6077821},{"x":73,"y":6163233},{"x":74,"y":6241928},{"x":75,"y":6328435},{"x":76,"y":6454983},{"x":77,"y":6491025},{"x":78,"y":6587047},{"x":79,"y":6682568},{"x":80,"y":6770833},{"x":81,"y":6837607},{"x":82,"y":6930084},{"x":83,"y":7013193},{"x":84,"y":7098169},{"x":85,"y":7179758},{"x":86,"y":7260219},{"x":87,"y":7339229},{"x":88,"y":7424121},{"x":89,"y":7519104},{"x":90,"y":7617335},{"x":91,"y":7712334},{"x":92,"y":7758123},{"x":93,"y":7839284},{"x":94,"y":7937517},{"x":95,"y":8007881},{"x":96,"y":8111822},{"x":97,"y":8225712},{"x":98,"y":8278829},{"x":99,"y":8362708},{"x":100,"y":8450822},{"x":101,"y":8542977},{"x":102,"y":8624184},{"x":103,"y":8699338},{"x":104,"y":8778247},{"x":105,"y":8869667},{"x":106,"y":8976259},{"x":107,"y":9069780},{"x":108,"y":9125144},{"x":109,"y":9200852},{"x":110,"y":9291957},{"x":111,"y":9426495},{"x":112,"y":9767261},{"x":113,"y":9600083},{"x":114,"y":9633508},{"x":115,"y":9717809},{"x":116,"y":9820178},{"x":117,"y":9963839},{"x":118,"y":10007166},{"x":119,"y":10057924},{"x":120,"y":10149611},{"x":121,"y":10225524},{"x":122,"y":10295429},{"x":123,"y":10425379},{"x":124,"y":10513601},{"x":125,"y":10544250},{"x":126,"y":10636493},{"x":127,"y":10734418},{"x":128,"y":10837794},{"x":129,"y":10965165},{"x":130,"y":11005296},{"x":131,"y":11132197},{"x":132,"y":11168712},{"x":133,"y":11234609},{"x":134,"y":11297818},{"x":135,"y":11395751},{"x":136,"y":11492804},{"x":137,"y":11631507},{"x":138,"y":11690862},{"x":139,"y":11727992},{"x":140,"y":11809978},{"x":141,"y":11903330},{"x":142,"y":11983301},{"x":143,"y":12079931},{"x":144,"y":12221514},{"x":145,"y":12437796},{"x":146,"y":12373413},{"x":147,"y":12392594},{"x":148,"y":12473425},{"x":149,"y":12570233},{"x":150,"y":12735041},{"x":151,"y":12748178},{"x":152,"y":12851045},{"x":153,"y":13001229},{"x":154,"y":13030785},{"x":155,"y":13182274},{"x":156,"y":13254895},{"x":157,"y":13322074},{"x":158,"y":13340178},{"x":159,"y":13496955},{"x":160,"y":13533392},{"x":161,"y":13667947},{"x":162,"y":13753967},{"x":163,"y":13766634},{"x":164,"y":13857151},{"x":165,"y":14015109},{"x":166,"y":14047326},{"x":167,"y":14130956},{"x":168,"y":14206465},{"x":169,"y":14279395},{"x":170,"y":14356277},{"x":171,"y":14421181},{"x":172,"y":14609332},{"x":173,"y":14616066},{"x":174,"y":14700392},{"x":175,"y":14830136},{"x":176,"y":14874262},{"x":177,"y":14935132},{"x":178,"y":15020962},{"x":179,"y":15123059},{"x":180,"y":15212825},{"x":181,"y":15267103},{"x":182,"y":15438001},{"x":183,"y":15484986},{"x":184,"y":15607926},{"x":185,"y":15697263},{"x":186,"y":15774327},{"x":187,"y":15820312},{"x":188,"y":15868860},{"x":189,"y":15942067},{"x":190,"y":16106089},{"x":191,"y":16127829},{"x":192,"y":16259982},{"x":193,"y":16496944},{"x":194,"y":16439087},{"x":195,"y":16478222},{"x":196,"y":16569873},{"x":197,"y":16654618},{"x":198,"y":16736332},{"x":199,"y":16818628},{"x":200,"y":16889723},{"x":202,"y":17143256},{"x":204,"y":17230629},{"x":206,"y":17393247},{"x":208,"y":17558147},{"x":210,"y":17705773},{"x":212,"y":17936579},{"x":214,"y":18110682},{"x":216,"y":18268299},{"x":218,"y":18418726},{"x":220,"y":18589452},{"x":222,"y":18757583},{"x":224,"y":18921866},{"x":226,"y":19179368},{"x":228,"y":19401874},{"x":230,"y":19438137},{"x":232,"y":19599871},{"x":234,"y":19778974}],"kde":[86028,84827,84893,84573,84642,84827,85048,84879,84635,84894,84689,84828,84668,84556,85206,84820,84839,84797,84677,84704,84678,84543,84911,84777,84884,84507,84738,84854,84883,84862,84567,84670,84698,84677,84593,84654,84557,85022,84825,84924,84870,84735,84635,88562,84801,84403,84583,84693,84722,84500,84627,84465,84440,84616,84627,84529,84504,84692,84375,84448,84286,84485,84921,84638,84764,84700,84639,84698,84695,84517,84577,84793,84664,84490,84551,84629,84325,84424,84683,84676,84717,84894,84420,84657,84509,84821,84662,84653,85011,84642,87294,84436,85172,84551,84988,85141,84703,84496,84617,84621,84763,84731,84539,84583,84692,84467,84756,84689,84405,84715,84507,84510,84406,84560,84598,84557,84628,84512,84679,84392,84453,84689,84706,84718,84715,84455,84460,84726,84525,84821,84438,84548,84808,84376,84536,84794,84263,92816,84817,84790,84647,85023,85079,85051,84703,84571,84667,84884,85082,84777,84872,84873,84698,84763,84869,84857,84710,84605,84596,84760,84778,84926,84878,84692,84984,84794,84728,84671,84785,84544,84700,85074,84679,84722,85079,85061,84736,84773,84857,84946,84633,84867,84809,84646,88222,84881,84778,84697,85104,84830,84995,84883,84680,85016,85047,84822,84684,84786,84586,84983,85158,84621,84737,84654,84631,84490,84660,84616,84674,84738,84710,84714,84804,84904,84924,84811,84761,84824,84740,84828,84693,85043,84761,84483,84650,84626,84915,84835,84657,84980,84773,87478,84629,84601,84570,84562,84742,84548,84742,84964,84597,84640,84687,84439,84455,84520,84435,84678,84334,84427,84488,84595,84620,84953,84904,84709,84987,84707,84752,84789,84445,84559,84581,84492,84382,84275,84466,84541,84714,84548,84446,84954,84577,84445,84935,84475,84746,84710,89937,85214,84693,84810,84644,84908,84654,84670,84921,85041,84823,84965,84937,84888,84878,85019,84641,84915,84610,84830,85066,84945,84867,84707,85213,85019,84879,84953,84953,84913,85033,84786,85152,84967,84760,84751,84773,84888,85097,84647,85149,85038,85175,85158,84979,84883,85168,88353,85144,84958,85011,84917,84943,85014,84794,84899,85046,84834,84967,85053,84767,84596,85077,84985,84837,85034,84841,84973,84583,84800,84812,84781,84544,84735,84371,84603,84869,84745,84904,84461,84718,84520,84812,84491,84627,84869,84857,84753,84791,84479,84738,84497,84797,84696,87619,84884,84787,84833,84718,84387,84603,84698,84631,84604,84814,85074,84959,84598,84628,84675,84541,84470,84466,84832,84774,84757,84402,84647,84309,84358,84561,84863,84902,84824,85061,84800,84481,84544,84674,84773,84887,84704,84862,84709,84960,84854,84637,84973,84858,84989,84789,87382,85597,84872,84919,84708,84841,84720,84756,84652,84765,84741,84721,84985,85884,84800,84962,84934,85091,85190,84814,84812,84774,84934,85093,84596,84864,85041,84865,85455,85031,84675,85219,84930,84872,85000,84892,85118,87299,85095,84654,84845,84407,85756,84744,84486,84612,84553,89520,85040,84805,84856,84303,84866,84635,84415,84576,84513,84807,84753,84476,84613,84469,84799,84628,84479,84540,84890,84900,84593,84525,84536,84269,84761,84712,84626,84686,86273,85276,85098,85159,84725,86260,84890,84785,84741,84405,85929,84653,84595,84683,84762,84756,84440,84494,87083,84434,84531,84829,84906,84302,84772,84480,84671,85256,84942,84850,84984,84678,84793,84568,84488,84960,84547,84802,84780,86301,84628,84834,84673,84693,85721,84914,84936,84841,84761,86236,85213,85060,85019,84578,85037,84864,84858,84826,84856,85177,84792,84716,84727,84794,87656,85162,84799,84772,84737,84896,84827,84795,84750,84826,84830,84816,84723,84789,86241,85220,84577,84587,84324,85932,85072,84555,84780,84865,86333,85022,84515,84401,84716,86217,84530,84765,84793,84529,85071,84533,84514,84339,84624,84749,85005,84782,84737,84934,85390,85018,84733,87803,84890,84959,84805,84796,84736,85665,85034,84957,84631,84678,86221,84940,84555,84568,84596,85779,84932,85109,84848,84880,86248,85010,84917,84909,84941,84789,84551,84591,84692,84589,84846,84743,84610,84718,84801,84683,84809,84933,84833,84759,84654,84789,85024,84651,85995,84849,87407,84771,84680,85990,84943,84735,84685,84758,86113,84619,84985,84779,84924,86056,84662,85162,84982,85222,84652,84522,84316,84699,84737,84994,84852,85045,84711,84572,84896,84815,84924,85005,84824,84911,85000,84579,84745,85921,84952,84538,84528,84543,85943,84790,84671,84555,84684,88740,84951,84718,84621,84522,86133,84851,84408,84608,84517,85042,84542,84583,84646,84797,84857,84974,84847,84974,84837,84953,84884,84591,84688,84764,84955,84736,84610,84585,85698,84896,84700,84690,84916,86086,84787,84826,84392,98086,86867,85211,84747,84528,84695,86204,84545,84724,88658,85076,85688,84970,84787,84485,84588,84820,84625,84439,84913,84641,84706,84646,84688,84921,84736,84967,85231,84618,84638,85878,84915,84746,84587,84629,85926,84788,84850,84479,84447,85945,84558,84802,84353,84848,88089,84548,84440,84324,84496,84826,84827,84552,84526,84426,85021,87486,84534,84502,84788,84623,84791,84624,84555,84647,84629,84710,84611,84442,86078,85023,84922,84456,84575,86402,84775,84977,84778,84497,86136,84829,85002,84642,84908,87238,84815,84862,84884,84642,84808,84713,84622,85051,85017,85333,85009,84698,84758,84831,84841,84948,84686,87231,85067,85109,84874,85075,85010,86421,84554,84795,84715,84596,86735,84772,84777,85005,84723,86227,85106,84742,84705,84746,86407,85086,84784,85079,84978,85074,84959,84589,84568,84840,84836,84566,84753,84347,84724,84883,85036,84397,84921,84783,84862,85044,84763,84791,86211,84948,87665,102908,87632,89781,101209,84608,84956,84754,87284,85262,84717,84523,84663,86166,85081,84626,84945,84939,84730,84736,84805,84543,84801,85186,85157,85060,84876,84826,84843,84912,84651,84745,84957,84840,84497,84653,84665,84552,85067,84631,84721,85003,86189,84825,84747,84548,84704,89231,84737,84780,84484,85067,86611,84998,84651,84338,84270,84725,84798,84905,85081,84777,85589,84841,84833,84771,84721,84972,84735,84408,84788,84519,85111,85043,84862,84839,84473,84629,84626,84772,84991,87262,84888,84995,84814,84498,85922,84947,84538,84629,84432,85961,84983,87205,85290,84759,84805,84528,84859,84678,84411,84914,84735,84760,85047,84528,84865,84503,84812,84905,84519,85097,84780],"result":{"estimate":84618.35313937254,"r_square":0.9999524170646158}},{"name":"find/hashtbl","description":{"start":1,"sampling":1.01,"stabilize":true,"quota":2000000000,"limit":3000,"instances":["minor-allocated","major-allocated","monotonic-clock"],"samples":196,"time":2104965685},"dataset":[{"x":1,"y":115758},{"x":2,"y":216072},{"x":3,"y":318345},{"x":4,"y":422173},{"x":5,"y":524129},{"x":6,"y":625496},{"x":7,"y":732298},{"x":8,"y":830740},{"x":9,"y":932188},{"x":10,"y":1035054},{"x":11,"y":1151802},{"x":12,"y":1243612},{"x":13,"y":1364503},{"x":14,"y":1453200},{"x":15,"y":1552821},{"x":16,"y":1657329},{"x":17,"y":1762178},{"x":18,"y":1864845},{"x":19,"y":1976001},{"x":20,"y":2074304},{"x":21,"y":2173465},{"x":22,"y":2278729},{"x":23,"y":2369317},{"x":24,"y":2471067},{"x":25,"y":2570075},{"x":26,"y":2679486},{"x":27,"y":2783350},{"x":28,"y":2894821},{"x":29,"y":3008560},{"x":30,"y":3104534},{"x":31,"y":3215647},{"x":32,"y":3312851},{"x":33,"y":3414131},{"x":34,"y":3530348},{"x":35,"y":3687319},{"x":36,"y":3722861},{"x":37,"y":3830834},{"x":38,"y":3922034},{"x":39,"y":4066681},{"x":40,"y":4132822},{"x":41,"y":4286547},{"x":42,"y":4343810},{"x":43,"y":4450778},{"x":44,"y":4557978},{"x":45,"y":4650149},{"x":46,"y":4745450},{"x":47,"y":4854897},{"x":48,"y":4967772},{"x":49,"y":5078253},{"x":50,"y":5177138},{"x":51,"y":5286514},{"x":52,"y":5374529},{"x":53,"y":5466109},{"x":54,"y":5585268},{"x":55,"y":5673618},{"x":56,"y":5770853},{"x":57,"y":5885028},{"x":58,"y":5983407},{"x":59,"y":6094159},{"x":60,"y":6199491},{"x":61,"y":6301343},{"x":62,"y":6386287},{"x":63,"y":6491612},{"x":64,"y":6608762},{"x":65,"y":6697825},{"x":66,"y":6812827},{"x":67,"y":6910082},{"x":68,"y":7006250},{"x":69,"y":7100363},{"x":70,"y":7217938},{"x":71,"y":7301328},{"x":72,"y":7415752},{"x":73,"y":7514802},{"x":74,"y":7615884},{"x":75,"y":7836068},{"x":76,"y":7849060},{"x":77,"y":7955359},{"x":78,"y":8045492},{"x":79,"y":8178847},{"x":80,"y":8269676},{"x":81,"y":8369675},{"x":82,"y":8473462},{"x":83,"y":8569521},{"x":84,"y":8670128},{"x":85,"y":8777116},{"x":86,"y":8879408},{"x":87,"y":8981621},{"x":88,"y":9113983},{"x":89,"y":9237151},{"x":90,"y":9373180},{"x":91,"y":9416945},{"x":92,"y":9526952},{"x":93,"y":9628416},{"x":94,"y":9717860},{"x":95,"y":9829144},{"x":96,"y":9922690},{"x":97,"y":10031715},{"x":98,"y":10147463},{"x":99,"y":10244920},{"x":100,"y":10368229},{"x":101,"y":10425097},{"x":102,"y":10544344},{"x":103,"y":10655068},{"x":104,"y":10748152},{"x":105,"y":10868107},{"x":106,"y":10952292},{"x":107,"y":11041111},{"x":108,"y":11163232},{"x":109,"y":11260501},{"x":110,"y":11383210},{"x":111,"y":11469701},{"x":112,"y":11558568},{"x":113,"y":11665604},{"x":114,"y":11796711},{"x":115,"y":11903802},{"x":116,"y":12065660},{"x":117,"y":12135694},{"x":118,"y":12226703},{"x":119,"y":12339673},{"x":120,"y":12533674},{"x":121,"y":12555180},{"x":122,"y":12664976},{"x":123,"y":12733660},{"x":124,"y":12860286},{"x":125,"y":12917487},{"x":126,"y":12999916},{"x":127,"y":13119934},{"x":128,"y":13220511},{"x":129,"y":13345512},{"x":130,"y":13466112},{"x":131,"y":13541418},{"x":132,"y":13647234},{"x":133,"y":13762274},{"x":134,"y":13843219},{"x":135,"y":13989752},{"x":136,"y":14072114},{"x":137,"y":14189333},{"x":138,"y":14323487},{"x":139,"y":14369225},{"x":140,"y":14472320},{"x":141,"y":14571237},{"x":142,"y":14692067},{"x":143,"y":14802685},{"x":144,"y":14931220},{"x":145,"y":15029255},{"x":146,"y":15109110},{"x":147,"y":15190939},{"x":148,"y":15282432},{"x":149,"y":15388926},{"x":150,"y":15599741},{"x":151,"y":15677350},{"x":152,"y":15803744},{"x":153,"y":15834595},{"x":154,"y":15938388},{"x":155,"y":16040043},{"x":156,"y":16145486},{"x":157,"y":16226496},{"x":158,"y":16340352},{"x":159,"y":16416841},{"x":160,"y":16535449},{"x":161,"y":16640852},{"x":162,"y":16744446},{"x":163,"y":16822777},{"x":164,"y":16986503},{"x":165,"y":17073069},{"x":166,"y":17257821},{"x":167,"y":17354309},{"x":168,"y":17347417},{"x":169,"y":17483103},{"x":170,"y":17640961},{"x":171,"y":17695644},{"x":172,"y":17816776},{"x":173,"y":17909002},{"x":174,"y":17996575},{"x":175,"y":18102115},{"x":176,"y":18223445},{"x":177,"y":18332624},{"x":178,"y":18421092},{"x":179,"y":18521981},{"x":180,"y":18598143},{"x":181,"y":18750807},{"x":182,"y":18815236},{"x":183,"y":18898171},{"x":184,"y":19323975},{"x":185,"y":19155039},{"x":186,"y":19238673},{"x":187,"y":19291806},{"x":188,"y":19448442},{"x":189,"y":19525142},{"x":190,"y":19640630},{"x":191,"y":20304645},{"x":192,"y":20883812},{"x":193,"y":20274999},{"x":194,"y":20246897},{"x":195,"y":20356364},{"x":196,"y":20301486}],"kde":[104600,103434,103359,103025,103978,103517,103360,103599,103616,104013,103900,103437,103365,103568,103936,103398,103232,104210,103347,103592,106958,104031,103519,102925,104135,103806,103531,103695,103614,103057,103583,103994,103593,103815,103947,103613,103410,103834,103921,103709,103823,103763,103818,103659,103859,103902,103997,102879,103602,103451,104082,103631,103324,103680,103712,103536,102841,103139,103129,106738,104086,104092,103856,104282,103630,103563,103288,103292,103217,103328,103423,104118,103180,103151,103440,102963,103375,103398,102801,103332,103491,103622,103740,103684,103680,103064,103467,103400,103518,103410,103642,103984,104432,103699,103782,103531,103164,106343,103833,103950,102996,103205,103446,103495,103618,102619,103134,102694,103659,103470,103467,103711,103852,103413,103338,103588,103617,103107,103556,103621,103532,103887,103653,103652,103675,103556,103363,103231,104015,103796,103628,103266,103444,103519,103852,103972,106924,102949,103659,103401,103583,103365,104007,103498,103411,103967,103599,103510,102900,103580,103851,102960,103283,103215,103373,102758,103540,103452,103834,103157,103681,103316,103242,103556,102867,103451,103522,103306,103291,103684,103554,103592,102948,103209,105672,104043,102955,103201,103653,103182,103643,103920,102749,103109,103143,103371,103357,103248,103270,103573,102824,103007,102947,103247,102400,102859,103010,102996,103320,103225,103472,103783,103659,102855,102980,103237,102184,103398,103575,103000,103360,103048,103580,106352,102883,103419,103736,103464,103282,102788,103515,103445,103658,102985,103530,103568,103042,103682,103247,103079,103070,103350,103478,102977,102797,103373,103441,103594,103714,103014,103289,103323,103426,103754,103928,103749,103423,103621,102787,103628,103877,103316,125806,120704,103670,104440,103949,103693,103403,103146,103250,103644,103617,103859,103436,103410,103015,102885,103344,103829,102791,102915,103067,102612,103584,103451,103651,103400,103440,103354,103833,104071,103783,103209,102895,102569,102969,102558,103180,103123,105804,103012,103638,103147,103336,103118,103225,103426,103522,103656,103455,103563,103716,103171,103741,103418,104095,103645,103199,103661,103434,103393,103545,103085,103360,103357,103333,102901,103255,103183,102607,103215,103373,102847,103311,103100,103782,103742,106061,121958,107203,107121,118578,103620,102927,103248,103173,103088,103266,103999,103291,103427,103107,104353,103591,103901,103298,103619,103779,104089,103433,104081,103193,103640,103275,103338,103634,103224,103457,103644,103645,103673,103148,104405,103991,104422,103326,123751,107933,107538,119236,103322,104244,103516,103570,103803,103592,103334,103732,103558,103787,103987,103660,103040,103956,103681,103998,103309,104442,103814,103969,103870,103844,103652,103804,103885,103746,103223,103371,103336,103129,103419,103163,103686,103543,106472,103958,103596,103888,103489,103396,104003,104515,103771,104386,103729,103893,103620,103700,103494,103817,103208,103690,102618,102853,103548,102771,103156,103692,103737,103823,103901,103969,103575,103539,104010,103785,103499,103891,103932,103447,103439,103274,123591,107221,107841,120608,104045,104055,103522,103904,103420,103599,103111,103374,103334,103141,103292,103788,103411,103651,103421,103583,102704,102590,103812,103152,103490,103303,103317,103972,104175,103906,103842,104089,103697,103574,103759,103858,103431,103715,106395,103633,102686,103445,103346,103240,102965,103524,103618,102942,103383,103271,103041,103119,103186,103240,104155,103646,103709,103360,103181,103559,103179,103280,121654,107735,107641,121244,104191,103800,103263,103174,120968,107927,107239,118335,103681,103804,124716,108051,107313,120310,104404,103359,104230,103754,103490,103832,103578,104121,103645,104225,142193,112579,112182,136535,103778,103907,103659,103299,102961,103998,103854,103997,103203,103588,103592,103703,104079,103104,103456,104170,103278,103601,103757,105838,104026,103269,103970,103481,103893,104224,103577,103840,103756,103786,103721,104056,103791,103894,103048,103099,103046,103424,103534,103062,103414,103631,103766,103285,103817,103448,103112,103254,103150,103442,103421,103783,103878,103250,103567,103859,103646,103299,106525,103529,103654,103741,104013,103877,103685,103713,103922,103797,104122,104227,104155,104098,103964,103285,104330,103670,103482,122591,107361,121359,103311,103296,103443,103625,103642,104235,103755,103616,103990,103554,103825,103873,103902,103889,103955,103343,106567,103609,103529,103860,103898,104205,103447,103555,104205,103965,103708,103172,103758,103745,103983,103906,103939,103944,104223,103869,104219,104264,104108,103711,103924,104143,103527,103487,103436,103498,103656,103511,103599,103745,103620,103369,103198,103707,106500,103953,103803,103912,104224,104344,103606,103320,103043,103099,103744,102985,103335,103778,103220,103579,103751,103455,103513,104242,104003,103648,103367,102987,103718,103351,103566,103654,103291,103222,103796,102789,103179,102669,103004,103179,103234,103323,103709,106873,103360,102927,103694,103759,102989,103384,103667,103560,103164,103391,103288,102876,102282,103487,103644,102906,103514,103780,103288,103541,103620,103578,104061,102709,103827,104061,103914,104196,103373,103228,103021,103377,103157,102528,103162,103055,102637,106034,103478,103431,103123,103154,103285,103185,103395,103894,103699,103167,103333,103100,102536,103426,103279,103635,103273,103283,103254,103862,103389,103737,103816,103504,103766,103084,103678,102784,103231,103108,103253,103617,103945,103681,104099,103785,103573,103791,106426,104390,103561,103176,103819,103765,103396,103302,104171,104141,104115,103641,103374,104011,103370,103683,103107,103105,103704,103522,103450,103350,103405,103860,103246,103477,103035,103439,103696,103003,103750,103154,102842,102947,103374,103732,102903,103416,109967,107121,103552,103339,103015,103282,103215,102954,103389,103021,103735,103233,103955,104234,118960,104942,103958,104244,103802,103634,104122,103744,103673,103549,103294,103610,103614,103579,103453,102965,103562,103686,104130,103329,103344,103632,103540,103561,104061,107525,104505,103948,103653,103949,103693,104168,103700,103695,103074,102641,103534,103246,103533,103773,103057,103349,103502,103611,103213,102713,103215,102781,103247,103515,103505,104144,103582,103471,103722,103526,104068,103297,104019,103884,103132,103935,103257,106473,103975,103344,103939,103802,104148,103921,103730,103328,103114,103829,103015,102717,103196,103056,103955,104109,103751,102963,103214,103414,103655,102946,103364,103220,103173,103506,103764,102980,103256,103670,103931,103547,103356,102866,103937,103733,103856,103430,106656,104223,103634,104272,104235,104098,104120,103592,103840,104058,103212,103606,103295,102819,103654,103401,104094,103511,104231,103623,103496,103049,103399,103565,103154,102749,103273,102806,103647,103748,103140,103428,103393,103591,103398,103666,103725,103618,106320,104085,103715,103516,103602,103558,103680,103350,103516,103281,103302,103218,103195,103715,103756,103909,103504,103553,103541,103965,103087],"result":{"estimate":103662.0626376486,"r_square":0.999764224454699}}]}


if (contents == null)
    d3.json("outputs.json", render);
else
    render(contents);
}

  </script>

</body>
</html>
